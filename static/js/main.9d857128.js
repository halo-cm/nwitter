/*! For license information please see main.9d857128.js.LICENSE.txt */
(()=>{var e={497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,a){if(a!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),I=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,U=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var c="\n"+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case I:return"Portal";case E:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function $(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,ke=null,Te=null;function Ee(e){if(e=wi(e)){if("function"!==typeof Ie)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ie(e.stateNode,e.type,t))}}function Se(e){ke?Te?Te.push(e):Te=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Te;if(Te=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function xe(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==ke||null!==Te)&&(Ae(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,a,o,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Ue=null,Fe=!1,Ve=null,je={onError:function(e){Me=!0,Ue=e}};function ze(e,t,n,r,i,s,a,o,c){Me=!1,Ue=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=a;break}if(c===r){o=!0,r=i,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=i;break}if(c===r){o=!0,r=a,n=i;break}c=c.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Xe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/ct|0)|0},ot=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,It,kt,Tt,Et,St=!1,Ct=[],xt=null,At=null,Nt=null,Rt=new Map,Pt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&It(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&It(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function jt(){St=!1,null!==xt&&Ft(xt)&&(xt=null),null!==At&&Ft(At)&&(At=null),null!==Nt&&Ft(Nt)&&(Nt=null),Rt.forEach(Vt),Pt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==At&&zt(At,e),null!==Nt&&zt(Nt,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ut(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Ht=!0;function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Wt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=U({},ln,{view:0,detail:0}),dn=sn(hn),fn=U({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(an=e.screenX-cn.screenX,on=e.screenY-cn.screenY):on=an=0,cn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(U({},fn,{dataTransfer:0})),gn=sn(U({},hn,{relatedTarget:0})),vn=sn(U({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(U({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Tn}var Sn=U({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(Sn),xn=sn(U({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(U({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=sn(U({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=U({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Un=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Wn=null;function Qn(e){Fr(e,0)}function Yn(e){if(W(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var Xn=!1;if(u){var $n;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Wn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Kn(t,Wn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function sr(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ir={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},kr={},Tr={};function Er(e){if(kr[e])return kr[e];if(!Ir[e])return e;var t,n=Ir[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return kr[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);var Sr=Er("animationend"),Cr=Er("animationiteration"),xr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),c(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Dr=Rr[Or];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Sr,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(xr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,c,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Ue;Me=!1,Ue=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,l=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;Ur(i,o,l),s=c}else for(a=0;a<r.length;a++){if(c=(o=r[a]).instance,l=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;Ur(i,o,l),s=c}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(c=a.tag)||6===c){r=s=a;continue e}o=o.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),a=[];e:{var o=Nr.get(e);if(void 0!==o){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=An;break;case Sr:case Cr:case xr:c=vn;break;case Ar:c=Nn;break;case"scroll":c=dn;break;case"wheel":c=Pn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push(Kr(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new c(o,l,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!yi(l)&&!l[pi])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?yi(l):null)&&(l!==(h=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?o:bi(c),f=null==l?o:bi(l),(o=new u(m,p+"leave",c,n,i)).target=h,o.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)u=Wr(u),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Wr(u),d=Wr(d)}u=null}else u=null;null!==c&&Qr(a,o,c,u,!1),null!==l&&null!==h&&Qr(a,h,l,u,!0)}if("select"===(c=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var g=Jn;else if(Hn(o))if(Xn)g=ar;else{g=ir;var v=rr}else(c=o.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?Kn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?jn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):($t="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(v=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),a.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&jn(e,t)?(e=en(),Zt=$t=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,c=o.alternate,l=o.stateNode;if(null!==c&&c===r)break;5===o.tag&&null!==l&&(o=l,i?null!=(c=Pe(n,s))&&a.unshift(Kr(n,c,o)):i||null!=(c=Pe(n,s))&&a.push(Kr(n,c,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function $r(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ii=[],ki=-1;function Ti(e){return{current:e}}function Ei(e){0>ki||(e.current=Ii[ki],Ii[ki]=null,ki--)}function Si(e,t){ki++,Ii[ki]=e.current,e.current=t}var Ci={},xi=Ti(Ci),Ai=Ti(!1),Ni=Ci;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ai),Ei(xi)}function Di(e,t,n){if(xi.current!==Ci)throw Error(s(168));Si(xi,t),Si(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return U({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ni=xi.current,Si(xi,e),Si(Ai,Ai.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(xi),Si(xi,e)):Ei(Ai),Si(Ai,n)}var Fi=null,Vi=!1,ji=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!ji&&null!==Fi){ji=!0;var e=0,t=wt;try{var n=Fi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),We(Ze,Bi),i}finally{wt=t,ji=!1}}return null}var qi=[],Hi=0,Ki=null,Gi=0,Wi=[],Qi=0,Yi=null,Ji=1,Xi="";function $i(e,t){qi[Hi++]=Gi,qi[Hi++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Wi[Qi++]=Ji,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Yi=e;var r=Ji;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Ji=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--Hi],qi[Hi]=null,Gi=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,Ji=Wi[--Qi],Wi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Rl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)as(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dl(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Dl(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case I:return(t=Fl(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case I:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,o[m],c);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=a(v,s,m),null===u?l=v:u.sibling=v,u=v,h=g}if(m===o.length)return n(i,h),is&&$i(i,m),l;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],c))&&(s=a(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&$i(i,m),l}for(h=r(i,h);m<o.length;m++)null!==(g=p(h,i,m,o[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&$i(i,m),l}function g(i,o,c,l){var u=L(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=o,g=o=0,v=null,y=c.next();null!==m&&!y.done;g++,y=c.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,l);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),o=a(w,o,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&$i(i,g),u;if(null===m){for(;!y.done;g++,y=c.next())null!==(y=d(i,y.value,l))&&(o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return is&&$i(i,g),u}for(m=r(i,m);!y.done;g++,y=c.next())null!==(y=p(m,i,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&$i(i,g),u}return function e(r,s,a,c){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var l=a.key,u=s;null!==u;){if(u.key===l){if((l=a.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===P&&ys(l)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((s=Ll(a.props.children,r.mode,c,a.key)).return=r,r=s):((c=Dl(a.type,a.key,a.props,null,r.mode,c)).ref=gs(r,s,a),c.return=r,r=c)}return o(r);case I:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fl(a,r.mode,c)).return=r,r=s}return o(r);case P:return e(r,s,(u=a._init)(a._payload),c)}if(te(a))return m(r,s,a,c);if(L(a))return g(r,s,a,c);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Ul(a,r.mode,c)).return=r,r=s),o(r)):n(r,s)}}var bs=ws(!0),_s=ws(!1),Is=Ti(null),ks=null,Ts=null,Es=null;function Ss(){Es=Ts=ks=null}function Cs(e){var t=Is.current;Ei(Is),e._currentValue=t}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){ks=e,Es=Ts=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Ts){if(null===ks)throw Error(s(308));Ts=e,ks.dependencies={lanes:0,firstContext:e}}else Ts=Ts.next=e;return t}var Rs=null;function Ps(e){null===Rs?Rs=[e]:Rs.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ps(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Us(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Ps(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function js(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var c=o,l=c.next;c.next=null,null===a?s=l:a.next=l,a=c;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=l:o.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(a=0,u=l=c=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=U({},h,d);break e;case 2:Ls=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Mc|=a,e.lanes=a,e.memoizedState=h}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Ks=Ti(Hs),Gs=Ti(Hs),Ws=Ti(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Si(Ws,t),Si(Gs,e),Si(Ks,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ks),Si(Ks,t)}function Js(){Ei(Ks),Ei(Gs),Ei(Ws)}function Xs(e){Qs(Ws.current);var t=Qs(Ks.current),n=ce(t,e.type);t!==n&&(Si(Gs,e),Si(Ks,n))}function $s(e){Gs.current===e&&(Ei(Ks),Ei(Gs))}var Zs=Ti(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,ca=null,la=!1,ua=!1,ha=0,da=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?$a:Za,e=n(r,i),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(s(301));a+=1,ca=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,sa=0,ca=oa=aa=null,la=!1,t)throw Error(s(300));return e}function ga(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?aa.memoizedState=ca=e:ca=ca.next=e,ca}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===ca?aa.memoizedState:ca.next;if(null!==t)ca=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===ca?aa.memoizedState=ca=e:ca=ca.next=e}return ca}function wa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var c=o=null,l=null,u=a;do{var h=u.lane;if((sa&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,o=r):l=l.next=d,aa.lanes|=h,Mc|=h}u=u.next}while(null!==u&&u!==a);null===l?o=r:l.next=c,or(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Mc|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(wo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ia(){}function ka(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,wo=!0),r=r.queue,La(Sa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Na(9,Ea.bind(null,n,r,i,t),void 0,null),null===Ac)throw Error(s(349));0!==(30&sa)||Ta(n,t,i)}return i}function Ta(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,Ca(t)&&xa(e)}function Sa(e,t,n){return n((function(){Ca(t)&&xa(e)}))}function Ca(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function xa(e){var t=Ds(e,1);null!==t&&nl(t,e,1,-1)}function Aa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Wa.bind(null,aa,e),[t.memoizedState,e]}function Na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return ya().memoizedState}function Pa(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=Na(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=Na(t,n,s,r))}aa.flags|=e,i.memoizedState=Na(1|t,n,s,r)}function Da(e,t){return Pa(8390656,8,e,t)}function La(e,t){return Oa(2048,8,e,t)}function Ma(e,t){return Oa(4,2,e,t)}function Ua(e,t){return Oa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Fa.bind(null,t,e),n)}function ja(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Mc|=n,e.baseState=!0),t)}function Ha(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{wt=n,ia.transition=r}}function Ka(){return ya().memoizedState}function Ga(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ya(t,n);else if(null!==(n=Os(e,t,n,r))){nl(n,e,r,el()),Ja(n,t,r)}}function Wa(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var c=t.interleaved;return null===c?(i.next=i,Ps(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Os(e,t,i,r))&&(nl(n,e,r,i=el()),Ja(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){ua=la=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xa={readContext:Ns,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},$a={readContext:Ns,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pa(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Pa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Pa(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Aa,useDebugValue:ja,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Aa(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ac)throw Error(s(349));0!==(30&sa)||Ta(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Da(Sa.bind(null,r,a,e),[e]),r.flags|=2048,Na(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Ac.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ns,useCallback:za,useContext:Ns,useEffect:La,useImperativeHandle:Va,useInsertionEffect:Ma,useLayoutEffect:Ua,useMemo:Ba,useReducer:ba,useRef:Ra,useState:function(){return ba(wa)},useDebugValue:ja,useDeferredValue:function(e){return qa(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(wa)[0],ya().memoizedState]},useMutableSource:Ia,useSyncExternalStore:ka,useId:Ka,unstable_isNewReconciler:!1},eo={readContext:Ns,useCallback:za,useContext:Ns,useEffect:La,useImperativeHandle:Va,useInsertionEffect:Ma,useLayoutEffect:Ua,useMemo:Ba,useReducer:_a,useRef:Ra,useState:function(){return _a(wa)},useDebugValue:ja,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:qa(t,oa.memoizedState,e)},useTransition:function(){return[_a(wa)[0],ya().memoizedState]},useMutableSource:Ia,useSyncExternalStore:ka,useId:Ka,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(nl(t,e,i,r),js(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(nl(t,e,i,r),js(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(nl(t,e,r,n),js(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function so(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(i=Pi(t)?Ni:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ns(s):(s=Pi(t)?Ni:xi.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function lo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hc||(Hc=!0,Kc=r),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Gc?Gc=new Set([this]):Gc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=El.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=b.ReactCurrentOwner,wo=!1;function bo(e,t,n,r){t.child=null===e?_s(t,null,n,r):bs(t,e.child,n,r)}function _o(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=ma(e,t,n,r,s,i),n=ga(),null===e||wo?(is&&n&&es(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Io(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Pl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Ol(s,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(wo=!0)}}return So(e,t,n,r,i)}function To(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Oc,Pc),Pc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Oc,Pc),Pc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Si(Oc,Pc),Pc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Si(Oc,Pc),Pc|=r;return bo(e,t,i,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,i){var s=Pi(n)?Ni:xi.current;return s=Ri(t,s),As(t,i),n=ma(e,t,n,r,s,i),r=ga(),null===e||wo?(is&&r&&es(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Co(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(As(t,i),null===t.stateNode)qo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ns(l):l=Ri(t,l=Pi(n)?Ni:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||c!==l)&&ao(t,a,r,l),Ls=!1;var d=t.memoizedState;a.state=d,Bs(t,r,a,i),c=t.memoizedState,o!==r||d!==c||Ai.current||Ls?("function"===typeof u&&(no(t,n,u,r),c=t.memoizedState),(o=Ls||io(t,n,o,r,d,c,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=l,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Us(e,t),o=t.memoizedProps,l=t.type===t.elementType?o:to(t.type,o),a.props=l,h=t.pendingProps,d=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ns(c):c=Ri(t,c=Pi(n)?Ni:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==c)&&ao(t,a,r,c),Ls=!1,d=t.memoizedState,a.state=d,Bs(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ai.current||Ls?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(l=Ls||io(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return xo(e,t,n,r,s,i)}function xo(e,t,n,r,i,s){Eo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ui(t,n,!1),Ho(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ys(e,t.containerInfo)}function No(e,t,n,r,i){return fs(),ps(i),t.flags|=256,bo(e,t,n,r),t.child}var Ro,Po,Oo,Do,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Si(Zs,1&a),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,o?(i=t.mode,o=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=c):o=Ml(c,i,0,null),e=Ll(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Lo,e):Fo(t,c));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=lo(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Ml({mode:"visible",children:r.children},i,0,null),(a=Ll(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Vo(e,t,o,r=lo(a=Error(s(419)),r,void 0))}if(c=0!==(o&e.childLanes),wo||c){if(null!==(r=Ac)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ds(e,i),nl(r,e,i,-1))}return ml(),Vo(e,t,o,r=lo(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Wi[Qi++]=Ji,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Ji=e.id,Xi=e.overflow,Yi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,a,n);if(o){o=i.fallback,c=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ol(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Ol(r,o):(o=Ll(o,c,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,c=null===(c=e.child.memoizedState)?Mo(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,i}return e=(o=e.child).sibling,i=Ol(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Ml({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function jo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&jo(e,n,t);else if(19===e.tag)jo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ko(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wo(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Pi(t.type)&&Oi(),Go(t),null;case 3:return r=t.stateNode,Js(),Ei(Ai),Ei(xi),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Po(e,t),Go(t),null;case 5:$s(t);var i=Qs(Ws.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=Qs(Ks.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":J(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":ie(r,a),Vr("invalid",r)}for(var c in ye(n,a),i=null,a)if(a.hasOwnProperty(c)){var l=a[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",""+l]):o.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Vr("scroll",r)}switch(n){case"input":G(r),Z(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(a in ye(n,i),l=i)if(l.hasOwnProperty(a)){var u=l[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Vr("scroll",e):null!=u&&w(e,a,u,c))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Ws.current),Qs(Ks.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Go(t),null;case 13:if(Ei(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==ss&&(al(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dc&&(Dc=3):ml())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Js(),Po(e,t),null===e&&Br(t.stateNode.containerInfo),Go(t),null;case 10:return Cs(t.type._context),Go(t),null;case 19:if(Ei(Zs),null===(a=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(c=a.rendering))if(r)Ko(a,!1);else{if(0!==Dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ea(e))){for(t.flags|=128,Ko(a,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Bc&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ko(a,!0),null===a.tail&&"hidden"===a.tailMode&&!c.alternate&&!is)return Go(t),null}else 2*Xe()-a.renderingStartTime>Bc&&1073741824!==n&&(t.flags|=128,r=!0,Ko(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=a.last)?n.sibling=c:t.child=c,a.last=c)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Si(Zs,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pc)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),Ei(Ai),Ei(xi),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $s(t),null;case 13:if(Ei(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Zs),null;case 4:return Js(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Oo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ks.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Vr("scroll",e),a||c===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Jo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,$o=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&ec(t,n,s)}i=i.next}while(i!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sc(e){var t=e.alternate;null!==t&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function oc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,hc=!1;function dc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Jo||Zo(n,t);case 6:var r=uc,i=hc;uc=null,dc(e,t,n),hc=i,null!==(uc=r)&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(uc,n.stateNode));break;case 4:r=uc,i=hc,uc=n.stateNode.containerInfo,hc=!0,dc(e,t,n),uc=r,hc=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&ec(n,t,a),i=i.next}while(i!==r)}dc(e,t,n);break;case 1:if(!Jo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Tl(n,t,o)}dc(e,t,n);break;case 21:dc(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,dc(e,t,n),Jo=r):dc(e,t,n);break;default:dc(e,t,n)}}function pc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=xl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,c=o;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,hc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===uc)throw Error(s(160));fc(a,o,i),uc=null,hc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Tl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),vc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(g){Tl(e,e.return,g)}try{nc(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:mc(t,e),vc(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(mc(t,e),vc(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===a.type&&null!=a.name&&X(i,a),we(c,o);var u=we(c,a);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":$(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Tl(e,e.return,g)}}break;case 6:if(mc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Tl(e,e.return,g)}}break;case 3:if(mc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:mc(t,e),vc(e);break;case 13:mc(t,e),vc(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=Xe())),4&r&&pc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||h,mc(t,e),Jo=u):mc(t,e),vc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for($o=e,h=e.child;null!==h;){for(d=$o=h;null!==$o;){switch(p=(f=$o).child,f.tag){case 0:case 11:case 14:case 15:nc(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tl(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){_c(d);continue}}null!==p?(p.return=f,$o=p):_c(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(c=d.stateNode,o=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",o))}catch(g){Tl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mc(t,e),vc(e),4&r&&pc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),lc(e,oc(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cc(e,oc(e),a);break;default:throw Error(s(161))}}catch(o){Tl(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){$o=e,wc(e,t,n)}function wc(e,t,n){for(var r=0!==(1&e.mode);null!==$o;){var i=$o,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,c=null!==o&&null!==o.memoizedState||Jo;o=Yo;var l=Jo;if(Yo=a,(Jo=c)&&!l)for($o=i;null!==$o;)c=(a=$o).child,22===a.tag&&null!==a.memoizedState?Ic(i):null!==c?(c.return=a,$o=c):Ic(i);for(;null!==s;)$o=s,wc(s,t,n),s=s.sibling;$o=i,Yo=o,Jo=l}bc(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$o=s):bc(e)}}function bc(e){for(;null!==$o;){var t=$o;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,o,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Jo||512&t.flags&&ic(t)}catch(f){Tl(t,t.return,f)}}if(t===e){$o=null;break}if(null!==(n=t.sibling)){n.return=t.return,$o=n;break}$o=t.return}}function _c(e){for(;null!==$o;){var t=$o;if(t===e){$o=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$o=n;break}$o=t.return}}function Ic(e){for(;null!==$o;){var t=$o;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Tl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Tl(t,i,c)}}var s=t.return;try{ic(t)}catch(c){Tl(t,s,c)}break;case 5:var a=t.return;try{ic(t)}catch(c){Tl(t,a,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){$o=null;break}var o=t.sibling;if(null!==o){o.return=t.return,$o=o;break}$o=t.return}}var kc,Tc=Math.ceil,Ec=b.ReactCurrentDispatcher,Sc=b.ReactCurrentOwner,Cc=b.ReactCurrentBatchConfig,xc=0,Ac=null,Nc=null,Rc=0,Pc=0,Oc=Ti(0),Dc=0,Lc=null,Mc=0,Uc=0,Fc=0,Vc=null,jc=null,zc=0,Bc=1/0,qc=null,Hc=!1,Kc=null,Gc=null,Wc=!1,Qc=null,Yc=0,Jc=0,Xc=null,$c=-1,Zc=0;function el(){return 0!==(6&xc)?Xe():-1!==$c?$c:$c=Xe()}function tl(e){return 0===(1&e.mode)?1:0!==(2&xc)&&0!==Rc?Rc&-Rc:null!==ms.transition?(0===Zc&&(Zc=mt()),Zc):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nl(e,t,n,r){if(50<Jc)throw Jc=0,Xc=null,Error(s(185));vt(e,n,r),0!==(2&xc)&&e===Ac||(e===Ac&&(0===(2&xc)&&(Uc|=n),4===Dc&&ol(e,Rc)),rl(e,r),1===n&&0===xc&&0===(1&t.mode)&&(Bc=Xe()+500,Vi&&Bi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,c=i[a];-1===c?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===Ac?Rc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(cl.bind(null,e)):zi(cl.bind(null,e)),ai((function(){0===(6&xc)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if($c=-1,Zc=0,0!==(6&xc))throw Error(s(327));var n=e.callbackNode;if(Il()&&e.callbackNode!==n)return null;var r=dt(e,e===Ac?Rc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var i=xc;xc|=2;var a=pl();for(Ac===e&&Rc===t||(qc=null,Bc=Xe()+500,dl(e,t));;)try{yl();break}catch(c){fl(e,c)}Ss(),Ec.current=a,xc=i,null!==Nc?t=0:(Ac=null,Rc=0,t=Dc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sl(e,i))),1===t)throw n=Lc,dl(e,0),ol(e,r),rl(e,Xe()),n;if(6===t)ol(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gl(e,r))&&(0!==(a=pt(e))&&(r=a,t=sl(e,a))),1===t))throw n=Lc,dl(e,0),ol(e,r),rl(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_l(e,jc,qc);break;case 3:if(ol(e,r),(130023424&r)===r&&10<(t=zc+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_l.bind(null,e,jc,qc),t);break}_l(e,jc,qc);break;case 4:if(ol(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(_l.bind(null,e,jc,qc),r);break}_l(e,jc,qc);break;default:throw Error(s(329))}}}return rl(e,Xe()),e.callbackNode===n?il.bind(null,e):null}function sl(e,t){var n=Vc;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=jc,jc=n,null!==t&&al(t)),e}function al(e){null===jc?jc=e:jc.push.apply(jc,e)}function ol(e,t){for(t&=~Fc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&xc))throw Error(s(327));Il();var t=dt(e,0);if(0===(1&t))return rl(e,Xe()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sl(e,r))}if(1===n)throw n=Lc,dl(e,0),ol(e,t),rl(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_l(e,jc,qc),rl(e,Xe()),null}function ll(e,t){var n=xc;xc|=1;try{return e(t)}finally{0===(xc=n)&&(Bc=Xe()+500,Vi&&Bi())}}function ul(e){null!==Qc&&0===Qc.tag&&0===(6&xc)&&Il();var t=xc;xc|=1;var n=Cc.transition,r=wt;try{if(Cc.transition=null,wt=1,e)return e()}finally{wt=r,Cc.transition=n,0===(6&(xc=t))&&Bi()}}function hl(){Pc=Oc.current,Ei(Oc)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nc)for(n=Nc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Js(),Ei(Ai),Ei(xi),na();break;case 5:$s(r);break;case 4:Js();break;case 13:case 19:Ei(Zs);break;case 10:Cs(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Ac=e,Nc=e=Ol(e.current,null),Rc=Pc=t,Dc=0,Lc=null,Fc=Uc=Mc=0,jc=Vc=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Rs=null}return e}function fl(e,t){for(;;){var n=Nc;try{if(Ss(),ra.current=Xa,la){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}la=!1}if(sa=0,ca=oa=aa=null,ua=!1,ha=0,Sc.current=null,null===n||null===n.return){Dc=1,Lc=t,Nc=null;break}e:{var a=e,o=n.return,c=n,l=t;if(t=Rc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,c,0,t),1&p.mode&&mo(a,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){mo(a,u,t),ml();break e}l=Error(s(426))}else if(is&&1&c.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,c,0,t),ps(co(l,c));break e}}a=l=co(l,c),4!==Dc&&(Dc=2),null===Vc?Vc=[a]:Vc.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,l,t));break e;case 1:c=l;var y=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Gc||!Gc.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,po(a,c,t));break e}}a=a.return}while(null!==a)}bl(n)}catch(b){t=b,Nc===n&&null!==n&&(Nc=n=n.return);continue}break}}function pl(){var e=Ec.current;return Ec.current=Xa,null===e?Xa:e}function ml(){0!==Dc&&3!==Dc&&2!==Dc||(Dc=4),null===Ac||0===(268435455&Mc)&&0===(268435455&Uc)||ol(Ac,Rc)}function gl(e,t){var n=xc;xc|=2;var r=pl();for(Ac===e&&Rc===t||(qc=null,dl(e,t));;)try{vl();break}catch(i){fl(e,i)}if(Ss(),xc=n,Ec.current=r,null!==Nc)throw Error(s(261));return Ac=null,Rc=0,Dc}function vl(){for(;null!==Nc;)wl(Nc)}function yl(){for(;null!==Nc&&!Ye();)wl(Nc)}function wl(e){var t=kc(e.alternate,e,Pc);e.memoizedProps=e.pendingProps,null===t?bl(e):Nc=t,Sc.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wo(n,t,Pc)))return void(Nc=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Nc=n);if(null===e)return Dc=6,void(Nc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nc=t);Nc=t=e}while(null!==t);0===Dc&&(Dc=5)}function _l(e,t,n){var r=wt,i=Cc.transition;try{Cc.transition=null,wt=1,function(e,t,n,r){do{Il()}while(null!==Qc);if(0!==(6&xc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Ac&&(Nc=Ac=null,Rc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wc||(Wc=!0,Al(tt,(function(){return Il(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Cc.transition,Cc.transition=null;var o=wt;wt=1;var c=xc;xc|=4,Sc.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break e}var o=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=o+i),d!==a||0!==r&&3!==d.nodeType||(l=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=o),f===a&&++h===r&&(l=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,$o=t;null!==$o;)if(e=(t=$o).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$o=e;else for(;null!==$o;){t=$o;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tl(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,$o=e;break}$o=t.return}m=tc,tc=!1}(e,n),gc(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yc(n,e,i),Je(),xc=c,wt=o,Cc.transition=a}else e.current=n;if(Wc&&(Wc=!1,Qc=e,Yc=i),a=e.pendingLanes,0===a&&(Gc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hc)throw Hc=!1,e=Kc,Kc=null,e;0!==(1&Yc)&&0!==e.tag&&Il(),a=e.pendingLanes,0!==(1&a)?e===Xc?Jc++:(Jc=0,Xc=e):Jc=0,Bi()}(e,t,n,r)}finally{Cc.transition=i,wt=r}return null}function Il(){if(null!==Qc){var e=bt(Yc),t=Cc.transition,n=wt;try{if(Cc.transition=null,wt=16>e?16:e,null===Qc)var r=!1;else{if(e=Qc,Qc=null,Yc=0,0!==(6&xc))throw Error(s(331));var i=xc;for(xc|=4,$o=e.current;null!==$o;){var a=$o,o=a.child;if(0!==(16&$o.flags)){var c=a.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for($o=u;null!==$o;){var h=$o;switch(h.tag){case 0:case 11:case 15:nc(8,h,a)}var d=h.child;if(null!==d)d.return=h,$o=d;else for(;null!==$o;){var f=(h=$o).sibling,p=h.return;if(sc(h),h===u){$o=null;break}if(null!==f){f.return=p,$o=f;break}$o=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$o=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,$o=o;else e:for(;null!==$o;){if(0!==(2048&(a=$o).flags))switch(a.tag){case 0:case 11:case 15:nc(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,$o=y;break e}$o=a.return}}var w=e.current;for($o=w;null!==$o;){var b=(o=$o).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,$o=b;else e:for(o=w;null!==$o;){if(0!==(2048&(c=$o).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(I){Tl(c,c.return,I)}if(c===o){$o=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,$o=_;break e}$o=c.return}}if(xc=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(I){}r=!0}return r}finally{wt=n,Cc.transition=t}}return!1}function kl(e,t,n){e=Vs(e,t=fo(0,t=co(n,t),1),1),t=el(),null!==e&&(vt(e,1,t),rl(e,t))}function Tl(e,t,n){if(3===e.tag)kl(e,e,n);else for(;null!==t;){if(3===t.tag){kl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gc||!Gc.has(r))){t=Vs(t,e=po(t,e=co(n,e),1),1),e=el(),null!==t&&(vt(t,1,e),rl(t,e));break}}t=t.return}}function El(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(Rc&n)===n&&(4===Dc||3===Dc&&(130023424&Rc)===Rc&&500>Xe()-zc?dl(e,0):Fc|=n),rl(e,t)}function Sl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=el();null!==(e=Ds(e,t))&&(vt(e,t,n),rl(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sl(e,n)}function xl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Sl(e,n)}function Al(e,t){return We(e,t)}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rl(e,t,n,r){return new Nl(e,t,n,r)}function Pl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Rl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dl(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Pl(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Ll(n.children,i,a,t);case T:o=8,i|=8;break;case E:return(e=Rl(12,n,t,2|i)).elementType=E,e.lanes=a,e;case A:return(e=Rl(13,n,t,i)).elementType=A,e.lanes=a,e;case N:return(e=Rl(19,n,t,i)).elementType=N,e.lanes=a,e;case O:return Ml(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case x:o=11;break e;case R:o=14;break e;case P:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rl(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Ll(e,t,n,r){return(e=Rl(7,e,r,t)).lanes=n,e}function Ml(e,t,n,r){return(e=Rl(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Rl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Rl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jl(e,t,n,r,i,s,a,o,c){return e=new Vl(e,t,n,o,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rl(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function Bl(e,t,n,r,i,s,a,o,c){return(e=jl(n,r,!0,e,0,s,0,o,c)).context=zl(null),n=e.current,(s=Fs(r=el(),i=tl(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,vt(e,i,r),rl(e,r),e}function ql(e,t,n,r){var i=t.current,s=el(),a=tl(i);return n=zl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,a))&&(nl(e,i,a,s),js(e,i,a)),a}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}kc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Ao(t),fs();break;case 5:Xs(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(Is,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Si(Zs,1&Zs.current),null!==(e=Ho(e,t,n))?e.sibling:null);Si(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,To(e,t,n)}return Ho(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=Ri(t,xi.current);As(t,n),i=ma(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=xo(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===R)return 14}return 2}(r),e=to(r,e),i){case 0:t=So(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=_o(null,t,r,e,n);break e;case 14:t=Io(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Ao(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Us(e,t),Bs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=No(e,t,r,n,i=co(Error(s(423)),t));break e}if(r!==i){t=No(e,t,r,n,i=co(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&ls(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Eo(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Uo(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_o(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Si(Is,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ai.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var c=a.dependencies;if(null!==c){o=a.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),xs(a.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xs(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Ns(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),Io(e,t,r,i=to(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),qo(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,As(t,n),so(t,r,i),oo(t,r,i,n),xo(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return To(e,t,n)}throw Error(s(156,t.tag))};var Wl="function"===typeof reportError?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(){}function Zl(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hl(a);o.call(e)}}ql(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hl(a);s.call(e)}}var a=Bl(t,r,e,0,null,!1,0,"",$l);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),ul(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hl(c);o.call(e)}}var c=jl(e,0,!1,null,0,!1,0,"",$l);return e._reactRootContainer=c,e[pi]=c.current,Br(8===e.nodeType?e.parentNode:e),ul((function(){ql(t,c,n,r)})),c}(n,t,e,i,r);return Hl(a)}Yl.prototype.render=Ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));ql(e,t,null,null)},Yl.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){ql(null,e,null,null)})),t[pi]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ut(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,Xe()),0===(6&xc)&&(Bc=Xe()+500,Bi()))}break;case 13:ul((function(){var t=Ds(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Gl(e,1)}},It=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nl(t,e,134217728,el());Gl(e,134217728)}},kt=function(e){if(13===e.tag){var t=tl(e),n=Ds(e,t);if(null!==n)nl(n,e,t,el());Gl(e,t)}},Tt=function(){return wt},Et=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ie=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));W(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ll,Ae=ul;var eu={usingClientEntryPoint:!1,Events:[wi,bi,_i,Se,Ce,ll]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(s(299));var n=!1,r="",i=Wl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Wl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yl(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(ul((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,I=Object.prototype.hasOwnProperty,k={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)I.call(t,i)&&!T.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var c=!1;if(null===e)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=e),e=""===s?"."+x(c,0):s,_(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(a,t,i,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(c=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var u=s+x(o=e[l],l);c+=A(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(o=e.next()).done;)c+=A(o=o.value,t,i,u=s+x(o,l++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)I.call(t,l)&&!T.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,c=e[o],l=o+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[o]=n,r=o);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,O(I);else{var t=r(u);null!==t&&D(_,t.startTime-e)}}function I(e,n){m=!1,g&&(g=!1,y(S),S=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!A());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&D(_,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,T=!1,E=null,S=-1,C=5,x=-1;function A(){return!(t.unstable_now()-x<C)}function N(){if(null!==E){var e=t.unstable_now();x=e;var n=!0;try{n=E(!0,e)}finally{n?k():(T=!1,E=null)}}else T=!1}if("function"===typeof w)k=function(){w(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,k=function(){P.postMessage(null)}}else k=function(){v(N,0)};function O(e){E=e,T||(T=!0,k())}function D(e,n){S=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(I))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(y(S),S=-1):g=!0,D(_,s-a))):(e.sortIndex=o,n(l,e),m||p||(m=!0,O(I))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Ye,SDK_VERSION:()=>xn,_DEFAULT_ENTRY_NAME:()=>dn,_addComponent:()=>vn,_addOrOverwriteComponent:()=>yn,_apps:()=>pn,_clearComponents:()=>Tn,_components:()=>gn,_getProvider:()=>bn,_isFirebaseApp:()=>In,_isFirebaseServerApp:()=>kn,_registerComponent:()=>wn,_removeServiceInstance:()=>_n,_serverApps:()=>mn,deleteApp:()=>On,getApp:()=>Rn,getApps:()=>Pn,initializeApp:()=>An,initializeServerApp:()=>Nn,onLog:()=>Ln,registerVersion:()=>Dn,setLogLevel:()=>Mn});var t,r=n(43),i=n.t(r,2),s=n(391),a=n(950),o=n.t(a,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const l="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,h=t.Pop,m=null,g=v();function v(){return(o.state||{idx:null}).idx}function y(){h=t.Pop;let e=v(),n=null==e?null:e-g;g=e,m&&m({action:h,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,o.replaceState(c({},o.state,{idx:g}),""));let b={get action(){return h},get location(){return e(s,o)},listen(e){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),m=e,()=>{s.removeEventListener(l,y),m=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(b.location,e,n);r&&r(i,e),g=v()+1;let c=d(i,g),l=b.createHref(i);try{o.pushState(c,"",l)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;s.location.assign(l)}a&&m&&m({action:h,location:b.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(b.location,e,n);r&&r(i,e),g=v();let s=d(i,g),c=b.createHref(i);o.replaceState(s,"",c),a&&m&&m({action:h,location:b.location,delta:0})},go:e=>o.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=P(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let i=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let a=0;null==s&&a<i.length;++a){let e=R(r);s=A(i[a],e)}return s}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(u(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=U([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:x(o,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=b(r.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,I=3,k=2,T=1,E=10,S=-2,C=e=>"*"===e;function x(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=S),t&&(r+=k),n.filter((e=>!C(e))).reduce(((e,t)=>e+(_.test(t)?I:""===t?T:E)),r)}function A(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let a=0;a<n.length;++a){let e=n[a],o=a===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=N({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c);if(!l)return null;Object.assign(r,l.params);let u=e.route;s.push({params:r,pathname:U([i,l.pathname]),pathnameBase:F(U([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=U([i,l.pathnameBase]))}return s}function N(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1),c=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const c=o[n];return e[r]=i&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{});return{params:c,pathname:s,pathnameBase:a,pattern:e}}function R(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function D(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function L(e,t){let n=D(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function M(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=c({},e),u(!i.pathname||!i.pathname.includes("?"),O("?","pathname","search",i)),u(!i.pathname||!i.pathname.includes("#"),O("#","pathname","hash",i)),u(!i.search||!i.search.includes("#"),O("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(r),hash:j(i)}}(i,s),h=o&&"/"!==o&&o.endsWith("/"),d=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!h&&!d||(l.pathname+="/"),l}const U=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",j=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],q=(new Set(B),["get",...B]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const K=r.createContext(null);const G=r.createContext(null);const W=r.createContext(null);const Q=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const J=r.createContext(null);function X(){return null!=r.useContext(Q)}function $(){return X()||u(!1),r.useContext(Q).location}function Z(e){r.useContext(W).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ue(ce.UseNavigateStable),t=de(le.UseNavigateStable),n=r.useRef(!1);return Z((()=>{n.current=!0})),r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))}),[e,t])}():function(){X()||u(!1);let e=r.useContext(K),{basename:t,future:n,navigator:i}=r.useContext(W),{matches:s}=r.useContext(Y),{pathname:a}=$(),o=JSON.stringify(L(s,n.v7_relativeSplatPath)),c=r.useRef(!1);return Z((()=>{c.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof n)return void i.go(n);let s=M(n,JSON.parse(o),a,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:U([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,o,a,e])}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(W),{matches:s}=r.useContext(Y),{pathname:a}=$(),o=JSON.stringify(L(s,i.v7_relativeSplatPath));return r.useMemo((()=>M(e,JSON.parse(o),a,"path"===n)),[e,o,a,n])}function ne(e,n,i,s){X()||u(!1);let{navigator:a}=r.useContext(W),{matches:o}=r.useContext(Y),c=o[o.length-1],l=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let d,f=$();if(n){var p;let e="string"===typeof n?m(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||u(!1),d=e}else d=f;let g=d.pathname||"/",v=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=y(e,{pathname:v});let b=oe(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:U([h,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:U([h,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,i,s);return n&&b?r.createElement(Q.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},b):b}function re(){let e=function(){var e;let t=r.useContext(J),n=he(le.UseRouteError),i=de(le.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const ie=r.createElement(re,null);class se extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ae(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(K);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function oe(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}let o=e,c=null==(s=n)?void 0:s.errors;if(null!=c){let e=o.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let l=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){l=!0,o=h>=0?o.slice(0,h+1):[o[0]];break}}}return o.reduceRight(((e,i,s)=>{let a,u=!1,d=null,f=null;var p;n&&(a=c&&i.route.id?c[i.route.id]:void 0,d=i.route.errorElement||ie,l&&(h<0&&0===s?(p="route-fallback",!1||fe[p]||(fe[p]=!0),u=!0,f=null):h===s&&(u=!0,f=i.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=a?d:u?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(ae,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(se,{location:n.location,revalidation:n.revalidation,component:d,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ue(e){let t=r.useContext(K);return t||u(!1),t}function he(e){let t=r.useContext(G);return t||u(!1),t}function de(e){let t=function(e){let t=r.useContext(Y);return t||u(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const fe={};i.startTransition;function pe(e){u(!1)}function me(e){let{basename:n="/",children:i=null,location:s,navigationType:a=t.Pop,navigator:o,static:c=!1,future:l}=e;X()&&u(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:o,static:c,future:H({v7_relativeSplatPath:!1},l)})),[h,l,o,c]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:y="default"}=s,w=r.useMemo((()=>{let e=P(f,h);return null==e?null:{location:{pathname:e,search:p,hash:g,state:v,key:y},navigationType:a}}),[h,f,p,g,v,y,a]);return null==w?null:r.createElement(W.Provider,{value:d},r.createElement(Q.Provider,{children:i,value:w}))}function ge(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise((()=>{}));r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==pe&&u(!1),e.props.index&&e.props.children&&u(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ve(e.props.children,s)),n.push(a)})),n}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}function we(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const be=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(oA){}new Map;const _e=i.startTransition;o.flushSync,i.useId;function Ie(e){let{basename:t,children:n,future:i,window:s}=e,a=r.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),g((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=m(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:p(t))}),(function(e,t){h("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),o)));let c=a.current,[l,u]=r.useState({action:c.action,location:c.location}),{v7_startTransition:d}=i||{},v=r.useCallback((e=>{d&&_e?_e((()=>u(e))):u(e)}),[u,d]);return r.useLayoutEffect((()=>c.listen(v)),[c,v]),r.createElement(me,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c,future:i})}const ke="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Te=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ee=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:a,replace:o,state:c,target:l,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=we(e,be),{basename:g}=r.useContext(W),v=!1;if("string"===typeof h&&Te.test(h)&&(n=h,ke))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=P(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(oA){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;X()||u(!1);let{basename:i,navigator:s}=r.useContext(W),{hash:a,pathname:o,search:c}=te(e,{relative:n}),l=o;return"/"!==i&&(l="/"===o?i:U([i,o])),s.createHref({pathname:l,search:c,hash:a})}(h,{relative:s}),w=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:c}=void 0===t?{}:t,l=ee(),u=$(),h=te(e,{relative:o});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(u)===p(h);l(e,{replace:n,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:c})}}),[u,l,h,i,s,n,e,a,o,c])}(h,{replace:o,state:c,target:l,preventScrollReset:d,relative:s,unstable_viewTransition:f});return r.createElement("a",ye({},m,{href:n||y,onClick:v||a?i:function(e){i&&i(e),e.defaultPrevented||w(e)},ref:t,target:l}))}));var Se,Ce;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Se||(Se={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ce||(Ce={}));const xe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,c=o?e[i+2]:0,l=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|c>>6,d=63&c;o||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Ne;const c=t<<2|s>>4;if(r.push(c),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ne extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Re=function(e){return function(e){const t=xe(e);return Ae.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Pe=function(e){try{return Ae.decodeString(e,!0)}catch(oA){console.error("base64Decode failed: ",oA)}return null};function Oe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Oe(e[n],t[n]));return e}const De=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Le=()=>{try{return De()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyD0Oo4mvrnSRI17nZrApjsKxVPsctmTBtw",REACT_APP_AUTH_DOMAIN:"nwitter-17a21.firebaseapp.com",REACT_APP_PROJECT_ID:"nwitter-17a21",REACT_APP_STORAGE_BUCKET:"nwitter-17a21.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"16609093550",REACT_APP_APP_ID:"1:16609093550:web:cfdc110ea696f0be7d8a3f"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(oA){return}const t=e&&Pe(e[1]);return t&&JSON.parse(t)})()}catch(oA){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(oA))}},Me=()=>{var e;return null===(e=Le())||void 0===e?void 0:e.config},Ue=e=>{var t;return null===(t=Le())||void 0===t?void 0:t["_".concat(e)]};class Fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ve(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Re(JSON.stringify({alg:"none",type:"JWT"})),Re(JSON.stringify(s)),""].join(".")}function je(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ze(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function Be(){var e;const t=null===(e=Le())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(oA){return!1}}function qe(){return"object"===typeof self&&self.self===self}function He(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ke(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ge(){const e=je();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function We(){return!Be()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){try{return"object"===typeof indexedDB}catch(oA){return!1}}class Ye extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Xe,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Ye(n,s,t)}}const Xe=/\{\$([^}]+)}/g;function $e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ze(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(et(n)&&et(s)){if(!Ze(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function et(e){return null!==e&&"object"===typeof e}function tt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function nt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function rt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function it(e,t){const n=new st(e,t);return n.subscribe.bind(n)}class st{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=at),void 0===r.error&&(r.error=at),void 0===r.complete&&(r.complete=at);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(oA){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(oA){"undefined"!==typeof console&&console.error&&console.error(oA)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function at(){}function ot(e){return e&&e._delegate?e._delegate:e}class ct{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const lt="[DEFAULT]";class ut{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Fe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(oA){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(oA){if(r)return null;throw oA}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:lt})}catch(oA){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(oA){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===lt?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt;return this.component?this.component.multipleInstances?e:lt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ht{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ut(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const dt=[];var ft;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ft||(ft={}));const pt={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},mt=ft.INFO,gt={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},vt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=gt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class yt{constructor(e){this.name=e,this._logLevel=mt,this._logHandler=vt,this._userLogHandler=null,dt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?pt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...t),this._logHandler(this,ft.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...t),this._logHandler(this,ft.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ft.INFO,...t),this._logHandler(this,ft.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ft.WARN,...t),this._logHandler(this,ft.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...t),this._logHandler(this,ft.ERROR,...t)}}const wt=(e,t)=>t.some((t=>e instanceof t));let bt,_t;const It=new WeakMap,kt=new WeakMap,Tt=new WeakMap,Et=new WeakMap,St=new WeakMap;let Ct={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return kt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Tt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function xt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_t||(_t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Rt(this),n),Nt(It.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Nt(e.apply(Rt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Rt(this),t,...r);return Tt.set(s,t.sort?t.sort():[t]),Nt(s)}}function At(e){return"function"===typeof e?xt(e):(e instanceof IDBTransaction&&function(e){if(kt.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));kt.set(e,t)}(e),wt(e,bt||(bt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ct):e)}function Nt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Nt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&It.set(t,e)})).catch((()=>{})),St.set(t,e),t}(e);if(Et.has(e))return Et.get(e);const t=At(e);return t!==e&&(Et.set(e,t),St.set(t,e)),t}const Rt=e=>St.get(e);const Pt=["get","getKey","getAll","getAllKeys","count"],Ot=["put","add","delete","clear"],Dt=new Map;function Lt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Dt.get(t))return Dt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ot.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Pt.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return Dt.set(t,s),s}Ct=(e=>({...e,get:(t,n,r)=>Lt(t,n)||e.get(t,n,r),has:(t,n)=>!!Lt(t,n)||e.has(t,n)}))(Ct);class Mt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ut="@firebase/app",Ft="0.10.4",Vt=new yt("@firebase/app"),jt="@firebase/app-compat",zt="@firebase/analytics-compat",Bt="@firebase/analytics",qt="@firebase/app-check-compat",Ht="@firebase/app-check",Kt="@firebase/auth",Gt="@firebase/auth-compat",Wt="@firebase/database",Qt="@firebase/database-compat",Yt="@firebase/functions",Jt="@firebase/functions-compat",Xt="@firebase/installations",$t="@firebase/installations-compat",Zt="@firebase/messaging",en="@firebase/messaging-compat",tn="@firebase/performance",nn="@firebase/performance-compat",rn="@firebase/remote-config",sn="@firebase/remote-config-compat",an="@firebase/storage",on="@firebase/storage-compat",cn="@firebase/firestore",ln="@firebase/vertexai-preview",un="@firebase/firestore-compat",hn="firebase",dn="[DEFAULT]",fn={[Ut]:"fire-core",[jt]:"fire-core-compat",[Bt]:"fire-analytics",[zt]:"fire-analytics-compat",[Ht]:"fire-app-check",[qt]:"fire-app-check-compat",[Kt]:"fire-auth",[Gt]:"fire-auth-compat",[Wt]:"fire-rtdb",[Qt]:"fire-rtdb-compat",[Yt]:"fire-fn",[Jt]:"fire-fn-compat",[Xt]:"fire-iid",[$t]:"fire-iid-compat",[Zt]:"fire-fcm",[en]:"fire-fcm-compat",[tn]:"fire-perf",[nn]:"fire-perf-compat",[rn]:"fire-rc",[sn]:"fire-rc-compat",[an]:"fire-gcs",[on]:"fire-gcs-compat",[cn]:"fire-fst",[un]:"fire-fst-compat",[ln]:"fire-vertex","fire-js":"fire-js",[hn]:"fire-js-all"},pn=new Map,mn=new Map,gn=new Map;function vn(e,t){try{e.container.addComponent(t)}catch(oA){Vt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),oA)}}function yn(e,t){e.container.addOrOverwriteComponent(t)}function wn(e){const t=e.name;if(gn.has(t))return Vt.debug("There were multiple attempts to register component ".concat(t,".")),!1;gn.set(t,e);for(const n of pn.values())vn(n,e);for(const n of mn.values())vn(n,e);return!0}function bn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _n(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dn;bn(e,t).clearInstance(n)}function In(e){return void 0!==e.options}function kn(e){return void 0!==e.settings}function Tn(){gn.clear()}const En=new Je("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Sn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ct("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}class Cn extends Sn{constructor(e,t,n,r){const i=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,s,r);else{super(e.options,s,r)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Dn(Ut,Ft,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){On(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw En.create("server-app-deleted")}}const xn="10.12.1";function An(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:dn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw En.create("bad-app-name",{appName:String(i)});if(n||(n=Me()),!n)throw En.create("no-options");const s=pn.get(i);if(s){if(Ze(n,s.options)&&Ze(r,s.config))return s;throw En.create("duplicate-app",{appName:i})}const a=new ht(i);for(const c of gn.values())a.addComponent(c);const o=new Sn(n,r,a);return pn.set(i,o),o}function Nn(e,t){if(qe())throw En.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=In(e)?e.options:e;const r=Object.assign(Object.assign({},t),n);void 0!==r.releaseOnDeref&&delete r.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw En.create("finalization-registry-not-supported",{});const i=""+(s=JSON.stringify(r),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const a=mn.get(i);if(a)return a.incRefCount(t.releaseOnDeref),a;const o=new ht(i);for(const l of gn.values())o.addComponent(l);const c=new Cn(n,t,i,o);return mn.set(i,c),c}function Rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn;const t=pn.get(e);if(!t&&e===dn&&Me())return An();if(!t)throw En.create("no-app",{appName:e});return t}function Pn(){return Array.from(pn.values())}async function On(e){let t=!1;const n=e.name;if(pn.has(n))t=!0,pn.delete(n);else if(mn.has(n)){e.decRefCount()<=0&&(mn.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Dn(e,t,n){var r;let i=null!==(r=fn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Vt.warn(e.join(" "))}wn(new ct("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Ln(e,t){if(null!==e&&"function"!==typeof e)throw En.create("invalid-log-argument");!function(e,t){for(const n of dt){let r=null;t&&t.level&&(r=pt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];const o=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:ft[n].toLowerCase(),message:o,args:s,type:t.name})}}}(e,t)}function Mn(e){var t;t=e,dt.forEach((e=>{e.setLogLevel(t)}))}const Un="firebase-heartbeat-database",Fn=1,Vn="firebase-heartbeat-store";let jn=null;function zn(){return jn||(jn=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=Nt(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Nt(a.result),e.oldVersion,e.newVersion,Nt(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}(Un,Fn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Vn)}catch(oA){console.warn(oA)}}}).catch((e=>{throw En.create("idb-open",{originalErrorMessage:e.message})}))),jn}async function Bn(e,t){try{const n=(await zn()).transaction(Vn,"readwrite"),r=n.objectStore(Vn);await r.put(t,qn(e)),await n.done}catch(oA){if(oA instanceof Ye)Vt.warn(oA.message);else{const t=En.create("idb-set",{originalErrorMessage:null===oA||void 0===oA?void 0:oA.message});Vt.warn(t.message)}}}function qn(e){return"".concat(e.name,"!").concat(e.options.appId)}class Hn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Gn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Kn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Kn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Wn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Re(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Kn(){return(new Date).toISOString().substring(0,10)}class Gn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Qe()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await zn()).transaction(Vn),n=await t.objectStore(Vn).get(qn(e));return await t.done,n}catch(oA){if(oA instanceof Ye)Vt.warn(oA.message);else{const t=En.create("idb-get",{originalErrorMessage:null===oA||void 0===oA?void 0:oA.message});Vt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Bn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Bn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Wn(e){return Re(JSON.stringify({version:2,heartbeats:e})).length}var Qn;Qn="",wn(new ct("platform-logger",(e=>new Mt(e)),"PRIVATE")),wn(new ct("heartbeat",(e=>new Hn(e)),"PRIVATE")),Dn(Ut,Ft,Qn),Dn(Ut,Ft,"esm2017"),Dn("fire-js","");class Yn{constructor(e,t){this._delegate=e,this.firebase=t,vn(e,new ct("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),On(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){vn(this._delegate,e)}_addOrOverwriteComponent(e){yn(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Jn=new Je("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Xn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=An(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if($e(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Dn,setLogLevel:Mn,onLog:Ln,apps:null,SDK_VERSION:xn,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(wn(e)&&"PUBLIC"===e.type){const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw Jn.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Oe(a,e.serviceProps),r[s]=a,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!$e(n,e=e||dn))throw Jn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Yn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Oe(n,e)},createSubscribe:it,ErrorFactory:Je,deepExtend:Oe}),n}(),$n=new yt("@firebase/app-compat");if(qe()&&void 0!==self.firebase){$n.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&$n.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Zn=Xn;!function(e){Dn("@firebase/app-compat","0.2.34",e)}();Zn.registerVersion("firebase","10.12.1","app-compat");function er(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const tr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},nr="EMAIL_SIGNIN",rr="PASSWORD_RESET",ir="RECOVER_EMAIL",sr="REVERT_SECOND_FACTOR_ADDITION",ar="VERIFY_AND_CHANGE_EMAIL",or="VERIFY_EMAIL";function cr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lr=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ur=cr,hr=new Je("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),dr=new yt("@firebase/auth");function fr(e){if(dr.logLevel<=ft.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dr.error("Auth (".concat(xn,"): ").concat(e),...n)}}function pr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw wr(e,...n)}function mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return wr(e,...n)}function gr(e,t,n){const r=Object.assign(Object.assign({},ur()),{[t]:n});return new Je("auth","Firebase",r).create(t,{appName:e.name})}function vr(e){return gr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&pr(e,"argument-error"),gr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function wr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return hr.create(e,...n)}function br(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw wr(t,...r)}}function _r(e){const t="INTERNAL ASSERTION FAILED: "+e;throw fr(t),new Error(t)}function Ir(e,t){e||_r(t)}function kr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Tr(){return"http:"===Er()||"https:"===Er()}function Er(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Sr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ir(t>e,"Short delay should be less than long delay!"),this.isMobile=ze()||Ke()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Tr()||He()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Cr(e,t){Ir(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class xr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void _r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void _r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void _r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ar={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Nr=new Sr(3e4,6e4);function Rr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Pr(e,t,n,r){return Or(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=tt(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),xr.fetch()(Lr(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))}))}async function Or(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ar),t);try{const t=new Ur(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Fr(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Fr(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Fr(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Fr(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw gr(e,o,a);pr(e,o)}}catch(oA){if(oA instanceof Ye)throw oA;pr(e,"network-request-failed",{message:String(oA)})}}async function Dr(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Pr(e,t,n,r,i);return"mfaPendingCredential"in s&&pr(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Lr(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Cr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Mr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ur{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(mr(this.auth,"network-request-failed"))),Nr.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mr(e,t,r);return i.customData._tokenResponse=n,i}function Vr(e){return void 0!==e&&void 0!==e.getResponse}function jr(e){return void 0!==e&&void 0!==e.enterprise}class zr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Mr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Br(e,t){return Pr(e,"GET","/v2/recaptchaConfig",Rr(e,t))}async function qr(e,t){return Pr(e,"POST","/v1/accounts:lookup",t)}function Hr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(oA){}}function Kr(e){return 1e3*Number(e)}function Gr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return fr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Pe(n);return e?JSON.parse(e):(fr("Failed to decode base64 JWT payload"),null)}catch(oA){return fr("Caught error parsing JWT payload as JSON",null===oA||void 0===oA?void 0:oA.toString()),null}}function Wr(e){const t=Gr(e);return br(t,"internal-error"),br("undefined"!==typeof t.exp,"internal-error"),br("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Qr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(oA){throw oA instanceof Ye&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(oA)&&e.auth.currentUser===e&&await e.auth.signOut(),oA}}class Yr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(oA){return void((null===oA||void 0===oA?void 0:oA.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Jr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hr(this.lastLoginAt),this.creationTime=Hr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Qr(e,qr(n,{idToken:r}));br(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?$r(s.providerUserInfo):[],o=(c=e.providerData,l=a,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Jr(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function $r(e){return e.map((e=>{var{providerId:t}=e,n=er(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Zr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){br(e.idToken,"internal-error"),br("undefined"!==typeof e.idToken,"internal-error"),br("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Wr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){br(0!==e.length,"internal-error");const t=Wr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(br(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Or(e,{},(async()=>{const n=tt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Lr(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xr.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Zr;return n&&(br("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(br("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(br("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zr,this.toJSON())}_performRefresh(){return _r("not implemented")}}function ei(e,t){br("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ti{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=er(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Jr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Qr(this,this.stsTokenManager.getToken(this.auth,e));return br(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ot(e),r=await n.getIdToken(t),i=Gr(r);br(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Hr(Kr(i.auth_time)),issuedAtTime:Hr(Kr(i.iat)),expirationTime:Hr(Kr(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ot(e);await Xr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(br(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ti(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){br(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(vr(this.auth));const e=await this.getIdToken();return await Qr(this,async function(e,t){return Pr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;br(y&&I,e,"internal-error");const k=Zr.fromJSON(this.name,I);br("string"===typeof y,e,"internal-error"),ei(u,e.name),ei(h,e.name),br("boolean"===typeof w,e,"internal-error"),br("boolean"===typeof b,e,"internal-error"),ei(d,e.name),ei(f,e.name),ei(p,e.name),ei(m,e.name),ei(g,e.name),ei(v,e.name);const T=new ti({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Zr;r.updateFromServerResponse(t);const i=new ti({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Xr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];br(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?$r(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Zr;a.updateFromIdToken(n);const o=new ti({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Jr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,c),o}}const ni=new Map;function ri(e){Ir(e instanceof Function,"Expected a class definition");let t=ni.get(e);return t?(Ir(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ni.set(e,t),t)}class ii{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ii.type="NONE";const si=ii;function ai(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class oi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=ai(this.userKey,r.apiKey,i),this.fullPersistenceKey=ai("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new oi(ri(si),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ri(si);const s=ai(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(s);if(t){const n=ti._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(c){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new oi(i,e,n)):new oi(i,e,n)}}function ci(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(di(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(li(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pi(t))return"Blackberry";if(mi(t))return"Webos";if(ui(t))return"Safari";if((t.includes("chrome/")||hi(t))&&!t.includes("edge/"))return"Chrome";if(fi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function li(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/firefox\//i.test(e)}function ui(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:je()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/crios\//i.test(e)}function di(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/iemobile/i.test(e)}function fi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/android/i.test(e)}function pi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/blackberry/i.test(e)}function mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/webos/i.test(e)}function gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return gi(e)||fi(e)||mi(e)||pi(e)||/windows phone/i.test(e)||di(e)}function yi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ci(je());break;case"Worker":t="".concat(ci(je()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xn,"/").concat(r)}class wi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(oA){r(oA)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(oA){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===oA||void 0===oA?void 0:oA.message})}}}class bi{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class _i{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ki(this),this.idTokenSubscription=new ki(this),this.beforeStateQueue=new wi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ri(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await oi.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(oA){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await qr(this,{idToken:e}),n=await ti._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(kn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(oA){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(oA)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return br(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(oA){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xr(e)}catch(oA){if((null===oA||void 0===oA?void 0:oA.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(vr(this));const t=e?ot(e):null;return t&&br(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&br(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return kn(this.app)?Promise.reject(vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(vr(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ri(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Pr(e,"GET","/v2/passwordPolicy",Rr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new bi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Je("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Pr(e,"POST","/v2/accounts:revokeToken",Rr(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ri(e)||this._popupRedirectResolver;br(t,this,"argument-error"),this.redirectPersistenceManager=await oi.create(this,[ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(br(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return br(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(dr.logLevel<=ft.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];dr.warn("Auth (".concat(xn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ii(e){return ot(e)}class ki{constructor(e){this.auth=e,this.observer=null,this.addObserver=it((e=>this.observer=e))}get next(){return br(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ti={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ei(e){return Ti.loadJS(e)}function Si(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ci{constructor(e){this.type="recaptcha-enterprise",this.auth=Ii(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;jr(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Br(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new zr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&jr(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ti.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ei(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function xi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Ci(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ai(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await xi(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await xi(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Ni(e,t,n){const r=Ii(e);br(r._canInitEmulator,r,"emulator-config-failed"),br(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Ri(t),{host:a,port:o}=function(e){const t=Ri(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Pi(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Pi(t)}}}(t),c=null===o?"":":".concat(o);r.config.emulator={url:"".concat(s,"//").concat(a).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ri(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Pi(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Oi{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,t){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}}async function Di(e,t){return Pr(e,"POST","/v1/accounts:resetPassword",Rr(e,t))}async function Li(e,t){return Pr(e,"POST","/v1/accounts:signUp",t)}async function Mi(e,t){return Dr(e,"POST","/v1/accounts:signInWithPassword",Rr(e,t))}async function Ui(e,t){return Pr(e,"POST","/v1/accounts:sendOobCode",Rr(e,t))}async function Fi(e,t){return Ui(e,t)}async function Vi(e,t){return Ui(e,t)}class ji extends Oi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ji(e,t,"password")}static _fromEmailAndCode(e,t){return new ji(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ai(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Mi);case"emailLink":return async function(e,t){return Dr(e,"POST","/v1/accounts:signInWithEmailLink",Rr(e,t))}(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ai(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Li);case"emailLink":return async function(e,t){return Dr(e,"POST","/v1/accounts:signInWithEmailLink",Rr(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function zi(e,t){return Dr(e,"POST","/v1/accounts:signInWithIdp",Rr(e,t))}class Bi extends Oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=er(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Bi(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return zi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,zi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zi(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tt(t)}return e}}const qi={USER_NOT_FOUND:"user-not-found"};class Hi extends Oi{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Hi({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Hi({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Dr(e,"POST","/v1/accounts:signInWithPhoneNumber",Rr(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Dr(e,"POST","/v1/accounts:signInWithPhoneNumber",Rr(e,t));if(n.temporaryProof)throw Fr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Dr(e,"POST","/v1/accounts:signInWithPhoneNumber",Rr(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),qi)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Hi({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ki{constructor(e){var t,n,r,i,s,a;const o=nt(rt(e)),c=null!==(t=o.apiKey)&&void 0!==t?t:null,l=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);br(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=nt(rt(e)).link,n=t?nt(rt(t)).deep_link_id:null,r=nt(rt(e)).deep_link_id;return(r?nt(rt(r)).link:null)||r||n||t||e}(e);try{return new Ki(t)}catch(n){return null}}}class Gi{constructor(){this.providerId=Gi.PROVIDER_ID}static credential(e,t){return ji._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ki.parseLink(t);return br(n,"argument-error"),ji._fromEmailAndCode(e,n.code,n.tenantId)}}Gi.PROVIDER_ID="password",Gi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Gi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Wi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qi extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Yi extends Qi{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return br("providerId"in t&&"signInMethod"in t,"argument-error"),Bi._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return br(e.idToken||e.accessToken,"argument-error"),Bi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Yi.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Yi.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=t;if(!r&&!i&&!n&&!s)return null;if(!o)return null;try{return new Yi(o)._credential({idToken:n,accessToken:r,nonce:a,pendingToken:s})}catch(oA){return null}}}class Ji extends Qi{constructor(){super("facebook.com")}static credential(e){return Bi._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ji.credential(t.oauthAccessToken)}catch(n){return null}}}Ji.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ji.PROVIDER_ID="facebook.com";class Xi extends Qi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bi._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Xi.credential(n,r)}catch(i){return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com",Xi.PROVIDER_ID="google.com";class $i extends Qi{constructor(){super("github.com")}static credential(e){return Bi._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $i.credential(t.oauthAccessToken)}catch(n){return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com",$i.PROVIDER_ID="github.com";class Zi extends Oi{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return zi(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,zi(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,zi(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Zi(n,i):null}static _create(e,t){return new Zi(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class es extends Wi{constructor(e){br(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return es.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return es.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Zi.fromJSON(e);return br(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Zi._create(r,n)}catch(oA){return null}}}class ts extends Qi{constructor(){super("twitter.com")}static credential(e,t){return Bi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ts.credential(n,r)}catch(i){return null}}}async function ns(e,t){return Dr(e,"POST","/v1/accounts:signUp",Rr(e,t))}ts.TWITTER_SIGN_IN_METHOD="twitter.com",ts.PROVIDER_ID="twitter.com";class rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ti._fromIdTokenResponse(e,n,r),s=is(n);return new rs({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=is(n);return new rs({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function is(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ss extends Ye{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ss.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ss(e,t,n,r)}}function as(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw ss._fromErrorAndOperation(e,n,t,r);throw n}))}function os(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function cs(e,t){const n=ot(e);await us(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Pr(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=os(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ls(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Qr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return rs._forOperation(e,"link",r)}async function us(e,t,n){await Xr(t);const r=!1===e?"provider-already-linked":"no-such-provider";br(os(t.providerData).has(n)===e,t.auth,r)}async function hs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(kn(r.app))return Promise.reject(vr(r));const i="reauthenticate";try{const s=await Qr(e,as(r,i,t,e),n);br(s.idToken,r,"internal-error");const a=Gr(s.idToken);br(a,r,"internal-error");const{sub:o}=a;return br(e.uid===o,r,"user-mismatch"),rs._forOperation(e,i,s)}catch(oA){throw(null===oA||void 0===oA?void 0:oA.code)==="auth/".concat("user-not-found")&&pr(r,"user-mismatch"),oA}}async function ds(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(kn(e.app))return Promise.reject(vr(e));const r="signIn",i=await as(e,r,t),s=await rs._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function fs(e,t){return ds(Ii(e),t)}async function ps(e,t){const n=ot(e);return await us(!1,n,t.providerId),ls(n,t)}async function ms(e,t){return hs(ot(e),t)}async function gs(e,t){if(kn(e.app))return Promise.reject(vr(e));const n=Ii(e),r=await async function(e,t){return Dr(e,"POST","/v1/accounts:signInWithCustomToken",Rr(e,t))}(n,{token:t,returnSecureToken:!0}),i=await rs._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class vs{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ys._fromServerResponse(e,t):"totpInfo"in t?ws._fromServerResponse(e,t):pr(e,"internal-error")}}class ys extends vs{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ys(t)}}class ws extends vs{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new ws(t)}}function bs(e,t,n){var r;br((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),br("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(br(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(br(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function _s(e){const t=Ii(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Is(e,t){await async function(e,t){return Pr(e,"POST","/v1/accounts:update",Rr(e,t))}(ot(e),{oobCode:t})}async function ks(e,t){const n=ot(e),r=await Di(n,{oobCode:t}),i=r.requestType;switch(br(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":br(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":br(r.mfaInfo,n,"internal-error");default:br(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=vs._fromServerResponse(Ii(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Ts(e,t){const n={identifier:t,continueUri:Tr()?kr():"http://localhost"},{signinMethods:r}=await async function(e,t){return Pr(e,"POST","/v1/accounts:createAuthUri",Rr(e,t))}(ot(e),n);return r||[]}async function Es(e,t){const n=ot(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&bs(n.auth,r,t);const{email:i}=await async function(e,t){return Ui(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Ss(e,t,n){const r=ot(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&bs(r.auth,i,n);const{email:s}=await async function(e,t){return Ui(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Cs(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=ot(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Qr(i,async function(e,t){return Pr(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const o=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}async function xs(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Qr(e,async function(e,t){return Pr(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class As{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Ns extends As{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Rs extends As{constructor(e,t){super(e,"facebook.com",t)}}class Ps extends Ns{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Os extends As{constructor(e,t){super(e,"google.com",t)}}class Ds extends Ns{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ls(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Gr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new As(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Rs(s,i);case"github.com":return new Ps(s,i);case"google.com":return new Os(s,i);case"twitter.com":return new Ds(s,i,e.screenName||null);case"custom":case"anonymous":return new As(s,null);default:return new As(s,r,i)}}(n)}class Ms{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Ms("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ms("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Ms._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Ms._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Us{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ii(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>vs._fromServerResponse(n,e)));br(r.mfaPendingCredential,n,"internal-error");const s=Ms._fromMfaPendingCredential(r.mfaPendingCredential);return new Us(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const a=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await rs._fromIdTokenResponse(n,t.operationType,a);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return br(t.user,n,"internal-error"),rs._forOperation(t.user,t.operationType,a);default:pr(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Fs{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>vs._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Fs(e)}async getSession(){return Ms._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Qr(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Qr(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},Pr(r,"POST","/v2/accounts/mfaEnrollment:withdraw",Rr(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(oA){throw oA}var r,i}}const Vs=new WeakMap;const js="__sak";class zs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(js,"1"),this.storage.removeItem(js),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Bs extends zs{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=je();return ui(e)||gi(e)}()&&function(){try{return!(!window||window===window.top)}catch(oA){return!1}}(),this.fallbackToPolling=vi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ge()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bs.type="LOCAL";const qs=Bs;class Hs extends zs{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hs.type="SESSION";const Ks=Hs;class Gs{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Gs(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ws(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Gs.receivers=[];class Qs{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const c=Ws("",20);r.port1.start();const l=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(l),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Ys(){return window}function Js(){return"undefined"!==typeof Ys().WorkerGlobalScope&&"function"===typeof Ys().importScripts}const Xs="firebaseLocalStorageDb",$s="firebaseLocalStorage",Zs="fbase_key";class ea{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ta(e,t){return e.transaction([$s],t?"readwrite":"readonly").objectStore($s)}function na(){const e=indexedDB.open(Xs,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore($s,{keyPath:Zs})}catch(oA){n(oA)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains($s)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Xs);return new ea(e).toPromise()}(),t(await na()))}))}))}async function ra(e,t,n){const r=ta(e,!0).put({[Zs]:t,value:n});return new ea(r).toPromise()}function ia(e,t){const n=ta(e,!0).delete(t);return new ea(n).toPromise()}class sa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await na()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(oA){if(t++>3)throw oA;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Js()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gs._getInstance(Js()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Qs(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await na();return await ra(e,js,"1"),await ia(e,js),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>ra(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ta(e,!1).get(t),r=await new ea(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>ia(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ta(e,!1).getAll();return new ea(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}sa.type="LOCAL";const aa=sa;const oa=1e12;class ca{constructor(e){this.auth=e,this.counter=oa,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new la(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||oa;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||oa;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||oa;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class la{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;br(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(oA){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(oA){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ua=Si("rcb"),ha=new Sr(3e4,6e4);class da{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Ys().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return br(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Vr(Ys().grecaptcha)?Promise.resolve(Ys().grecaptcha):new Promise(((n,r)=>{const i=Ys().setTimeout((()=>{r(mr(e,"network-request-failed"))}),ha.get());Ys()[ua]=()=>{Ys().clearTimeout(i),delete Ys()[ua];const s=Ys().grecaptcha;if(!s||!Vr(s))return void r(mr(e,"internal-error"));const a=s.render;s.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Ei("".concat(Ti.recaptchaV2Script,"?").concat(tt({onload:ua,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(mr(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Ys().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fa{async load(e){return new ca(e)}clearedOneInstance(){}}const pa="recaptcha",ma={theme:"light",type:"image"};class ga{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},ma);this.parameters=n,this.type=pa,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ii(e),this.isInvisible="invisible"===this.parameters.size,br("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;br(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fa:new da,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(oA){return Promise.reject(oA)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){br(!this.parameters.sitekey,this.auth,"argument-error"),br(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),br("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Ys()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){br(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){br(Tr()&&!Js(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Pr(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);br(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return br(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class va{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Hi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ya(e,t,n){var r;const i=await n.verify();try{let s;if(br("string"===typeof i,e,"argument-error"),br(n.type===pa,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){br("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Pr(e,"POST","/v2/accounts/mfaEnrollment:start",Rr(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{br("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;br(n,e,"missing-multi-factor-info");const a=await function(e,t){return Pr(e,"POST","/v2/accounts/mfaSignIn:start",Rr(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Pr(e,"POST","/v1/accounts:sendVerificationCode",Rr(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class wa{constructor(e){this.providerId=wa.PROVIDER_ID,this.auth=Ii(e)}verifyPhoneNumber(e,t){return ya(this.auth,e,ot(t))}static credential(e,t){return Hi._fromVerification(e,t)}static credentialFromResult(e){const t=e;return wa.credentialFromTaggedObject(t)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Hi._fromTokenResponse(n,r):null}}function ba(e,t){return t?ri(t):(br(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wa.PROVIDER_ID="phone",wa.PHONE_SIGN_IN_METHOD="phone";class _a extends Oi{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zi(e,this._buildIdpRequest())}_linkToIdToken(e,t){return zi(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ia(e){return ds(e.auth,new _a(e),e.bypassAuthState)}function ka(e){const{auth:t,user:n}=e;return br(n,t,"internal-error"),hs(n,new _a(e),e.bypassAuthState)}async function Ta(e){const{auth:t,user:n}=e;return br(n,t,"internal-error"),ls(n,new _a(e),e.bypassAuthState)}class Ea{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(oA){this.reject(oA)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(oA){this.reject(oA)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ia;case"linkViaPopup":case"linkViaRedirect":return Ta;case"reauthViaPopup":case"reauthViaRedirect":return ka;default:pr(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sa=new Sr(2e3,1e4);class Ca extends Ea{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ca.currentPopupAction&&Ca.currentPopupAction.cancel(),Ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return br(e,this.auth,"internal-error"),e}async onExecution(){Ir(1===this.filter.length,"Popup operations only handle one event");const e=Ws();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(mr(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Sa.get())};e()}}Ca.currentPopupAction=null;const xa="pendingRedirect",Aa=new Map;class Na extends Ea{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Aa.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Da(t),r=Oa(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(oA){e=()=>Promise.reject(oA)}Aa.set(this.auth._key(),e)}return this.bypassAuthState||Aa.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Ra(e,t){return Oa(e)._set(Da(t),"true")}function Pa(e,t){Aa.set(e._key(),t)}function Oa(e){return ri(e._redirectPersistence)}function Da(e){return ai(xa,e.config.apiKey,e.name)}function La(e,t,n){return async function(e,t,n){if(kn(e.app))return Promise.reject(vr(e));const r=Ii(e);yr(e,t,Wi),await r._initializationPromise;const i=ba(r,n);return await Ra(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Ma(e,t,n){return async function(e,t,n){const r=ot(e);if(yr(r.auth,t,Wi),kn(r.auth.app))return Promise.reject(vr(r.auth));await r.auth._initializationPromise;const i=ba(r.auth,n);await Ra(i,r.auth);const s=await Va(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Ua(e,t,n){return async function(e,t,n){const r=ot(e);yr(r.auth,t,Wi),await r.auth._initializationPromise;const i=ba(r.auth,n);await us(!1,r,t.providerId),await Ra(i,r.auth);const s=await Va(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Fa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(kn(e.app))return Promise.reject(vr(e));const r=Ii(e),i=ba(r,t),s=new Na(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}async function Va(e){const t=Ws("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class ja{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ba(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ba(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(mr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(za(e))}saveEventToCache(e){this.cachedEventUids.add(za(e)),this.lastProcessedEventTime=Date.now()}}function za(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Ba(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function qa(e){return Pr(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Ha=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ka=/^https?/;function Ga(e){const t=kr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ka.test(n))return!1;if(Ha.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Wa=new Sr(3e4,6e4);function Qa(){const e=Ys().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ya(e){return new Promise(((t,n)=>{var r,i,s;function a(){Qa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qa(),n(mr(e,"network-request-failed"))},timeout:Wa.get()})}if(null===(i=null===(r=Ys().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ys().gapi)||void 0===s?void 0:s.load)){const t=Si("iframefcb");return Ys()[t]=()=>{gapi.load?a():n(mr(e,"network-request-failed"))},Ei("".concat(Ti.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}a()}})).catch((e=>{throw Ja=null,e}))}let Ja=null;const Xa=new Sr(5e3,15e3),$a="__/auth/iframe",Za="emulator/auth/iframe",eo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},to=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function no(e){const t=e.config;br(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Cr(t,Za):"https://".concat(e.config.authDomain,"/").concat($a),r={apiKey:t.apiKey,appName:e.name,v:xn},i=to.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(tt(r).slice(1))}async function ro(e){const t=await function(e){return Ja=Ja||Ya(e),Ja}(e),n=Ys().gapi;return br(n,e,"internal-error"),t.open({where:document.body,url:no(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eo,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=mr(e,"network-request-failed"),s=Ys().setTimeout((()=>{r(i)}),Xa.get());function a(){Ys().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}const io={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class so{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(oA){}}}function ao(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},io),{width:r.toString(),height:i.toString(),top:s,left:a}),l=je().toLowerCase();n&&(o=hi(l)?"_blank":n),li(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return gi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:je())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new so(null);const h=window.open(t||"",o,u);br(h,e,"popup-blocked");try{h.focus()}catch(oA){}return new so(h)}const oo="__/auth/handler",co="emulator/auth/handler",lo=encodeURIComponent("fac");async function uo(e,t,n,r,i,s){br(e.config.authDomain,e,"auth-domain-config-required"),br(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xn,eventId:i};if(t instanceof Wi){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof Qi){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const c=await e._getAppCheckToken(),l=c?"#".concat(lo,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(oo);return Cr(t,co)}(e),"?").concat(tt(o).slice(1)).concat(l)}const ho="webStorageSupport";const fo=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ks,this._completeRedirectFn=Fa,this._overrideRedirectResult=Pa}async _openPopup(e,t,n,r){var i;Ir(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ao(e,await uo(e,t,n,kr(),r),Ws())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ys().location.href=e}(await uo(e,t,n,kr(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ir(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ro(e),n=new ja(e);return t.register("authEvent",(t=>{br(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ho,{type:ho},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ho];void 0!==i&&t(!!i),pr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await qa(e);for(const r of t)try{if(Ga(r))return}catch(n){}pr(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vi()||ui()||gi()}};class po{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _r("unexpected MultiFactorSessionType")}}}class mo extends po{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new mo(e)}_finalizeEnroll(e,t,n){return function(e,t){return Pr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Rr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Pr(e,"POST","/v2/accounts/mfaSignIn:finalize",Rr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class go{constructor(){}static assertion(e){return mo._fromCredential(e)}}go.FACTOR_ID="phone";var vo="@firebase/auth",yo="1.7.3";class wo{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){br(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Ue("authIdTokenMaxAge");var bo;function _o(){return window}!function(e){Ti=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=mr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),bo="Browser",wn(new ct("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;br(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:bo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yi(bo)},l=new _i(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ri);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),wn(new ct("auth-internal",(e=>(e=>new wo(e))(Ii(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(vo,yo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(bo)),Dn(vo,yo,"esm2017");async function Io(e,t,n){var r;const{BuildInfo:i}=_o();Ir(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(Ir(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),a={};return gi()?a.ibi=i.packageName:fi()?a.apn=i.packageName:pr(e,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,uo(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,a)}function ko(e){const{cordova:t}=_o();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const To=20;class Eo extends ja{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function So(e){const t=await Ao()._get(No(e));return t&&await Ao()._remove(No(e)),t}function Co(e,t){var n,r;const i=function(e){const t=Ro(e),n=t.link?decodeURIComponent(t.link):void 0,r=Ro(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ro(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Ro(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(oA){return null}}(decodeURIComponent(t.firebaseError)):null,a=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],o=a?mr(a):null;return o?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:o,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function xo(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<To;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Ao(){return ri(qs)}function No(e){return ai("authEvent",e.config.apiKey,e.name)}function Ro(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return nt(n.join("?"))}const Po=class{constructor(){this._redirectPersistence=Ks,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fa,this._overrideRedirectResult=Pa}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Eo(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){pr(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,a,o,c,l,u;const h=_o();br("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),br("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),br("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),br("function"===typeof(null===(c=null===(o=null===(a=null===h||void 0===h?void 0:h.cordova)||void 0===a?void 0:a.plugins)||void 0===o?void 0:o.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),br("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Aa.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:xo(),postBody:null,tenantId:e.tenantId,error:mr(e,"no-auth-event")}}(e,n,r);await function(e,t){return Ao()._set(No(e),t)}(e,s);const a=await Io(e,s,t);return async function(e,t,n){const{cordova:r}=_o();let i=()=>{};try{await new Promise(((s,a)=>{let o=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){o||(o=window.setTimeout((()=>{a(mr(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),fi()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),o&&window.clearTimeout(o)}}))}finally{i()}}(e,i,await ko(a))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=_o(),n={};gi()?n.iosBundleId=t.packageName:fi()?n.androidPackageName=t.packageName:pr(e,"operation-not-supported-in-this-environment"),await qa(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=_o(),s=setTimeout((async()=>{await So(e),t.onEvent(Oo())}),500),a=async n=>{clearTimeout(s);const r=await So(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Co(r,n.url)),t.onEvent(i||Oo())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,a);const o=r,c="".concat(i.packageName.toLowerCase(),"://");_o().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&a({url:e}),"function"===typeof o)try{o(e)}catch(oA){console.error(oA)}}}};function Oo(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mr("no-auth-event")}}function Do(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Lo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return!("file:"!==Do()&&"ionic:"!==Do()&&"capacitor:"!==Do()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Mo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return Ge()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/Edge\/\d+/.test(e)}(e)}function Uo(){try{const e=self.localStorage,t=Ws();if(e)return e.setItem(t,"1"),e.removeItem(t),!Mo()||Qe()}catch(oA){return Fo()&&Qe()}return!1}function Fo(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Vo(){return("http:"===Do()||"https:"===Do()||He()||Lo())&&!(Ke()||Be())&&Uo()&&!Fo()}function jo(){return Lo()&&"undefined"!==typeof document}const zo={LOCAL:"local",NONE:"none",SESSION:"session"},Bo=br,qo="persistence";async function Ho(e){await e._initializationPromise;const t=Ko(),n=ai(qo,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Ko(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(oA){return null}}const Go=br;class Wo{constructor(){this.browserResolver=ri(fo),this.cordovaResolver=ri(Po),this.underlyingResolver=null,this._redirectPersistence=Ks,this._completeRedirectFn=Fa,this._overrideRedirectResult=Pa}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return jo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Go(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!jo()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Qo(e){return e.unwrap()}function Yo(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Zo(e,function(e,t){var n;const r=ot(e),i=t;return br(t.customData.operationType,r,"argument-error"),br(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Us._fromError(r,i)}(e,t))}else if(r){const e=Jo(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Jo(e){const{_tokenResponse:t}=e instanceof Ye?e.customData:e;if(!t)return null;if(!(e instanceof Ye)&&"temporaryProof"in t&&"phoneNumber"in t)return wa.credentialFromResult(e);const n=t.providerId;if(!n||n===tr.PASSWORD)return null;let r;switch(n){case tr.GOOGLE:r=Xi;break;case tr.FACEBOOK:r=Ji;break;case tr.GITHUB:r=$i;break;case tr.TWITTER:r=ts;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:a,nonce:o}=t;return i||s||e||a?a?n.startsWith("saml.")?Zi._create(n,a):Bi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:i}):new Yi(n).credential({idToken:e,accessToken:i,rawNonce:o}):null}return e instanceof Ye?r.credentialFromError(e):r.credentialFromResult(e)}function Xo(e,t){return t.catch((t=>{throw t instanceof Ye&&Yo(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Jo(r)),additionalUserInfo:Ls(e),user:ec.getOrCreate(n)};var r}))}async function $o(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Xo(e,n.confirm(t))}}class Zo{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Xo(Qo(this.auth),this.resolver.resolveSignIn(e))}}class ec{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=ot(e);return Vs.has(t)||Vs.set(t,Fs._fromUser(t)),Vs.get(t)}(e)}static getOrCreate(e){return ec.USER_MAP.has(e)||ec.USER_MAP.set(e,new ec(e)),ec.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Xo(this.auth,ps(this._delegate,e))}async linkWithPhoneNumber(e,t){return $o(this.auth,async function(e,t,n){const r=ot(e);await us(!1,r,"phone");const i=await ya(r.auth,t,ot(n));return new va(i,(e=>ps(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Xo(this.auth,async function(e,t,n){const r=ot(e);yr(r.auth,t,Wi);const i=ba(r.auth,n);return new Ca(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Wo))}async linkWithRedirect(e){return await Ho(Ii(this.auth)),Ua(this._delegate,e,Wo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Xo(this.auth,ms(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return $o(this.auth,async function(e,t,n){const r=ot(e);if(kn(r.auth.app))return Promise.reject(vr(r.auth));const i=await ya(r.auth,t,ot(n));return new va(i,(e=>ms(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Xo(this.auth,async function(e,t,n){const r=ot(e);if(kn(r.auth.app))return Promise.reject(mr(r.auth,"operation-not-supported-in-this-environment"));yr(r.auth,t,Wi);const i=ba(r.auth,n);return new Ca(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Wo))}async reauthenticateWithRedirect(e){return await Ho(Ii(this.auth)),Ma(this._delegate,e,Wo)}sendEmailVerification(e){return Es(this._delegate,e)}async unlink(e){return await cs(this._delegate,e),this}updateEmail(e){return function(e,t){const n=ot(e);return kn(n.auth.app)?Promise.reject(vr(n.auth)):xs(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return xs(ot(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=ot(e);if(kn(n.auth.app))return Promise.reject(vr(n.auth));await ls(n,t)}(this._delegate,e)}updateProfile(e){return Cs(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Ss(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ec.USER_MAP=new WeakMap;const tc=br;class nc{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;tc(n,"invalid-api-key",{appName:e.name}),tc(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Wo:void 0;this._delegate=t.initialize({options:{persistence:ic(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(lr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ec.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Ni(this._delegate,e,t)}applyActionCode(e){return Is(this._delegate,e)}checkActionCode(e){return ks(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Di(ot(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_s(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Xo(this._delegate,async function(e,t,n){if(kn(e.app))return Promise.reject(vr(e));const r=Ii(e),i=Ai(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ns),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_s(e),t})),a=await rs._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Ts(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Ki.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){tc(Vo(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Ii(e)._initializationPromise,Fa(e,t,!1)}(this._delegate,Wo);return e?Xo(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Ii(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=rc(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=rc(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Ii(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){br(t.handleCodeInApp,r,"argument-error"),t&&bs(r,e,t)}(i,n),await Ai(r,i,"getOobCode",Vi)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Ii(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&bs(r,i,n),await Ai(r,i,"getOobCode",Fi)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Bo(Object.values(zo).includes(t),e,"invalid-persistence-type"),Ke()?Bo(t!==zo.SESSION,e,"unsupported-persistence-type"):Be()?Bo(t===zo.NONE,e,"unsupported-persistence-type"):Fo()?Bo(t===zo.NONE||t===zo.LOCAL&&Qe(),e,"unsupported-persistence-type"):Bo(t===zo.NONE||Uo(),e,"unsupported-persistence-type")}(this._delegate,e),e){case zo.SESSION:t=Ks;break;case zo.LOCAL:t=await ri(aa)._isAvailable()?aa:qs;break;case zo.NONE:t=si;break;default:return pr("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Xo(this._delegate,async function(e){var t;if(kn(e.app))return Promise.reject(vr(e));const n=Ii(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new rs({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ns(n,{returnSecureToken:!0}),i=await rs._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Xo(this._delegate,fs(this._delegate,e))}signInWithCustomToken(e){return Xo(this._delegate,gs(this._delegate,e))}signInWithEmailAndPassword(e,t){return Xo(this._delegate,function(e,t,n){return kn(e.app)?Promise.reject(vr(e)):fs(ot(e),Gi.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&_s(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Xo(this._delegate,async function(e,t,n){if(kn(e.app))return Promise.reject(vr(e));const r=ot(e),i=Gi.credentialWithLink(t,n||kr());return br(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),fs(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return $o(this._delegate,async function(e,t,n){if(kn(e.app))return Promise.reject(vr(e));const r=Ii(e),i=await ya(r,t,ot(n));return new va(i,(e=>fs(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return tc(Vo(),this._delegate,"operation-not-supported-in-this-environment"),Xo(this._delegate,async function(e,t,n){if(kn(e.app))return Promise.reject(mr(e,"operation-not-supported-in-this-environment"));const r=Ii(e);yr(e,t,Wi);const i=ba(r,n);return new Ca(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Wo))}async signInWithRedirect(e){return tc(Vo(),this._delegate,"operation-not-supported-in-this-environment"),await Ho(this._delegate),La(this._delegate,e,Wo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await ks(ot(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function rc(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&ec.getOrCreate(e)),error:t,complete:n}}function ic(e,t){const n=function(e,t){const n=Ko();if(!n)return[];const r=ai(qo,e,t);switch(n.getItem(r)){case zo.NONE:return[si];case zo.LOCAL:return[aa,Ks];case zo.SESSION:return[Ks];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(aa)||n.push(aa),"undefined"!==typeof window)for(const r of[qs,Ks])n.includes(r)||n.push(r);return n.includes(si)||n.push(si),n}nc.Persistence=zo;class sc{constructor(){this.providerId="phone",this._delegate=new wa(Qo(Zn.auth()))}static credential(e,t){return wa.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}sc.PHONE_SIGN_IN_METHOD=wa.PHONE_SIGN_IN_METHOD,sc.PROVIDER_ID=wa.PROVIDER_ID;const ac=br;class oc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zn.app();var r;ac(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new ga(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var cc;(cc=Zn).INTERNAL.registerComponent(new ct("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new nc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:nr,PASSWORD_RESET:rr,RECOVER_EMAIL:ir,REVERT_SECOND_FACTOR_ADDITION:sr,VERIFY_AND_CHANGE_EMAIL:ar,VERIFY_EMAIL:or}},EmailAuthProvider:Gi,FacebookAuthProvider:Ji,GithubAuthProvider:$i,GoogleAuthProvider:Xi,OAuthProvider:Yi,SAMLAuthProvider:es,PhoneAuthProvider:sc,PhoneMultiFactorGenerator:go,RecaptchaVerifier:oc,TwitterAuthProvider:ts,Auth:nc,AuthCredential:Oi,Error:Ye}).setInstantiationMode("LAZY").setMultipleInstances(!1)),cc.registerVersion("@firebase/auth-compat","0.5.8");var lc,uc,hc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},dc={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),c=s(1),l=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(c)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=c,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var l=s.add(r);0>=l.l(e)&&(i=i.add(n),s=l),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),l=(s=a(n)).j(t);h(l)||0<l.l(e);)l=(s=a(n-=r)).j(t);u(s)&&(s=c),i=i.add(s),e=f(e,l)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(l)&&0>e.l(l))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var c=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=c*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=c*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,uc=dc.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),i=o,s=0;s<t.length;s+=8){var c=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+c),n);8>c?(c=a(Math.pow(n,c)),i=i.j(c).add(a(l))):i=(i=i.j(r)).add(a(l))}return i},lc=dc.Integer=r}).apply("undefined"!==typeof hc?hc:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var fc,pc,mc,gc,vc,yc,wc,bc,_c,Ic="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},kc={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ic&&Ic];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function l(e,t,n){return(l=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:c).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function I(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){i.setTimeout((()=>{throw e}),0)}function T(){var e=A;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new S),(e=>e.reset()));class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,x=!1,A=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(R)}};var R=()=>{for(var e;e=T();){try{e.h.call(e.g)}catch(n){k(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}x=!1};function P(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:M[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}h(L,O);var M={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),F=0;function V(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function j(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(j(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=q(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new V(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),K={};function G(e,t,n,r,i){if(r&&r.once)return Q(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[U]?e.K(t,n,a(r)?!!r.capture:!!r,i):W(e,t,n,!1,r,i)}function W(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,c=Z(e);if(c||(e[H]=c=new z(e)),(n=c.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);return null}return n=te(n),e&&e[U]?e.L(t,n,a(r)?!!r.capture:!!r,i):W(e,t,n,!0,r,i)}function Y(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Y(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[U]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(j(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&J(n))}function J(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[U])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):j(e)}}}function X(e){return e in K?K[e]:K[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&J(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;_(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=ie(a,r,!0,t)&&i}if(i=ie(a=t.g=e,r,!0,t)&&i,i=ie(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(a=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,c=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==o.call(c,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=l(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ae(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,ae(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,P),ne.prototype[U]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)j(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(e){P.call(this),this.h=e,this.g={}}h(ce,P);var le=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&J(e)}),e),e.g={}}ce.prototype.N=function(){ce.aa.N.call(this),ue(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){O.call(this,"d")}function we(){O.call(this,"c")}h(ye,O),h(we,O);var be={},_e=null;function Ie(){return _e=_e||new ne}function ke(e){O.call(this,be.La,e)}function Te(e){const t=Ie();re(t,new ke(t))}function Ee(e,t){O.call(this,be.STAT_EVENT,e),this.stat=t}function Se(e){const t=Ie();re(t,new Ee(t,e))}function Ce(e,t){O.call(this,be.Ma,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Ae(){this.g=!0}function Ne(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return he(n)}catch(o){return t}}(e,n)+(r?" "+r:"")}))}be.La="serverreachability",h(ke,O),be.STAT_EVENT="statevent",h(Ee,O),be.Ma="timingevent",h(Ce,O),Ae.prototype.xa=function(){this.g=!1},Ae.prototype.info=function(){};var Re,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Re=new De;var Ue={},Fe={};function Ve(e,t,n){e.L=1,e.v=ht(at(t)),e.m=n,e.P=!0,je(e,null)}function je(e,t){e.F=Date.now(),qe(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Et(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(l(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(le[0]=i.toString()),i=le);for(var s=0;s<i.length;s++){var a=G(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Te(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var a="",o=s.split("&"),c=0;c<o.length;c++){var l=o[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+l+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Ue:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=xe(l(e.ba,e),t)}function Ke(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function Ge(e){0==e.j.G||e.J||cn(e.j,e)}function We(e){Ke(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Jt(n)}rn(n),Se(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=xe(l(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.T=l[0],l=l[1],2==n.G)if("c"==l[0]){n.K=l[1],n.ia=l[2];const t=l[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=l[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,c=r.L;c&&(o.I=c),o.B&&(Ke(o),qe(o)),r.g=a}else nn(r);0<n.i.length&&$t(n)}else"stop"!=l[0]&&"close"!=l[0]||un(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?un(n,7):Yt(n):"noop"!=l[0]&&n.l&&n.l.ta(l),n.v=0)}Te()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Kt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Kt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Gt(this.g)))){this.J||4!=d||7==t||Te(),Ke(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Gt(this.g);e="";var s=r.length,a=4==Kt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){We(this),Ge(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(c)){var u=c;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),We(this),Ge(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Be(this,o),e==Fe){4==d&&(this.s=4,Se(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ue){this.s=4,Se(15),Ne(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(h),h.M=!0,Se(11))}}else Ne(this.i,this.l,o,"[Invalid Chunked Response]"),We(this),Ge(this)}else Ne(this.i,this.l,o,null),Qe(this,o);4==d&&We(this),this.o&&!this.J&&(4==d?cn(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Kt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=I(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),We(this),Ge(this)}}}catch(xS){}},Le.prototype.cancel=function(){this.J=!0,We(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Te(),Se(17)),We(this),this.s=2,Ge(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Je(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}Je.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,ct(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),lt(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,ot(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),ct(this,t[4]),this.l=dt(t[5]||"",!0),lt(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ct(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function lt(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(It(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),Et(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new _t(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function It(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kt(e,t){It(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return It(e),t=St(e,t),e.g.has(t)}function Et(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),d(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ct(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function xt(){this.g=new fe}function At(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;a(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(oA){throw t.push(r+"type="+encodeURIComponent("_badmap")),oA}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Mt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Ut(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){It(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){It(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){It(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){It(this);let t=[];if("string"===typeof e)Tt(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return It(this),this.i=null,Tt(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,pe),Nt.prototype.g=function(){return new Rt(this.l,this.j)},Nt.prototype.i=(mt={},function(){return mt}),h(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Dt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Ut,ne);var Ft=/^https?$/i,Vt=["POST","PUT"];function jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Kt(e)||2!=e.Z()))if(e.u&&4==Kt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Kt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(it)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Ft.test(a?a.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Kt(e)?e.g.statusText:""}catch(c){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){Ht(e);const n=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{n.onreadystatechange=r}catch(oA){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Kt(e){return e.g?e.g.readyState:0}function Gt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Sc){return null}}function Wt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wt("baseRetryDelayMs",5e3,e),this.cb=Wt("retryDelaySeedMs",1e4,e),this.Wa=Wt("forwardChannelMaxRetries",2,e),this.wa=Wt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Je(e&&e.concurrentRequestLimit),this.Da=new xt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Xt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ht(at(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(pS){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Jt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){Jt(e),e.u&&(i.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function $t(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||N(),x||(C(),x=!0),A.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Mt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ve(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?l(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{At(o,e,"req"+n+"_")}catch(xS){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||N(),x||(C(),x=!0),A.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=xe(l(e.Fa,e),ln(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Mt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(at(t)),n.m=null,n.P=!0,je(n,e)}function on(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function cn(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=Ie(),new Ce(r,n)),$t(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=xe(l(e.Ga,e,t),ln(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function ln(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ot(r,"https"),ht(r),t?function(e,t){const n=new Ae;if(i.Image){const r=new Image;r.onload=u(Ct,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Ct,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Ct,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Ct,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout((()=>{n.abort(),Ct(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Ct(0,0,!0,t):Ct(0,0,!1,t)})).catch((()=>{clearTimeout(r),Ct(0,0,!1,t)}))}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),hn(e),Xt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?at(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ct(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);r&&ot(a,r),t&&(a.g=t),s&&ct(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Ut(new Nt({eb:n})):new Ut(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Ut.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?me(this.o):me(Re),this.g.onreadystatechange=l(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void jt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Vt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){jt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Ut.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&Mt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ve(i,n,null)):Ve(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=xe(l(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Jt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Jt(this),rn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&$t(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},h(vn,ye),h(yn,we),h(wn,pn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new vn(e))},wn.prototype.sa=function(e){re(this.g,new yn)},wn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,_c=kc.createWebChannelTransport=function(){return new mn},bc=kc.getStatEventTarget=function(){return Ie()},wc=kc.Event=be,yc=kc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,vc=kc.ErrorCode=Pe,Oe.COMPLETE="complete",gc=kc.EventType=Oe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,mc=kc.WebChannel=ge,pc=kc.FetchXmlHttpFactory=Nt,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,fc=kc.XhrIo=Ut}).apply("undefined"!==typeof Ic?Ic:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Tc="@firebase/firestore";class Ec{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ec.UNAUTHENTICATED=new Ec(null),Ec.GOOGLE_CREDENTIALS=new Ec("google-credentials-uid"),Ec.FIRST_PARTY=new Ec("first-party-uid"),Ec.MOCK_USER=new Ec("mock-user");let Sc="10.12.1";const Cc=new yt("@firebase/firestore");function xc(){return Cc.logLevel}function Ac(e){if(Cc.logLevel<=ft.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Pc);Cc.debug("Firestore (".concat(Sc,"): ").concat(e),...i)}}function Nc(e){if(Cc.logLevel<=ft.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Pc);Cc.error("Firestore (".concat(Sc,"): ").concat(e),...i)}}function Rc(e){if(Cc.logLevel<=ft.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Pc);Cc.warn("Firestore (".concat(Sc,"): ").concat(e),...i)}}function Pc(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Oc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Sc,") INTERNAL ASSERTION FAILED: ")+e;throw Nc(t),new Error(t)}function Dc(e,t){e||Oc()}function Lc(e,t){return e}const Mc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Uc extends Ye{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Fc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class jc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ec.UNAUTHENTICATED)))}shutdown(){}}class zc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Bc{constructor(e){this.t=e,this.currentUser=Ec.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Fc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fc,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{Ac("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Ac("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fc)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ac("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Dc("string"==typeof t.accessToken),new Vc(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dc(null===e||"string"==typeof e),new Ec(e)}}class qc{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ec.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hc{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new qc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ec.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Kc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gc{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ac("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ac("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ac("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ac("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Dc("string"==typeof e.token),this.R=e.token,new Kc(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Wc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Qc{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Wc(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Yc(e,t){return e<t?-1:e>t?1:0}function Jc(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Xc(e){return e+"\0"}class $c{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Uc(Mc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Uc(Mc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Uc(Mc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Uc(Mc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $c.fromMillis(Date.now())}static fromDate(e){return $c.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new $c(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yc(this.nanoseconds,e.nanoseconds):Yc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zc{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zc(e)}static min(){return new Zc(new $c(0,0))}static max(){return new Zc(new $c(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class el{constructor(e,t,n){void 0===t?t=0:t>e.length&&Oc(),void 0===n?n=e.length-t:n>e.length-t&&Oc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===el.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof el?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tl extends el{construct(e,t,n){return new tl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Uc(Mc.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new tl(e)}static emptyPath(){return new tl([])}}const nl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rl extends el{construct(e,t,n){return new rl(e,t,n)}static isValidIdentifier(e){return nl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Uc(Mc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Uc(Mc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Uc(Mc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Uc(Mc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rl(t)}static emptyPath(){return new rl([])}}class il{constructor(e){this.path=e}static fromPath(e){return new il(tl.fromString(e))}static fromName(e){return new il(tl.fromString(e).popFirst(5))}static empty(){return new il(tl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new il(new tl(e.slice()))}}class sl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function al(e){return e.fields.find((e=>2===e.kind))}function ol(e){return e.fields.filter((e=>2!==e.kind))}sl.UNKNOWN_ID=-1;class cl{constructor(e,t){this.fieldPath=e,this.kind=t}}class ll{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ll(0,dl.min())}}function ul(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zc.fromTimestamp(1e9===r?new $c(n+1,0):new $c(n,r));return new dl(i,il.empty(),t)}function hl(e){return new dl(e.readTime,e.key,-1)}class dl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new dl(Zc.min(),il.empty(),-1)}static max(){return new dl(Zc.max(),il.empty(),-1)}}function fl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=il.comparator(e.documentKey,t.documentKey),0!==n?n:Yc(e.largestBatchId,t.largestBatchId))}const pl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ml{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function gl(e){if(e.code!==Mc.FAILED_PRECONDITION||e.message!==pl)throw e;Ac("LocalStore","Unexpectedly lost primary lease")}class vl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new vl(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof vl?t:vl.resolve(t)}catch(e){return vl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):vl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):vl.reject(t)}static resolve(e){return new vl(((t,n)=>{t(e)}))}static reject(e){return new vl(((t,n)=>{n(e)}))}static waitFor(e){return new vl(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=vl.resolve(!1);for(const n of e)t=t.next((e=>e?vl.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new vl(((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const c=o;t(e[c]).next((e=>{s[c]=e,++a,a===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new vl(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class yl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Fc,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Il(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Cl(t.target.error);this.V.reject(new Il(e,n))}}static open(e,t,n,r){try{return new yl(t,e.transaction(r,n))}catch(e){throw new Il(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ac("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Tl(t)}}class wl{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===wl.S(je())&&Nc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ac("SimpleDb","Removing database:",e),El(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Qe())return!1;if(wl.C())return!0;const e=je(),t=wl.S(e),n=0<t&&t<10,r=bl(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Ac("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Il(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Uc(Mc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Uc(Mc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Il(e,r))},r.onupgradeneeded=e=>{Ac("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.O(t,r.transaction,e.oldVersion,this.version).next((()=>{Ac("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=yl.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),vl.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ac("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function bl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class _l{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return El(this.B.delete())}}class Il extends Uc{constructor(e,t){super(Mc.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function kl(e){return"IndexedDbTransactionError"===e.name}class Tl{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ac("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ac("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),El(n)}add(e){return Ac("SimpleDb","ADD",this.store.name,e,e),El(this.store.add(e))}get(e){return El(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ac("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ac("SimpleDb","DELETE",this.store.name,e),El(this.store.delete(e))}count(){return Ac("SimpleDb","COUNT",this.store.name),El(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new vl(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.W(e,((e,n)=>{t.push(n)})).next((()=>t))}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new vl(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}j(e,t){Ac("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,((e,t,n)=>n.delete()))}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new vl(((n,r)=>{t.onerror=e=>{const t=Cl(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}W(e,t){const n=[];return new vl(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new _l(i),a=t(i.primaryKey,i.value,s);if(a instanceof vl){const e=a.catch((e=>(s.done(),vl.reject(e))));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}})).next((()=>vl.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function El(e){return new vl(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Cl(e.target.error);n(t)}}))}let Sl=!1;function Cl(e){const t=wl.S(je());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Uc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Sl||(Sl=!0,setTimeout((()=>{throw e}),0)),e}}return e}class xl{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){Ac("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ac("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){kl(e)?Ac("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await gl(e)}await this.X(6e4)}))}}class Al{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.te(t,e)))}te(e,t){const n=new Set;let r=t,i=!0;return vl.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Ac("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.re(r,n))).next((n=>(Ac("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}re(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=hl(t);fl(r,n)>0&&(n=r)})),new dl(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Nl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Rl(e){return null==e}function Pl(e){return 0===e&&1/e==-1/0}function Ol(e){return"number"==typeof e&&Number.isInteger(e)&&!Pl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Dl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ml(t)),t=Ll(e.get(n),t);return Ml(t)}function Ll(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Ml(e){return e+"\x01\x01"}function Ul(e){const t=e.length;if(Dc(t>=2),2===t)return Dc("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),tl.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Oc(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let a;0===i.length?a=n:(i+=n,a=i,i=""),r.push(a);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Oc()}s=t+2}return new tl(r)}Nl.oe=-1;const Fl=["userId","batchId"];function Vl(e,t){return[e,Dl(t)]}function jl(e,t,n){return[e,Dl(t),n]}const zl={},Bl=["prefixPath","collectionGroup","readTime","documentId"],ql=["prefixPath","collectionGroup","documentId"],Hl=["collectionGroup","readTime","prefixPath","documentId"],Kl=["canonicalId","targetId"],Gl=["targetId","path"],Wl=["path","targetId"],Ql=["collectionId","parent"],Yl=["indexId","uid"],Jl=["uid","sequenceNumber"],Xl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$l=["indexId","uid","orderedDocumentKey"],Zl=["userId","collectionPath","documentId"],eu=["userId","collectionPath","largestBatchId"],tu=["userId","collectionGroup","largestBatchId"],nu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ru=[...nu,"documentOverlays"],iu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],su=iu,au=[...su,"indexConfiguration","indexState","indexEntries"],ou=au;class cu extends ml{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function lu(e,t){const n=Lc(e);return wl.F(n._e,t)}function uu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function du(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class fu{constructor(e,t){this.comparator=e,this.root=t||mu.EMPTY}insert(e,t){return new fu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mu.BLACK,null,null))}remove(e){return new fu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pu(this.root,e,this.comparator,!0)}}class pu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:mu.RED,this.left=null!=r?r:mu.EMPTY,this.right=null!=i?i:mu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new mu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return mu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oc();if(this.right.isRed())throw Oc();const e=this.left.check();if(e!==this.right.check())throw Oc();return e+(this.isRed()?0:1)}}mu.EMPTY=null,mu.RED=!0,mu.BLACK=!1,mu.EMPTY=new class{constructor(){this.size=0}get key(){throw Oc()}get value(){throw Oc()}get color(){throw Oc()}get left(){throw Oc()}get right(){throw Oc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new mu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gu{constructor(e){this.comparator=e,this.data=new fu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vu(this.data.getIterator())}getIteratorFrom(e){return new vu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof gu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new gu(this.comparator);return t.data=e,t}}class vu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yu(e){return e.hasNext()?e.getNext():void 0}class wu{constructor(e){this.fields=e,e.sort(rl.comparator)}static empty(){return new wu([])}unionWith(e){let t=new gu(rl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new wu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jc(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class bu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _u{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new bu("Invalid base64 string: "+e):e}}(e);return new _u(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new _u(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_u.EMPTY_BYTE_STRING=new _u("");const Iu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ku(e){if(Dc(!!e),"string"==typeof e){let t=0;const n=Iu.exec(e);if(Dc(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Tu(e.seconds),nanos:Tu(e.nanos)}}function Tu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Eu(e){return"string"==typeof e?_u.fromBase64String(e):_u.fromUint8Array(e)}function Su(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Cu(e){const t=e.mapValue.fields.__previous_value__;return Su(t)?Cu(t):t}function xu(e){const t=ku(e.mapValue.fields.__local_write_time__.timestampValue);return new $c(t.seconds,t.nanos)}class Au{constructor(e,t,n,r,i,s,a,o,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=c}}class Nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nu&&e.projectId===this.projectId&&e.database===this.database}}const Ru={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pu={nullValue:"NULL_VALUE"};function Ou(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Su(e)?4:Wu(e)?9007199254740991:10:Oc()}function Du(e,t){if(e===t)return!0;const n=Ou(e);if(n!==Ou(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xu(e).isEqual(xu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ku(e.timestampValue),r=ku(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Eu(e.bytesValue).isEqual(Eu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Tu(e.geoPointValue.latitude)===Tu(t.geoPointValue.latitude)&&Tu(e.geoPointValue.longitude)===Tu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Tu(e.integerValue)===Tu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Tu(e.doubleValue),r=Tu(t.doubleValue);return n===r?Pl(n)===Pl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jc(e.arrayValue.values||[],t.arrayValue.values||[],Du);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(uu(n)!==uu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Du(n[i],r[i])))return!1;return!0}(e,t);default:return Oc()}}function Lu(e,t){return void 0!==(e.values||[]).find((e=>Du(e,t)))}function Mu(e,t){if(e===t)return 0;const n=Ou(e),r=Ou(t);if(n!==r)return Yc(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Yc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Tu(e.integerValue||e.doubleValue),r=Tu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Uu(e.timestampValue,t.timestampValue);case 4:return Uu(xu(e),xu(t));case 5:return Yc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Eu(e),r=Eu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Yc(n[i],r[i]);if(0!==e)return e}return Yc(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Yc(Tu(e.latitude),Tu(t.latitude));return 0!==n?n:Yc(Tu(e.longitude),Tu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Mu(n[i],r[i]);if(e)return e}return Yc(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ru.mapValue&&t===Ru.mapValue)return 0;if(e===Ru.mapValue)return 1;if(t===Ru.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Yc(r[a],s[a]);if(0!==e)return e;const t=Mu(n[r[a]],i[s[a]]);if(0!==t)return t}return Yc(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Oc()}}function Uu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Yc(e,t);const n=ku(e),r=ku(t),i=Yc(n.seconds,r.seconds);return 0!==i?i:Yc(n.nanos,r.nanos)}function Fu(e){return Vu(e)}function Vu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ku(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Eu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return il.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Vu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Vu(e.fields[i]));return n+"}"}(e.mapValue):Oc()}function ju(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function zu(e){return!!e&&"integerValue"in e}function Bu(e){return!!e&&"arrayValue"in e}function qu(e){return!!e&&"nullValue"in e}function Hu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ku(e){return!!e&&"mapValue"in e}function Gu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return hu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Gu(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Wu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Qu(e){return"nullValue"in e?Pu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ju(Nu.empty(),il.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Oc()}function Yu(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ju(Nu.empty(),il.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ru:Oc()}function Ju(e,t){const n=Mu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Xu(e,t){const n=Mu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class $u{constructor(e){this.value=e}static empty(){return new $u({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ku(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gu(t)}setAll(e){let t=rl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Gu(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ku(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Du(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ku(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){hu(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new $u(Gu(this.value))}}function Zu(e){const t=[];return hu(e.fields,((e,n)=>{const r=new rl([e]);if(Ku(n)){const e=Zu(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new wu(t)}class eh{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new eh(e,0,Zc.min(),Zc.min(),Zc.min(),$u.empty(),0)}static newFoundDocument(e,t,n,r){return new eh(e,1,t,Zc.min(),n,r,0)}static newNoDocument(e,t){return new eh(e,2,t,Zc.min(),Zc.min(),$u.empty(),0)}static newUnknownDocument(e,t){return new eh(e,3,t,Zc.min(),Zc.min(),$u.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zc.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$u.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$u.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zc.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof eh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new eh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class th{constructor(e,t){this.position=e,this.inclusive=t}}function nh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?il.comparator(il.fromName(a.referenceValue),n.key):Mu(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function rh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Du(e.position[n],t.position[n]))return!1;return!0}class ih{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function sh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ah{}class oh extends ah{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vh(e,t,n):"array-contains"===t?new _h(e,n):"in"===t?new Ih(e,n):"not-in"===t?new kh(e,n):"array-contains-any"===t?new Th(e,n):new oh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new yh(e,n):new wh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Mu(t,this.value)):null!==t&&Ou(this.value)===Ou(t)&&this.matchesComparison(Mu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Oc()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ch extends ah{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new ch(e,t)}matches(e){return lh(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function lh(e){return"and"===e.op}function uh(e){return"or"===e.op}function hh(e){return dh(e)&&lh(e)}function dh(e){for(const t of e.filters)if(t instanceof ch)return!1;return!0}function fh(e){if(e instanceof oh)return e.field.canonicalString()+e.op.toString()+Fu(e.value);if(hh(e))return e.filters.map((e=>fh(e))).join(",");{const t=e.filters.map((e=>fh(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function ph(e,t){return e instanceof oh?function(e,t){return t instanceof oh&&e.op===t.op&&e.field.isEqual(t.field)&&Du(e.value,t.value)}(e,t):e instanceof ch?function(e,t){return t instanceof ch&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ph(n,t.filters[r])),!0)}(e,t):void Oc()}function mh(e,t){const n=e.filters.concat(t);return ch.create(n,e.op)}function gh(e){return e instanceof oh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Fu(e.value))}(e):e instanceof ch?function(e){return e.op.toString()+" {"+e.getFilters().map(gh).join(" ,")+"}"}(e):"Filter"}class vh extends oh{constructor(e,t,n){super(e,t,n),this.key=il.fromName(n.referenceValue)}matches(e){const t=il.comparator(e.key,this.key);return this.matchesComparison(t)}}class yh extends oh{constructor(e,t){super(e,"in",t),this.keys=bh("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class wh extends oh{constructor(e,t){super(e,"not-in",t),this.keys=bh("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>il.fromName(e.referenceValue)))}class _h extends oh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bu(t)&&Lu(t.arrayValue,this.value)}}class Ih extends oh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lu(this.value.arrayValue,t)}}class kh extends oh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Lu(this.value.arrayValue,t)}}class Th extends oh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bu(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Lu(this.value.arrayValue,e)))}}class Eh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function Sh(e){return new Eh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ch(e){const t=Lc(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>fh(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Rl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Fu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Fu(e))).join(",")),t.ue=e}return t.ue}function xh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!sh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ph(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!rh(e.startAt,t.startAt)&&rh(e.endAt,t.endAt)}function Ah(e){return il.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Nh(e,t){return e.filters.filter((e=>e instanceof oh&&e.field.isEqual(t)))}function Rh(e,t,n){let r=Pu,i=!0;for(const s of Nh(e,t)){let e=Pu,t=!0;switch(s.op){case"<":case"<=":e=Qu(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Pu}Ju({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ju({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Ph(e,t,n){let r=Ru,i=!0;for(const s of Nh(e,t)){let e=Ru,t=!0;switch(s.op){case">=":case">":e=Yu(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Ru}Xu({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Xu({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Oh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Dh(e,t,n,r,i,s,a,o){return new Oh(e,t,n,r,i,s,a,o)}function Lh(e){return new Oh(e)}function Mh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Uh(e){return null!==e.collectionGroup}function Fh(e){const t=Lc(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new gu(rl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new ih(r,n))})),e.has(rl.keyField().canonicalString())||t.ce.push(new ih(rl.keyField(),n))}return t.ce}function Vh(e){const t=Lc(e);return t.le||(t.le=jh(t,Fh(e))),t.le}function jh(e,t){if("F"===e.limitType)return Sh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ih(e.field,t)}));const n=e.endAt?new th(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new th(e.startAt.position,e.startAt.inclusive):null;return Sh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function zh(e,t){const n=e.filters.concat([t]);return new Oh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Bh(e,t,n){return new Oh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qh(e,t){return xh(Vh(e),Vh(t))&&e.limitType===t.limitType}function Hh(e){return"".concat(Ch(Vh(e)),"|lt:").concat(e.limitType)}function Kh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>gh(e))).join(", "),"]")),Rl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Fu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Fu(e))).join(",")),"Target(".concat(t,")")}(Vh(e)),"; limitType=").concat(e.limitType,")")}function Gh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):il.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Fh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=nh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Fh(e),t))&&!(e.endAt&&!function(e,t,n){const r=nh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Fh(e),t))}(e,t)}function Wh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qh(e){return(t,n)=>{let r=!1;for(const i of Fh(e)){const e=Yh(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Yh(e,t,n){const r=e.field.isKeyField()?il.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Mu(r,i):Oc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Oc()}}class Jh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){hu(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return du(this.inner)}size(){return this.innerSize}}const Xh=new fu(il.comparator);function $h(){return Xh}const Zh=new fu(il.comparator);function ed(){let e=Zh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function td(e){let t=Zh;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function nd(){return id()}function rd(){return id()}function id(){return new Jh((e=>e.toString()),((e,t)=>e.isEqual(t)))}const sd=new fu(il.comparator),ad=new gu(il.comparator);function od(){let e=ad;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const cd=new gu(Yc);function ld(){return cd}function ud(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pl(t)?"-0":t}}function hd(e){return{integerValue:""+e}}function dd(e,t){return Ol(t)?hd(t):ud(e,t)}class fd{constructor(){this._=void 0}}function pd(e,t,n){return e instanceof vd?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Su(t)&&(t=Cu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof yd?wd(e,t):e instanceof bd?_d(e,t):function(e,t){const n=gd(e,t),r=kd(n)+kd(e.Pe);return zu(n)&&zu(e.Pe)?hd(r):ud(e.serializer,r)}(e,t)}function md(e,t,n){return e instanceof yd?wd(e,t):e instanceof bd?_d(e,t):n}function gd(e,t){return e instanceof Id?function(e){return zu(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class vd extends fd{}class yd extends fd{constructor(e){super(),this.elements=e}}function wd(e,t){const n=Td(t);for(const r of e.elements)n.some((e=>Du(e,r)))||n.push(r);return{arrayValue:{values:n}}}class bd extends fd{constructor(e){super(),this.elements=e}}function _d(e,t){let n=Td(t);for(const r of e.elements)n=n.filter((e=>!Du(e,r)));return{arrayValue:{values:n}}}class Id extends fd{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function kd(e){return Tu(e.integerValue||e.doubleValue)}function Td(e){return Bu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ed{constructor(e,t){this.field=e,this.transform=t}}class Sd{constructor(e,t){this.version=e,this.transformResults=t}}class Cd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cd}static exists(e){return new Cd(void 0,e)}static updateTime(e){return new Cd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ad{}function Nd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new jd(e.key,Cd.none()):new Ld(e.key,e.data,Cd.none());{const n=e.data,r=$u.empty();let i=new gu(rl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Md(e.key,r,new wu(i.toArray()),Cd.none())}}function Rd(e,t,n){e instanceof Ld?function(e,t,n){const r=e.value.clone(),i=Fd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Md?function(e,t,n){if(!xd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Fd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ud(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Pd(e,t,n,r){return e instanceof Ld?function(e,t,n,r){if(!xd(e.precondition,t))return n;const i=e.value.clone(),s=Vd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Md?function(e,t,n,r){if(!xd(e.precondition,t))return n;const i=Vd(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ud(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return xd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Od(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=gd(r.transform,e||null);null!=i&&(null===n&&(n=$u.empty()),n.set(r.field,i))}return n||null}function Dd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Jc(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof yd&&t instanceof yd||e instanceof bd&&t instanceof bd?Jc(e.elements,t.elements,Du):e instanceof Id&&t instanceof Id?Du(e.Pe,t.Pe):e instanceof vd&&t instanceof vd}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ld extends Ad{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Md extends Ad{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ud(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Fd(e,t,n){const r=new Map;Dc(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,md(a,o,n[i]))}return r}function Vd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,pd(e,s,t))}return r}class jd extends Ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zd extends Ad{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=rd();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Nd(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Zc.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),od())}isEqual(e){return this.batchId===e.batchId&&Jc(this.mutations,e.mutations,((e,t)=>Dd(e,t)))&&Jc(this.baseMutations,e.baseMutations,((e,t)=>Dd(e,t)))}}class qd{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Dc(e.mutations.length===n.length);let r=sd;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new qd(e,t,n,r)}}class Hd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Kd{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gd,Wd;function Qd(e){switch(e){default:return Oc();case Mc.CANCELLED:case Mc.UNKNOWN:case Mc.DEADLINE_EXCEEDED:case Mc.RESOURCE_EXHAUSTED:case Mc.INTERNAL:case Mc.UNAVAILABLE:case Mc.UNAUTHENTICATED:return!1;case Mc.INVALID_ARGUMENT:case Mc.NOT_FOUND:case Mc.ALREADY_EXISTS:case Mc.PERMISSION_DENIED:case Mc.FAILED_PRECONDITION:case Mc.ABORTED:case Mc.OUT_OF_RANGE:case Mc.UNIMPLEMENTED:case Mc.DATA_LOSS:return!0}}function Yd(e){if(void 0===e)return Nc("GRPC error has no .code"),Mc.UNKNOWN;switch(e){case Gd.OK:return Mc.OK;case Gd.CANCELLED:return Mc.CANCELLED;case Gd.UNKNOWN:return Mc.UNKNOWN;case Gd.DEADLINE_EXCEEDED:return Mc.DEADLINE_EXCEEDED;case Gd.RESOURCE_EXHAUSTED:return Mc.RESOURCE_EXHAUSTED;case Gd.INTERNAL:return Mc.INTERNAL;case Gd.UNAVAILABLE:return Mc.UNAVAILABLE;case Gd.UNAUTHENTICATED:return Mc.UNAUTHENTICATED;case Gd.INVALID_ARGUMENT:return Mc.INVALID_ARGUMENT;case Gd.NOT_FOUND:return Mc.NOT_FOUND;case Gd.ALREADY_EXISTS:return Mc.ALREADY_EXISTS;case Gd.PERMISSION_DENIED:return Mc.PERMISSION_DENIED;case Gd.FAILED_PRECONDITION:return Mc.FAILED_PRECONDITION;case Gd.ABORTED:return Mc.ABORTED;case Gd.OUT_OF_RANGE:return Mc.OUT_OF_RANGE;case Gd.UNIMPLEMENTED:return Mc.UNIMPLEMENTED;case Gd.DATA_LOSS:return Mc.DATA_LOSS;default:return Oc()}}(Wd=Gd||(Gd={}))[Wd.OK=0]="OK",Wd[Wd.CANCELLED=1]="CANCELLED",Wd[Wd.UNKNOWN=2]="UNKNOWN",Wd[Wd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wd[Wd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wd[Wd.NOT_FOUND=5]="NOT_FOUND",Wd[Wd.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wd[Wd.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wd[Wd.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wd[Wd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wd[Wd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wd[Wd.ABORTED=10]="ABORTED",Wd[Wd.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wd[Wd.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wd[Wd.INTERNAL=13]="INTERNAL",Wd[Wd.UNAVAILABLE=14]="UNAVAILABLE",Wd[Wd.DATA_LOSS=15]="DATA_LOSS";let Jd=null;function Xd(){return new TextEncoder}const $d=new lc([4294967295,4294967295],0);function Zd(e){const t=Xd().encode(e),n=new uc;return n.update(t),new Uint8Array(n.digest())}function ef(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new lc([n,r],0),new lc([i,s],0)]}class tf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new nf("Invalid padding: ".concat(t));if(n<0)throw new nf("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new nf("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new nf("Invalid padding when bitmap length is 0: ".concat(t));this.Ie=8*e.length-t,this.Te=lc.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(lc.fromNumber(n)));return 1===r.compare($d)&&(r=new lc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=Zd(e),[n,r]=ef(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new tf(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Ie)return;const t=Zd(e),[n,r]=ef(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class nf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,sf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new rf(Zc.min(),r,new fu(Yc),$h(),od())}}class sf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new sf(n,t,od(),od(),od())}}class af{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class of{constructor(e,t){this.targetId=e,this.me=t}}class cf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_u.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class lf{constructor(){this.fe=0,this.ge=df(),this.pe=_u.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=od(),t=od(),n=od();return this.ge.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Oc()}})),new sf(this.pe,this.ye,e,t,n)}ve(){this.we=!1,this.ge=df()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Dc(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uf{constructor(e){this.Le=e,this.Be=new Map,this.ke=$h(),this.qe=hf(),this.Qe=new fu(Yc)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:Oc()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((e,n)=>{this.ze(n)&&t(n)}))}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Ah(i))if(0===n){const e=new il(i.path);this.Ue(t,e,eh.newNoDocument(e,Zc.min()))}else Dc(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==Jd||Jd.et(function(e,t,n,r,i){var s,a,o,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(o=null===(a=null==d?void 0:d.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Eu(n).toUint8Array()}catch(e){if(e instanceof bu)return Rc("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new tf(s,r,i)}catch(e){return Rc(e instanceof nf?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Ie?null:a}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.tt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.Ue(t,n,null),r++)})),r}rt(e){const t=new Map;this.Be.forEach(((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Ah(i.target)){const t=new il(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,eh.newNoDocument(t,e))}n.be&&(t.set(r,n.Ce()),n.ve())}}));let n=od();this.qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.ke.forEach(((t,n)=>n.setReadTime(e)));const r=new rf(e,t,this.Qe,this.ke,n);return this.ke=$h(),this.qe=hf(),this.Qe=new fu(Yc),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new lf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new gu(Yc),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ac("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new lf),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function hf(){return new fu(il.comparator)}function df(){return new fu(il.comparator)}const ff={asc:"ASCENDING",desc:"DESCENDING"},pf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mf={and:"AND",or:"OR"};class gf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function vf(e,t){return e.useProto3Json||Rl(t)?t:{value:t}}function yf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function wf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bf(e,t){return yf(e,t.toTimestamp())}function _f(e){return Dc(!!e),Zc.fromTimestamp(function(e){const t=ku(e);return new $c(t.seconds,t.nanos)}(e))}function If(e,t){return kf(e,t).canonicalString()}function kf(e,t){const n=function(e){return new tl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Tf(e){const t=tl.fromString(e);return Dc(Gf(t)),t}function Ef(e,t){return If(e.databaseId,t.path)}function Sf(e,t){const n=Tf(t);if(n.get(1)!==e.databaseId.projectId)throw new Uc(Mc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Uc(Mc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new il(Nf(n))}function Cf(e,t){return If(e.databaseId,t)}function xf(e){const t=Tf(e);return 4===t.length?tl.emptyPath():Nf(t)}function Af(e){return new tl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Nf(e){return Dc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Rf(e,t,n){return{name:Ef(e,t),fields:n.value.mapValue.fields}}function Pf(e,t,n){const r=Sf(e,t.name),i=_f(t.updateTime),s=t.createTime?_f(t.createTime):Zc.min(),a=new $u({mapValue:{fields:t.fields}}),o=eh.newFoundDocument(r,i,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Of(e,t){let n;if(t instanceof Ld)n={update:Rf(e,t.key,t.value)};else if(t instanceof jd)n={delete:Ef(e,t.key)};else if(t instanceof Md)n={update:Rf(e,t.key,t.data),updateMask:Kf(t.fieldMask)};else{if(!(t instanceof zd))return Oc();n={verify:Ef(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof vd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof yd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Id)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw Oc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Oc()}(e,t.precondition)),n}function Df(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Cd.updateTime(_f(e.updateTime)):void 0!==e.exists?Cd.exists(e.exists):Cd.none()}(t.currentDocument):Cd.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Dc("REQUEST_TIME"===t.setToServerValue),n=new vd;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new yd(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new bd(e)}else"increment"in t?n=new Id(e,t.increment):Oc();const r=rl.fromServerFormat(t.fieldPath);return new Ed(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Sf(e,t.update.name),s=new $u({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new wu(t.map((e=>rl.fromServerFormat(e))))}(t.updateMask);return new Md(i,s,e,n,r)}return new Ld(i,s,n,r)}if(t.delete){const r=Sf(e,t.delete);return new jd(r,n)}if(t.verify){const r=Sf(e,t.verify);return new zd(r,n)}return Oc()}function Lf(e,t){return{documents:[Cf(e,t.path)]}}function Mf(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cf(e,i);const s=function(e){if(0!==e.length)return Hf(ch.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Bf(e.field),direction:Vf(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=vf(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Uf(e){let t=xf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Dc(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ff(e);return t instanceof ch&&hh(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new ih(qf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Rl(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new th(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new th(n,t)}(n.endAt)),Dh(t,i,a,s,o,"F",c,l)}function Ff(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qf(e.unaryFilter.field);return oh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qf(e.unaryFilter.field);return oh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=qf(e.unaryFilter.field);return oh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=qf(e.unaryFilter.field);return oh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Oc()}}(e):void 0!==e.fieldFilter?function(e){return oh.create(qf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oc()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ch.create(e.compositeFilter.filters.map((e=>Ff(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Oc()}}(e.compositeFilter.op))}(e):Oc()}function Vf(e){return ff[e]}function jf(e){return pf[e]}function zf(e){return mf[e]}function Bf(e){return{fieldPath:e.canonicalString()}}function qf(e){return rl.fromServerFormat(e.fieldPath)}function Hf(e){return e instanceof oh?function(e){if("=="===e.op){if(Hu(e.value))return{unaryFilter:{field:Bf(e.field),op:"IS_NAN"}};if(qu(e.value))return{unaryFilter:{field:Bf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Hu(e.value))return{unaryFilter:{field:Bf(e.field),op:"IS_NOT_NAN"}};if(qu(e.value))return{unaryFilter:{field:Bf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bf(e.field),op:jf(e.op),value:e.value}}}(e):e instanceof ch?function(e){const t=e.getFilters().map((e=>Hf(e)));return 1===t.length?t[0]:{compositeFilter:{op:zf(e.op),filters:t}}}(e):Oc()}function Kf(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Gf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Wf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zc.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zc.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_u.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new Wf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Qf{constructor(e){this.ct=e}}function Yf(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Jf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ef(e,t.key),fields:t.data.value.mapValue.fields,updateTime:yf(e,t.version.toTimestamp()),createTime:yf(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Xf(t.version)};else{if(!t.isUnknownDocument())return Oc();r.unknownDocument={path:n.path.toArray(),version:Xf(t.version)}}return r}function Jf(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Xf(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function $f(e){const t=new $c(e.seconds,e.nanoseconds);return Zc.fromTimestamp(t)}function Zf(e,t){const n=(t.baseMutations||[]).map((t=>Df(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Df(e.ct,t))),i=$c.fromMillis(t.localWriteTimeMs);return new Bd(t.batchId,i,n,r)}function ep(e){const t=$f(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?$f(e.lastLimboFreeSnapshotVersion):Zc.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Dc(1===e.documents.length),Vh(Lh(xf(e.documents[0])))}(e.query):function(e){return Vh(Uf(e))}(e.query),new Wf(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,_u.fromBase64String(e.resumeToken))}function tp(e,t){const n=Xf(t.snapshotVersion),r=Xf(t.lastLimboFreeSnapshotVersion);let i;i=Ah(t.target)?Lf(e.ct,t.target):Mf(e.ct,t.target)._t;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ch(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function np(e){const t=Uf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bh(t,t.limit,"L"):t}function rp(e,t){return new Hd(t.largestBatchId,Df(e.ct,t.overlayMutation))}function ip(e,t){const n=t.path.lastSegment();return[e,Dl(t.path.popLast()),n]}function sp(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:Xf(r.readTime),documentKey:Dl(r.documentKey.path),largestBatchId:r.largestBatchId}}class ap{getBundleMetadata(e,t){return op(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:$f(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return op(e).put(function(e){return{bundleId:e.id,createTime:Xf(_f(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return cp(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:np(e.bundledQuery),readTime:$f(e.readTime)}}(e)}))}saveNamedQuery(e,t){return cp(e).put(function(e){return{name:e.name,readTime:Xf(_f(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function op(e){return lu(e,"bundles")}function cp(e){return lu(e,"namedQueries")}class lp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new lp(e,n)}getOverlay(e,t){return up(e).get(ip(this.userId,t)).next((e=>e?rp(this.serializer,e):null))}getOverlays(e,t){const n=nd();return vl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new Hd(t,i);r.push(this.ht(e,s))})),vl.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Dl(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(up(e).j("collectionPathOverlayIndex",r))})),vl.waitFor(i)}getOverlaysForCollection(e,t,n){const r=nd(),i=Dl(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return up(e).U("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=rp(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=nd();let s;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return up(e).J({index:"collectionGroupOverlayIndex",range:a},((e,t,n)=>{const a=rp(this.serializer,t);i.size()<r||a.largestBatchId===s?(i.set(a.getKey(),a),s=a.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return up(e).put(function(e,t,n){const[r,i,s]=ip(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Of(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function up(e){return lu(e,"documentOverlays")}class hp{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Tu(e.integerValue));else if("doubleValue"in e){const n=Tu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Pl(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Et(t,20),"string"==typeof n&&(n=ku(n)),t.At("".concat(n.seconds||"")),t.dt(n.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Eu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Wu(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Oc()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),il.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function dp(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function fp(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=dp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}hp.bt=new hp;class pp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=fp(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=fp(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class mp{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class gp{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class vp{constructor(){this.Gt=new pp,this.zt=new mp(this.Gt),this.jt=new gp(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class yp{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new yp(this.indexId,this.documentKey,this.arrayValue,n)}}function wp(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=bp(e.arrayValue,t.arrayValue),0!==n?n:(n=bp(e.directionalValue,t.directionalValue),0!==n?n:il.comparator(e.documentKey,t.documentKey)))}function bp(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class _p{constructor(e){this.Yt=new gu(((e,t)=>rl.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Dc(e.collectionGroup===this.collectionId),this.en)return!1;const t=al(e);if(void 0!==t&&!this.nn(t))return!1;const n=ol(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new gu(rl.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new cl(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new cl(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new cl(n.field,"asc"===n.dir?0:1)));return new sl(sl.UNKNOWN_ID,this.collectionId,t,ll.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ip(e){var t,n;if(Dc(e instanceof oh||e instanceof ch),e instanceof oh){if(e instanceof Ih){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>oh.create(e.field,"==",t))))||[];return ch.create(r,"or")}return e}const r=e.filters.map((e=>Ip(e)));return ch.create(r,e.op)}function kp(e){if(0===e.getFilters().length)return[];const t=Cp(Ip(e));return Dc(Sp(t)),Tp(t)||Ep(t)?[t]:t.getFilters()}function Tp(e){return e instanceof oh}function Ep(e){return e instanceof ch&&hh(e)}function Sp(e){return Tp(e)||Ep(e)||function(e){if(e instanceof ch&&uh(e)){for(const t of e.getFilters())if(!Tp(t)&&!Ep(t))return!1;return!0}return!1}(e)}function Cp(e){if(Dc(e instanceof oh||e instanceof ch),e instanceof oh)return e;if(1===e.filters.length)return Cp(e.filters[0]);const t=e.filters.map((e=>Cp(e)));let n=ch.create(t,e.op);return n=Np(n),Sp(n)?n:(Dc(n instanceof ch),Dc(lh(n)),Dc(n.filters.length>1),n.filters.reduce(((e,t)=>xp(e,t))))}function xp(e,t){let n;return Dc(e instanceof oh||e instanceof ch),Dc(t instanceof oh||t instanceof ch),n=e instanceof oh?t instanceof oh?function(e,t){return ch.create([e,t],"and")}(e,t):Ap(e,t):t instanceof oh?Ap(t,e):function(e,t){if(Dc(e.filters.length>0&&t.filters.length>0),lh(e)&&lh(t))return mh(e,t.getFilters());const n=uh(e)?e:t,r=uh(e)?t:e,i=n.filters.map((e=>xp(e,r)));return ch.create(i,"or")}(e,t),Np(n)}function Ap(e,t){if(lh(t))return mh(t,e.getFilters());{const n=t.filters.map((t=>xp(e,t)));return ch.create(n,"or")}}function Np(e){if(Dc(e instanceof oh||e instanceof ch),e instanceof oh)return e;const t=e.getFilters();if(1===t.length)return Np(t[0]);if(dh(e))return e;const n=t.map((e=>Np(e))),r=[];return n.forEach((t=>{t instanceof oh?r.push(t):t instanceof ch&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:ch.create(r,e.op)}class Rp{constructor(){this._n=new Pp}addToCollectionParentIndex(e,t){return this._n.add(t),vl.resolve()}getCollectionParents(e,t){return vl.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return vl.resolve()}deleteFieldIndex(e,t){return vl.resolve()}deleteAllFieldIndexes(e){return vl.resolve()}createTargetIndexes(e,t){return vl.resolve()}getDocumentsMatchingTarget(e,t){return vl.resolve(null)}getIndexType(e,t){return vl.resolve(0)}getFieldIndexes(e,t){return vl.resolve([])}getNextCollectionGroupToUpdate(e){return vl.resolve(null)}getMinOffset(e,t){return vl.resolve(dl.min())}getMinOffsetFromCollectionGroup(e,t){return vl.resolve(dl.min())}updateCollectionGroup(e,t,n){return vl.resolve()}updateIndexEntries(e,t){return vl.resolve()}}class Pp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new gu(tl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new gu(tl.comparator)).toArray()}}const Op=new Uint8Array(0);class Dp{constructor(e,t){this.databaseId=t,this.an=new Pp,this.un=new Jh((e=>Ch(e)),((e,t)=>xh(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Dl(r)};return Lp(e).put(i)}return vl.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Xc(t),""],!1,!0);return Lp(e).U(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ul(r.parent))}return n}))}addFieldIndex(e,t){const n=Up(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Fp(e);return i.next((e=>{n.put(sp(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Up(e),r=Fp(e),i=Mp(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Up(e),n=Mp(e),r=Fp(e);return t.j().next((()=>n.j())).next((()=>r.j()))}createTargetIndexes(e,t){return vl.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new _p(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Mp(e);let r=!0;const i=new Map;return vl.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=od();const r=[];return vl.forEach(i,((i,s)=>{Ac("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Ch(t)));const a=function(e,t){const n=al(t);if(void 0===n)return null;for(const r of Nh(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),o=function(e,t){const n=new Map;for(const r of ol(t))for(const t of Nh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of ol(t)){const t=0===i.kind?Rh(e,i.fieldPath,e.startAt):Ph(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new th(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of ol(t)){const t=0===i.kind?Ph(e,i.fieldPath,e.endAt):Rh(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new th(n,r)}(s,i),u=this.hn(i,s,c),h=this.hn(i,s,l),d=this.Pn(i,s,o),f=this.In(i.indexId,a,u,c.inclusive,h,l.inclusive,d);return vl.forEach(f,(i=>n.G(i,t.limit).next((t=>{t.forEach((t=>{const n=il.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return vl.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:kp(ch.create(e.filters,"and")).map((t=>Sh(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,a){const o=(null!=t?t.length:1)*Math.max(n.length,i.length),c=o/(null!=t?t.length:1),l=[];for(let u=0;u<o;++u){const o=t?this.Tn(t[u/c]):Op,h=this.En(e,o,n[u%c],r),d=this.dn(e,o,i[u%c],s),f=a.map((t=>this.En(e,o,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new yp(e,il.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new yp(e,il.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new _p(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return vl.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new gu(rl.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new vp;for(const r of ol(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);hp.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new vp;return hp.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new vp;return hp.bt.Pt(ju(this.databaseId,t),n.Ht(function(e){const t=ol(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new vp);let i=0;for(const s of ol(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&Bu(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);hp.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new vp;n.seed(e.Wt()),hp.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof oh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Up(e),r=Fp(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next((e=>{const t=[];return vl.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new ll(t.sequenceNumber,new dl($f(t.readTime),new il(Ul(t.documentKey)),t.largestBatchId)):ll.empty(),r=e.fields.map((e=>{let[t,n]=e;return new cl(rl.fromServerFormat(t),n)}));return new sl(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Yc(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Up(e),i=Fp(e);return this.gn(e).next((e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>vl.forEach(t,(t=>i.put(sp(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return vl.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?vl.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),vl.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?vl.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Mp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Mp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Mp(e);let i=new gu(wp);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new yp(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new gu(wp);const r=this.An(t,e);if(null==r)return n;const i=al(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Bu(s))for(const i of s.arrayValue.values||[])n=n.add(new yp(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new yp(t.indexId,e.key,Op,r));return n}wn(e,t,n,r,i){Ac("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),a=t.getIterator();let o=yu(s),c=yu(a);for(;o||c;){let e=!1,t=!1;if(o&&c){const r=n(o,c);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(c),c=yu(a)):t?(i(o),o=yu(s)):(o=yu(s),c=yu(a))}}(r,i,wp,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),vl.waitFor(s)}gn(e){let t=1;return Fp(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>wp(e,t))).filter(((e,t,n)=>!t||0!==wp(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=wp(s,e),i=wp(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Op,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Op,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return wp(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Vp)}getMinOffset(e,t){return vl.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Oc())))).next(Vp)}}function Lp(e){return lu(e,"collectionParents")}function Mp(e){return lu(e,"indexEntries")}function Up(e){return lu(e,"indexConfiguration")}function Fp(e){return lu(e,"indexState")}function Vp(e){Dc(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;fl(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new dl(t.readTime,t.documentKey,n)}const jp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new zp(e,zp.DEFAULT_COLLECTION_PERCENTILE,zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Bp(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const c=r.J({range:a},((e,t,n)=>(o++,n.delete())));s.push(c.next((()=>{Dc(1===o)})));const l=[];for(const u of n.mutations){const e=jl(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return vl.waitFor(s).next((()=>l))}function qp(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Oc();t=e.noDocument}return JSON.stringify(t).length}zp.DEFAULT_COLLECTION_PERCENTILE=10,zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zp.DEFAULT=new zp(41943040,zp.DEFAULT_COLLECTION_PERCENTILE,zp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zp.DISABLED=new zp(-1,0,0);class Hp{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Dc(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Hp(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gp(e).J({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Wp(e),s=Gp(e);return s.add({}).next((a=>{Dc("number"==typeof a);const o=new Bd(a,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Of(e.ct,t))),i=n.mutations.map((t=>Of(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,o),l=[];let u=new gu(((e,t)=>Yc(e.canonicalString(),t.canonicalString())));for(const e of r){const t=jl(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,zl))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[a]=o.keys()})),vl.waitFor(l).next((()=>o))}))}lookupMutationBatch(e,t){return Gp(e).get(t).next((e=>e?(Dc(e.userId===this.userId),Zf(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?vl.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Gp(e).J({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Dc(t.batchId>=n),i=Zf(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Gp(e).J({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gp(e).U("userMutationsIndex",t).next((e=>e.map((e=>Zf(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Vl(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Wp(e).J({range:r},((n,r,s)=>{const[a,o,c]=n,l=Ul(o);if(a===this.userId&&t.path.isEqual(l))return Gp(e).get(c).next((e=>{if(!e)throw Oc();Dc(e.userId===this.userId),i.push(Zf(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gu(Yc);const r=[];return t.forEach((t=>{const i=Vl(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=Wp(e).J({range:s},((e,r,i)=>{const[s,a,o]=e,c=Ul(a);s===this.userId&&t.path.isEqual(c)?n=n.add(o):i.done()}));r.push(a)})),vl.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Vl(this.userId,n),s=IDBKeyRange.lowerBound(i);let a=new gu(Yc);return Wp(e).J({range:s},((e,t,i)=>{const[s,o,c]=e,l=Ul(o);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(a=a.add(c)):i.done()})).next((()=>this.Fn(e,a)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Gp(e).get(t).next((e=>{if(null===e)throw Oc();Dc(e.userId===this.userId),n.push(Zf(this.serializer,e))})))})),vl.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Bp(e._e,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),vl.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return vl.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Wp(e).J({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ul(e[1]);r.push(t)}else n.done()})).next((()=>{Dc(0===r.length)}))}))}containsKey(e,t){return Kp(e,this.userId,t)}xn(e){return Qp(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Kp(e,t,n){const r=Vl(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return Wp(e).J({range:s,H:!0},((e,n,r)=>{const[s,o,c]=e;s===t&&o===i&&(a=!0),r.done()})).next((()=>a))}function Gp(e){return lu(e,"mutations")}function Wp(e){return lu(e,"documentMutations")}function Qp(e){return lu(e,"mutationQueues")}class Yp{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Yp(0)}static Ln(){return new Yp(-1)}}class Jp{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Yp(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Zc.fromTimestamp(new $c(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Xp(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Dc(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Xp(e).J(((s,a)=>{const o=ep(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,i.push(this.removeTargetData(e,o)))})).next((()=>vl.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Xp(e).J(((e,n)=>{const r=ep(n);t(r)}))}Bn(e){return $p(e).get("targetGlobalKey").next((e=>(Dc(null!==e),e)))}kn(e,t){return $p(e).put("targetGlobalKey",t)}qn(e,t){return Xp(e).put(tp(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Ch(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Xp(e).J({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=ep(n);xh(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Zp(e);return t.forEach((t=>{const s=Dl(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),vl.waitFor(r)}removeMatchingKeys(e,t,n){const r=Zp(e);return vl.forEach(t,(t=>{const i=Dl(t.path);return vl.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Zp(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zp(e);let i=od();return r.J({range:n,H:!0},((e,t,n)=>{const r=Ul(e[1]),s=new il(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Dl(t.path),r=IDBKeyRange.bound([n],[Xc(n)],!1,!0);let i=0;return Zp(e).J({index:"documentTargetsIndex",H:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}ot(e,t){return Xp(e).get(t).next((e=>e?ep(e):null))}}function Xp(e){return lu(e,"targets")}function $p(e){return lu(e,"targetGlobal")}function Zp(e){return lu(e,"targetDocuments")}function em(e,t){let[n,r]=e,[i,s]=t;const a=Yc(n,i);return 0===a?Yc(r,s):a}class tm{constructor(e){this.Kn=e,this.buffer=new gu(em),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();em(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nm{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Ac("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){kl(e)?Ac("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await gl(e)}await this.zn(3e5)}))}}class rm{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return vl.resolve(Nl.oe);const n=new tm(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ac("LruGarbageCollector","Garbage collection skipped; disabled"),vl.resolve(jp)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ac("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),jp):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,a,o,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ac("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),xc()<=ft.DEBUG&&Ac("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-o)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),vl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function im(e,t){return new rm(e,t)}class sm{constructor(e,t){this.db=e,this.garbageCollector=im(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return am(e,n)}removeReference(e,t,n){return am(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return am(e,t)}er(e,t){return function(e,t){let n=!1;return Qp(e).Y((r=>Kp(e,r,t).next((e=>(e&&(n=!0),vl.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,a)=>{if(a<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Zc.min()),Zp(e).delete(function(e){return[0,Dl(e.path)]}(s)))))}));r.push(t)}})).next((()=>vl.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return am(e,t)}Xn(e,t){const n=Zp(e);let r,i=Nl.oe;return n.J({index:"documentTargetsIndex"},((e,n)=>{let[s,a]=e,{path:o,sequenceNumber:c}=n;0===s?(i!==Nl.oe&&t(new il(Ul(r)),i),i=c,r=o):i=Nl.oe})).next((()=>{i!==Nl.oe&&t(new il(Ul(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function am(e,t){return Zp(e).put(function(e,t){return{targetId:0,path:Dl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class om{constructor(){this.changes=new Jh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,eh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?vl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return dm(e).put(n)}removeEntry(e,t,n){return dm(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Jf(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=eh.newInvalidDocument(t);return dm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fm(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:eh.newInvalidDocument(t)};return dm(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(fm(t))},((e,r)=>{n={document:this.nr(t,r),size:qp(r)}})).next((()=>n))}getEntries(e,t){let n=$h();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=$h(),r=new fu(il.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,qp(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return vl.resolve();let r=new gu(mm);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(fm(r.first()),fm(r.last())),s=r.getIterator();let a=s.getNext();return dm(e).J({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=il.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&mm(a,i)<0;)n(a,null),a=s.getNext();a&&a.isEqual(i)&&(n(a,t),a=s.hasNext()?s.getNext():null),a?r.$(fm(a)):r.done()})).next((()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Jf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dm(e).U(IDBKeyRange.bound(a,o,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=$h();for(const i of e){const e=this.nr(il.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Gh(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=$h();const s=pm(t,n),a=pm(t,dl.max());return dm(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},((e,t,n)=>{const s=this.nr(il.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new um(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return hm(e).get("remoteDocumentGlobalKey").next((e=>(Dc(!!e),e)))}tr(e,t){return hm(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Pf(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=il.fromSegments(t.noDocument.path),r=$f(t.noDocument.readTime);n=eh.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Oc();{const e=il.fromSegments(t.unknownDocument.path),r=$f(t.unknownDocument.version);n=eh.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new $c(e[0],e[1]);return Zc.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Zc.min()))return e}return eh.newInvalidDocument(e)}}function lm(e){return new cm(e)}class um extends om{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Jh((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new gu(((e,t)=>Yc(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const a=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,a.readTime)),s.isValidDocument()){const o=Yf(this.ar.serializer,s);r=r.add(i.path.popLast());const c=qp(o);n+=c-a.size,t.push(this.ar.addEntry(e,i,o))}else if(n-=a.size,this.trackRemovals){const n=Yf(this.ar.serializer,s.convertToNoDocument(Zc.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),vl.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function hm(e){return lu(e,"remoteDocumentGlobal")}function dm(e){return lu(e,"remoteDocumentsV14")}function fm(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function pm(e,t){const n=t.documentKey.path.toArray();return[e,Jf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function mm(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Yc(n[s],r[s]),i)return i;return i=Yc(n.length,r.length),i||(i=Yc(n[n.length-2],r[r.length-2]),i||Yc(n[n.length-1],r[r.length-1]))}class gm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class vm{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Pd(n.mutation,e,wu.empty(),$c.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,od()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:od();const r=nd();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=ed();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=nd();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,od())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=$h();const s=id(),a=id();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Md)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Pd(a.mutation,t,a.mutation.getFieldMask(),$c.now())):s.set(t.key,wu.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new gm(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=id();let r=new fu(((e,t)=>e-t)),i=od();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||wu.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||od()).add(e);r=r.insert(i.batchId,o)}))})).next((()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,c=r.value,l=rd();c.forEach((e=>{if(!i.has(e)){const r=Nd(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,o,l))}return vl.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return il.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Uh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):vl.resolve(nd());let a=-1,o=i;return s.next((t=>vl.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?vl.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{o=o.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,o,t,od()))).next((e=>({batchId:a,changes:td(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new il(t)).next((e=>{let t=ed();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ed();return this.indexManager.getCollectionParents(e,i).next((a=>vl.forEach(a,(a=>{const o=function(e,t){return new Oh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,eh.newInvalidDocument(r)))}));let n=ed();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Pd(s.mutation,r,wu.empty(),$c.now()),Gh(t,r)&&(n=n.insert(e,r))})),n}))}}class ym{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return vl.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:_f(e.createTime)}}(t)),vl.resolve()}getNamedQuery(e,t){return vl.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:np(e.bundledQuery),readTime:_f(e.readTime)}}(t)),vl.resolve()}}class wm{constructor(){this.overlays=new fu(il.comparator),this.hr=new Map}getOverlay(e,t){return vl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=nd();return vl.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),vl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),vl.resolve()}getOverlaysForCollection(e,t,n){const r=nd(),i=t.length+1,s=new il(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return vl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new fu(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=nd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=nd(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return vl.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Hd(t,n));let i=this.hr.get(t);void 0===i&&(i=od(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class bm{constructor(){this.Pr=new gu(_m.Ir),this.Tr=new gu(_m.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new _m(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new _m(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new il(new tl([])),n=new _m(t,e),r=new _m(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new il(new tl([])),n=new _m(t,e),r=new _m(t,e+1);let i=od();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new _m(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class _m{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return il.comparator(e.key,t.key)||Yc(e.pr,t.pr)}static Er(e,t){return Yc(e.pr,t.pr)||il.comparator(e.key,t.key)}}class Im{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new gu(_m.Ir)}checkEmpty(e){return vl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Bd(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.wr=this.wr.add(new _m(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return vl.resolve(s)}lookupMutationBatch(e,t){return vl.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return vl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return vl.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return vl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new _m(t,0),r=new _m(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),vl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new gu(Yc);return t.forEach((e=>{const t=new _m(e,0),r=new _m(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),vl.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;il.isDocumentKey(i)||(i=i.child(""));const s=new _m(new il(i),0);let a=new gu(Yc);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.pr)),!0)}),s),vl.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Dc(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return vl.forEach(t.mutations,(r=>{const i=new _m(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new _m(t,0),r=this.wr.firstAfterOrEqual(n);return vl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,vl.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class km{constructor(e){this.vr=e,this.docs=new fu(il.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return vl.resolve(n?n.document.mutableCopy():eh.newInvalidDocument(t))}getEntries(e,t){let n=$h();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():eh.newInvalidDocument(e))})),vl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=$h();const s=t.path,a=new il(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||fl(hl(a),n)<=0||(r.has(a.key)||Gh(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return vl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Oc()}Fr(e,t){return vl.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Tm(this)}getSize(e){return vl.resolve(this.size)}}class Tm extends om{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),vl.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Em{constructor(e){this.persistence=e,this.Mr=new Jh((e=>Ch(e)),xh),this.lastRemoteSnapshotVersion=Zc.min(),this.highestTargetId=0,this.Or=0,this.Nr=new bm,this.targetCount=0,this.Lr=Yp.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),vl.resolve()}getLastRemoteSnapshotVersion(e){return vl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return vl.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),vl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),vl.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Yp(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,vl.resolve()}updateTargetData(e,t){return this.qn(t),vl.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,vl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),vl.waitFor(i).next((()=>r))}getTargetCount(e){return vl.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return vl.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),vl.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),vl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),vl.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return vl.resolve(n)}containsKey(e,t){return vl.resolve(this.Nr.containsKey(t))}}class Sm{constructor(e,t){this.Br={},this.overlays={},this.kr=new Nl(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Em(this),this.indexManager=new Rp,this.remoteDocumentCache=function(e){return new km(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Qf(t),this.$r=new ym(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wm,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Im(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Ac("MemoryPersistence","Starting transaction:",e);const r=new Cm(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return vl.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Cm extends ml{constructor(e){super(),this.currentSequenceNumber=e}}class xm{constructor(e){this.persistence=e,this.zr=new bm,this.jr=null}static Hr(e){return new xm(e)}get Jr(){if(this.jr)return this.jr;throw Oc()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),vl.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),vl.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),vl.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vl.forEach(this.Jr,(n=>{const r=il.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Zc.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return vl.or([()=>vl.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Am{constructor(e){this.serializer=e}O(e,t,n,r){const i=new yl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fl,{unique:!0}),e.createObjectStore("documentMutations")}(e),Nm(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=vl.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Nm(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zc.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").U().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fl,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return vl.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Zl});t.createIndex("collectionPathOverlayIndex",eu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",tu,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Bl});t.createIndex("documentKeyIndex",ql),t.createIndex("collectionGroupIndex",Hl)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Yl}).createIndex("sequenceNumberIndex",Jl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Xl}).createIndex("documentKeyIndex",$l,{unique:!1})}(e)))),n<16&&r>=16&&(s=s.next((()=>{t.objectStore("indexState").clear()})).next((()=>{t.objectStore("indexEntries").clear()}))),s}ei(e){let t=0;return e.store("remoteDocuments").J(((e,n)=>{t+=qp(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next((t=>vl.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next((n=>vl.forEach(n,(n=>{Dc(n.userId===t.userId);const r=Zf(this.serializer,n);return Bp(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.J(((n,i)=>{const s=new tl(n),a=function(e){return[0,Dl(e)]}(s);r.push(t.get(a).next((n=>n?vl.resolve():(n=>t.put({targetId:0,path:Dl(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>vl.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Ql});const n=t.store("collectionParents"),r=new Pp,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Dl(r)})}};return t.store("remoteDocuments").J({H:!0},((e,t)=>{const n=new tl(e);return i(n.popLast())})).next((()=>t.store("documentMutations").J({H:!0},((e,t)=>{let[n,r,s]=e;const a=Ul(r);return i(a.popLast())}))))}ri(e){const t=e.store("targets");return t.J(((e,n)=>{const r=ep(n),i=tp(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.J(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new il(tl.fromString(e.document.name).popFirst(5)):e.noDocument?il.fromSegments(e.noDocument.path):e.unknownDocument?il.fromSegments(e.unknownDocument.path):Oc()}(n).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>vl.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=lm(this.serializer),i=new Sm(xm.Hr,this.serializer.ct);return n.U().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:od();Zf(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),vl.forEach(n,((e,n)=>{const s=new Ec(n),a=lp.lt(this.serializer,s),o=i.getIndexManager(s),c=Hp.lt(s,this.serializer,o,i.referenceDelegate);return new vm(r,c,a,o).recalculateAndSaveOverlaysForDocumentKeys(new cu(t,Nl.oe),e).next()}))}))}}function Nm(e){e.createObjectStore("targetDocuments",{keyPath:Gl}).createIndex("documentTargetsIndex",Wl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Kl,{unique:!0}),e.createObjectStore("targetGlobal")}const Rm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Pm{constructor(e,t,n,r,i,s,a,o,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=a,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Pm.D())throw new Uc(Mc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sm(this,r),this.Ti=t+"main",this.serializer=new Qf(o),this.Ei=new wl(this.Ti,this.ui,new Am(this.serializer)),this.Qr=new Jp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=lm(this.serializer),this.$r=new ap,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&Nc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Uc(Mc.FAILED_PRECONDITION,Rm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Nl(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Dm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(kl(e))return Ac("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ac("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Om(e).get("owner").next((e=>vl.resolve(this.Si(e))))}bi(e){return Dm(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=lu(e,"clientMetadata");return t.U().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return vl.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?vl.resolve(!0):Om(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Uc(Mc.FAILED_PRECONDITION,Rm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dm(e).U().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ac("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new cu(e,Nl.oe);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Dm(e).U().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Hp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dp(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return lp.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Ac("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 16===e?ou:15===e?au:14===e?su:13===e?iu:12===e?ru:11===e?nu:void Oc()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new cu(r,this.kr?this.kr.next():Nl.oe),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Nc("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Uc(Mc.FAILED_PRECONDITION,pl);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Om(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Uc(Mc.FAILED_PRECONDITION,Rm)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Om(e).put("owner",t)}static D(){return wl.D()}yi(e){const t=Om(e);return t.get("owner").next((e=>this.Si(e)?(Ac("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):vl.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Nc("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;We()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ac("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Nc("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(oA){Nc("Failed to set zombie client id.",oA)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(oA){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Om(e){return lu(e,"owner")}function Dm(e){return lu(e,"clientMetadata")}function Lm(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Mm{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=od(),r=od();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Mm(e,t.fromCache,n,r)}}class Um{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Fm{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=We()?8:bl(je())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Um;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(xc()<=ft.DEBUG&&Ac("QueryEngine","SDK will not create cache indexes for query:",Kh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),vl.resolve()):(xc()<=ft.DEBUG&&Ac("QueryEngine","Query:",Kh(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(xc()<=ft.DEBUG&&Ac("QueryEngine","The SDK decides to create cache indexes for query:",Kh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vh(t))):vl.resolve())}ji(e,t){if(Mh(t))return vl.resolve(null);let n=Vh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Bh(t,null,"F"),n=Vh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=od(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Bh(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Mh(t)||r.isEqual(Zc.min())?vl.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?vl.resolve(null):(xc()<=ft.DEBUG&&Ac("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Kh(t)),this.es(e,s,t,ul(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new gu(Qh(e));return t.forEach(((t,r)=>{Gh(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return xc()<=ft.DEBUG&&Ac("QueryEngine","Using full collection scan to execute query:",Kh(t)),this.zi.getDocumentsMatchingQuery(e,t,dl.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Vm{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new fu(Yc),this.rs=new Jh((e=>Ch(e)),xh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function jm(e,t,n,r){return new Vm(e,t,n,r)}async function zm(e,t){const n=Lc(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let a=od();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function Bm(e){const t=Lc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function qm(e,t,n){let r=od(),i=od();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=$h();return n.forEach(((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Zc.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ac("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Hm(e,t){const n=Lc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Km(e,t){const n=Lc(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,vl.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Wf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Gm(e,t,n){const r=Lc(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!kl(e))throw e;Ac("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Wm(e,t,n){const r=Lc(e);let i=Zc.min(),s=od();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Lc(e),i=r.rs.get(n);return void 0!==i?vl.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Vh(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Zc.min(),n?s:od()))).next((e=>(Jm(r,Wh(t),e),{documents:e,hs:s})))))}function Qm(e,t){const n=Lc(e),r=Lc(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r.ot(e,t).next((e=>e?e.target:null))))}function Ym(e,t){const n=Lc(e),r=n.ss.get(t)||Zc.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,ul(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Jm(n,t,e),e)))}function Jm(e,t,n){let r=e.ss.get(t)||Zc.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Xm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:od();const r=await Km(e,Vh(np(t.bundledQuery))),i=Lc(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=_f(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const a=r.withResumeToken(_u.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(e,a).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function $m(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Zm(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function eg(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class tg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Uc(r.error.code,r.error.message))),s?new tg(e,t,r.state,i):(Nc("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ng{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Uc(n.error.code,n.error.message))),i?new ng(e,n.state,r):(Nc("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ld();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Ol(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new rg(e,i):(Nc("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class ig{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ig(t.clientId,t.onlineState):(Nc("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class sg{constructor(){this.activeTargetIds=ld()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ag{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new fu(Yc),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=$m(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new sg),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem($m(this.persistenceKey,n));if(e){const t=rg.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(eg(this.persistenceKey,e));if(n){const r=ng.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(eg(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ac("SharedClientState","READ",e,t),t}setItem(e,t){Ac("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ac("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Ac("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Nc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Nl.oe;if(null!=e)try{const n=JSON.parse(e);Dc("number"==typeof n),t=n}catch(e){Nc("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Nl.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new tg(this.currentUser,e,t,n),i=Zm(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=Zm(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=eg(this.persistenceKey,e),i=new ng(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return rg.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return tg.Es(new Ec(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return ng.Es(r,t)}xs(e){return ig.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Ac("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],a=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||a.push(e)})),this.syncEngine.eo(s,a).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=ld();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class og{constructor(){this.no=new sg,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new sg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cg{io(e){}shutdown(){}}class lg{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ac("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ac("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ug=null;function hg(){return null===ug?ug=268435456+Math.round(2147483648*Math.random()):ug++,"0x"+ug.toString(16)}const dg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fg{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const pg="WebChannelConnection";class mg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=t+"://"+e.host,this.So="projects/".concat(n,"/databases/").concat(r),this.bo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get Do(){return!1}Co(e,t,n,r,i){const s=hg(),a=this.vo(e,t.toUriEncodedString());Ac("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(o,r,i),this.Mo(e,a,o,n).then((t=>(Ac("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Rc("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t}))}xo(e,t,n,r,i,s){return this.Co(e,t,n,r,i)}Fo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}vo(e,t){const n=dg[e];return"".concat(this.wo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,n,r){const i=hg();return new Promise(((s,a)=>{const o=new fc;o.setWithCredentials(!0),o.listenOnce(gc.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case vc.NO_ERROR:const t=o.getResponseJson();Ac(pg,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case vc.TIMEOUT:Ac(pg,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Uc(Mc.DEADLINE_EXCEEDED,"Request time out"));break;case vc.HTTP_ERROR:const n=o.getStatus();if(Ac(pg,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Mc).indexOf(t)>=0?t:Mc.UNKNOWN}(t.status);a(new Uc(e,t.message))}else a(new Uc(Mc.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Uc(Mc.UNAVAILABLE,"Connection failed."));break;default:Oc()}}finally{Ac(pg,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Ac(pg,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",c,n,15)}))}Oo(e,t,n){const r=hg(),i=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_c(),a=bc(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(o.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(o.xmlHttpFactory=new pc({})),this.Fo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const l=i.join("");Ac(pg,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),o);const u=s.createWebChannel(l,o);let h=!1,d=!1;const f=new fg({lo:t=>{d?Ac(pg,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ac(pg,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Ac(pg,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,mc.EventType.OPEN,(()=>{d||(Ac(pg,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.mo())})),p(u,mc.EventType.CLOSE,(()=>{d||(d=!0,Ac(pg,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.po())})),p(u,mc.EventType.ERROR,(t=>{d||(d=!0,Rc(pg,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.po(new Uc(Mc.UNAVAILABLE,"The operation could not be completed")))})),p(u,mc.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Dc(!!i);const s=i,a=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){Ac(pg,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Gd[e];if(void 0!==t)return Yd(t)}(t),i=a.message;void 0===n&&(n=Mc.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,f.po(new Uc(n,i)),u.close()}else Ac(pg,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.yo(i)}})),p(a,wc.STAT_EVENT,(t=>{t.stat===yc.PROXY?Ac(pg,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===yc.NOPROXY&&Ac(pg,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.fo()}),0),f}}function gg(){return"undefined"!=typeof window?window:null}function vg(){return"undefined"!=typeof document?document:null}function yg(e){return new gf(e,!0)}class wg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.No=n,this.Lo=r,this.Bo=i,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,t-n);r>0&&Ac("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.ko," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Qo=Date.now(),e()))),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class bg{constructor(e,t,n,r,i,s,a,o){this.oi=e,this.Go=n,this.zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new wg(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,(()=>this.r_())))}i_(e){this.s_(),this.stream.send(e)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(e,t){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,4!==e?this.Yo.reset():t&&t.code===Mc.RESOURCE_EXHAUSTED?(Nc(t.toString()),Nc("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===Mc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.__(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ao(t)}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.jo===t&&this.u_(n,r)}),(t=>{e((()=>{const e=new Uc(Mc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.c_(e)}))}))}u_(e,t){const n=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po((()=>{n((()=>this.listener.Po()))})),this.stream.To((()=>{n((()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,(()=>(this.Xo()&&(this.state=3),Promise.resolve()))),this.listener.To())))})),this.stream.Ao((e=>{n((()=>this.c_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}e_(){this.state=5,this.Yo.$o((async()=>{this.state=0,this.start()}))}c_(e){return Ac("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget((()=>this.jo===e?t():(Ac("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class _g extends bg{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Oc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Dc(void 0===t||"string"==typeof t),_u.fromBase64String(t||"")):(Dc(void 0===t||t instanceof Buffer||t instanceof Uint8Array),_u.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Mc.UNKNOWN:Yd(e.code);return new Uc(t,e.message||"")}(a);n=new cf(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sf(e,r.document.name),s=_f(r.document.updateTime),a=r.document.createTime?_f(r.document.createTime):Zc.min(),o=new $u({mapValue:{fields:r.document.fields}}),c=eh.newFoundDocument(i,s,a,o),l=r.targetIds||[],u=r.removedTargetIds||[];n=new af(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Sf(e,r.document),s=r.readTime?_f(r.readTime):Zc.min(),a=eh.newNoDocument(i,s),o=r.removedTargetIds||[];n=new af([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Sf(e,r.document),s=r.removedTargetIds||[];n=new af([],s,i,null)}else{if(!("filter"in t))return Oc();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Kd(r,i),a=e.targetId;n=new of(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Zc.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Zc.min():t.readTime?_f(t.readTime):Zc.min()}(e);return this.listener.h_(t,n)}P_(e){const t={};t.database=Af(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ah(r)?{documents:Lf(e,r)}:{query:Mf(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=wf(e,t.resumeToken);const r=vf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Zc.min())>0){n.readTime=yf(e,t.snapshotVersion.toTimestamp());const r=vf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oc()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.i_(t)}I_(e){const t={};t.database=Af(this.serializer),t.removeTarget=e,this.i_(t)}}class Ig extends bg{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(Dc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function(e,t){return e&&e.length>0?(Dc(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?_f(e.updateTime):_f(t);return n.isEqual(Zc.min())&&(n=_f(t)),new Sd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=_f(e.commitTime);return this.listener.A_(n,t)}return Dc(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Af(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Of(this.serializer,e)))};this.i_(t)}}class kg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Uc(Mc.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,a]=i;return this.connection.Co(e,kf(t,n),r,s,a)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Mc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Uc(Mc.UNKNOWN,e.toString())}))}xo(e,t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[a,o]=s;return this.connection.xo(e,kf(t,n),r,a,o,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Mc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Uc(Mc.UNKNOWN,e.toString())}))}terminate(){this.m_=!0,this.connection.terminate()}}class Tg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve()))))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.y_?(Nc(t),this.y_=!1):Ac("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class Eg{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=i,this.O_.io((e=>{n.enqueueAndForget((async()=>{Dg(this)&&(Ac("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Lc(e);t.M_.add(4),await Cg(t),t.N_.set("Unknown"),t.M_.delete(4),await Sg(t)}(this))}))})),this.N_=new Tg(n,r)}}async function Sg(e){if(Dg(e))for(const t of e.x_)await t(!0)}async function Cg(e){for(const t of e.x_)await t(!1)}function xg(e,t){const n=Lc(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Og(n)?Pg(n):Zg(n).Xo()&&Ng(n,t))}function Ag(e,t){const n=Lc(e),r=Zg(n);n.F_.delete(t),r.Xo()&&Rg(n,t),0===n.F_.size&&(r.Xo()?r.n_():Dg(n)&&n.N_.set("Unknown"))}function Ng(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zc.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Zg(e).P_(t)}function Rg(e,t){e.L_.xe(t),Zg(e).I_(t)}function Pg(e){e.L_=new uf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Zg(e).start(),e.N_.w_()}function Og(e){return Dg(e)&&!Zg(e).Zo()&&e.F_.size>0}function Dg(e){return 0===Lc(e).M_.size}function Lg(e){e.L_=void 0}async function Mg(e){e.N_.set("Online")}async function Ug(e){e.F_.forEach(((t,n)=>{Ng(e,t)}))}async function Fg(e,t){Lg(e),Og(e)?(e.N_.D_(t),Pg(e)):e.N_.set("Unknown")}async function Vg(e,t,n){if(e.N_.set("Online"),t instanceof cf&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.F_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.F_.delete(r),e.L_.removeTarget(r))}(e,t)}catch(n){Ac("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await jg(e,n)}else if(t instanceof af?e.L_.Ke(t):t instanceof of?e.L_.He(t):e.L_.We(t),!n.isEqual(Zc.min()))try{const t=await Bm(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.L_.rt(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.F_.get(r);i&&e.F_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.F_.get(t);if(!r)return;e.F_.set(t,r.withResumeToken(_u.EMPTY_BYTE_STRING,r.snapshotVersion)),Rg(e,t);const i=new Wf(r.target,t,n,r.sequenceNumber);Ng(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ac("RemoteStore","Failed to raise snapshot:",t),await jg(e,t)}}async function jg(e,t,n){if(!kl(t))throw t;e.M_.add(1),await Cg(e),e.N_.set("Offline"),n||(n=()=>Bm(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ac("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Sg(e)}))}function zg(e,t){return t().catch((n=>jg(e,n,t)))}async function Bg(e){const t=Lc(e),n=ev(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;qg(t);)try{const e=await Hm(t.localStore,r);if(null===e){0===t.v_.length&&n.n_();break}r=e.batchId,Hg(t,e)}catch(e){await jg(t,e)}Kg(t)&&Gg(t)}function qg(e){return Dg(e)&&e.v_.length<10}function Hg(e,t){e.v_.push(t);const n=ev(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function Kg(e){return Dg(e)&&!ev(e).Zo()&&e.v_.length>0}function Gg(e){ev(e).start()}async function Wg(e){ev(e).V_()}async function Qg(e){const t=ev(e);for(const n of e.v_)t.d_(n.mutations)}async function Yg(e,t,n){const r=e.v_.shift(),i=qd.from(r,t,n);await zg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Bg(e)}async function Jg(e,t){t&&ev(e).E_&&await async function(e,t){if(function(e){return Qd(e)&&e!==Mc.ABORTED}(t.code)){const n=e.v_.shift();ev(e).t_(),await zg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Bg(e)}}(e,t),Kg(e)&&Gg(e)}async function Xg(e,t){const n=Lc(e);n.asyncQueue.verifyOperationInProgress(),Ac("RemoteStore","RemoteStore received new credentials");const r=Dg(n);n.M_.add(3),await Cg(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Sg(n)}async function $g(e,t){const n=Lc(e);t?(n.M_.delete(2),await Sg(n)):t||(n.M_.add(2),await Cg(n),n.N_.set("Unknown"))}function Zg(e){return e.B_||(e.B_=function(e,t,n){const r=Lc(e);return r.f_(),new _g(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Mg.bind(null,e),To:Ug.bind(null,e),Ao:Fg.bind(null,e),h_:Vg.bind(null,e)}),e.x_.push((async t=>{t?(e.B_.t_(),Og(e)?Pg(e):e.N_.set("Unknown")):(await e.B_.stop(),Lg(e))}))),e.B_}function ev(e){return e.k_||(e.k_=function(e,t,n){const r=Lc(e);return r.f_(),new Ig(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Wg.bind(null,e),Ao:Jg.bind(null,e),R_:Qg.bind(null,e),A_:Yg.bind(null,e)}),e.x_.push((async t=>{t?(e.k_.t_(),await Bg(e)):(await e.k_.stop(),e.v_.length>0&&(Ac("RemoteStore","Stopping write stream with ".concat(e.v_.length," pending writes")),e.v_=[]))}))),e.k_}class tv{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new tv(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Uc(Mc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nv(e,t){if(Nc("AsyncQueue","".concat(t,": ").concat(e)),kl(e))return new Uc(Mc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class rv{constructor(e){this.comparator=e?(t,n)=>e(t,n)||il.comparator(t.key,n.key):(e,t)=>il.comparator(e.key,t.key),this.keyedMap=ed(),this.sortedSet=new fu(this.comparator)}static emptySet(e){return new rv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rv))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new rv;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class iv{constructor(){this.q_=new fu(il.comparator)}track(e){const t=e.doc.key,n=this.q_.get(t);n?0!==e.type&&3===n.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==n.type?this.q_=this.q_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.q_=this.q_.remove(t):1===e.type&&2===n.type?this.q_=this.q_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Oc():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class sv{constructor(e,t,n,r,i,s,a,o,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new sv(e,t,rv.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class av{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some((e=>e.G_()))}}class ov{constructor(){this.queries=new Jh((e=>Hh(e)),qh),this.onlineState="Unknown",this.z_=new Set}}async function cv(e,t){const n=Lc(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new av,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=nv(e,"Initialization of query '".concat(Kh(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&dv(n)}async function lv(e,t){const n=Lc(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.U_.indexOf(t);e>=0&&(s.U_.splice(e,1),0===s.U_.length?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function uv(e,t){const n=Lc(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.U_)e.H_(i)&&(r=!0);t.K_=i}}r&&dv(n)}function hv(e,t,n){const r=Lc(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function dv(e){e.z_.forEach((e=>{e.next()}))}var fv,pv;(pv=fv||(fv={})).J_="default",pv.Cache="cache";class mv{constructor(e,t,n){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new sv(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache)return!0;if(!this.G_())return!0;const n="Offline"!==t;return(!this.options.ra||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){if(e.docChanges.length>0)return!0;const t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}na(e){e=sv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==fv.Cache}}class gv{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}}class vv{constructor(e){this.serializer=e}Ps(e){return Sf(this.serializer,e)}Is(e){return e.metadata.exists?Pf(this.serializer,e.document,!1):eh.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return _f(e)}}class yv{constructor(e,t,n){this.oa=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wv(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;const n=tl.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){const t=new Map,n=new vv(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||od()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Lc(e);let s=od(),a=$h();for(const l of n){const e=t.Ps(l.metadata.name);l.document&&(s=s.add(e));const n=t.Is(l);n.setReadTime(t.Ts(l.metadata.readTime)),a=a.insert(e,n)}const o=i.os.newChangeBuffer({trackRemovals:!0}),c=await Km(i,function(e){return Vh(Lh(tl.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>qm(e,o,a).next((t=>(o.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new vv(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(const n of this.queries)await Xm(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}}}function wv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class bv{constructor(e){this.key=e}}class _v{constructor(e){this.key=e}}class Iv{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=od(),this.mutatedKeys=od(),this.Ia=Qh(e),this.Ta=new rv(this.Ia)}get Ea(){return this.la}da(e,t){const n=t?t.Aa:new iv,r=t?t.Ta:this.Ta;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=Gh(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ra(l,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Ia(u,o)>0||c&&this.Ia(u,c)<0)&&(a=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(o||c)&&(a=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ta:s,Aa:n,Xi:a,mutatedKeys:i}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const s=e.Aa.Q_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oc()}};return n(e)-n(t)}(e.type,t.type)||this.Ia(e.doc,t.doc))),this.Va(n),r=null!=r&&r;const a=t&&!r?this.ma():[],o=0===this.Pa.size&&this.current&&!r?1:0,c=o!==this.ha;return this.ha=o,0!==s.length||c?{snapshot:new sv(this.query,e.Ta,i,s,e.mutatedKeys,0===o,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new iv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach((e=>this.la=this.la.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.la=this.la.delete(e))),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=od(),this.Ta.forEach((e=>{this.ga(e.key)&&(this.Pa=this.Pa.add(e.key))}));const t=[];return e.forEach((e=>{this.Pa.has(e)||t.push(new _v(e))})),this.Pa.forEach((n=>{e.has(n)||t.push(new bv(n))})),t}pa(e){this.la=e.hs,this.Pa=od();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return sv.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class kv{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Tv{constructor(e){this.key=e,this.wa=!1}}class Ev{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Jh((e=>Hh(e)),qh),this.Da=new Map,this.Ca=new Set,this.va=new fu(il.comparator),this.Fa=new Map,this.Ma=new bm,this.xa={},this.Oa=new Map,this.Na=Yp.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}async function Sv(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=ty(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await xv(r,t,n,!0),i}async function Cv(e,t){const n=ty(e);await xv(n,t,!0,!1)}async function xv(e,t,n,r){const i=await Km(e.localStore,Vh(t)),s=i.targetId,a=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let o;return r&&(o=await Av(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&xg(e.remoteStore,i),o}async function Av(e,t,n,r,i){e.Ba=(t,n,r)=>async function(e,t,n,r){let i=t.view.da(n);i.Xi&&(i=await Wm(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.da(n,i)})));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return zv(e,t.targetId,o.fa),o.snapshot}(e,t,n,r);const s=await Wm(e.localStore,t,!0),a=new Iv(t,s.hs),o=a.da(s.documents),c=sf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=a.applyChanges(o,e.isPrimaryClient,c);zv(e,n,l.fa);const u=new kv(t,n,a);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function Nv(e,t,n){const r=Lc(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter((e=>!qh(e,t)))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gm(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ag(r.remoteStore,i.targetId),Vv(r,i.targetId)})).catch(gl)):(Vv(r,i.targetId),await Gm(r.localStore,i.targetId,!0))}async function Rv(e,t){const n=Lc(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ag(n.remoteStore,r.targetId))}async function Pv(e,t){const n=Lc(e);try{const e=await function(e,t){const n=Lc(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach(((s,o)=>{const c=i.get(o);if(!c)return;a.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,o).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,o))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?l=l.withResumeToken(_u.EMPTY_BYTE_STRING,Zc.min()).withLastLimboFreeSnapshotVersion(Zc.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(o,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&a.push(n.Qr.updateTargetData(e,l))}));let o=$h(),c=od();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(qm(e,s,t.documentUpdates).next((e=>{o=e.cs,c=e.ls}))),!r.isEqual(Zc.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return vl.waitFor(a).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,o,c))).next((()=>o))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Fa.get(t);r&&(Dc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.wa=!0:e.modifiedDocuments.size>0?Dc(r.wa):e.removedDocuments.size>0&&(Dc(r.wa),r.wa=!1))})),await Hv(n,e,t)}catch(e){await gl(e)}}function Ov(e,t,n){const r=Lc(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ba.forEach(((n,r)=>{const i=r.view.j_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Lc(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.U_)i.j_(t)&&(r=!0)})),r&&dv(n)}(r.eventManager,t),e.length&&r.Sa.h_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Dv(e,t,n){const r=Lc(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let e=new fu(il.comparator);e=e.insert(s,eh.newNoDocument(s,Zc.min()));const n=od().add(s),i=new rf(Zc.min(),new Map,new fu(Yc),e,n);await Pv(r,i),r.va=r.va.remove(s),r.Fa.delete(t),qv(r)}else await Gm(r.localStore,t,!1).then((()=>Vv(r,t,n))).catch(gl)}async function Lv(e,t){const n=Lc(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Lc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=vl.resolve();return s.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Dc(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=od();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Fv(n,r,null),Uv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hv(n,e)}catch(e){await gl(e)}}async function Mv(e,t,n){const r=Lc(e);try{const e=await function(e,t){const n=Lc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Dc(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Fv(r,t,n),Uv(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Hv(r,e)}catch(n){await gl(n)}}function Uv(e,t){(e.Oa.get(t)||[]).forEach((e=>{e.resolve()})),e.Oa.delete(t)}function Fv(e,t,n){const r=Lc(e);let i=r.xa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Vv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach((t=>{e.Ma.containsKey(t)||jv(e,t)}))}function jv(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);null!==n&&(Ag(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),qv(e))}function zv(e,t,n){for(const r of n)r instanceof bv?(e.Ma.addReference(r.key,t),Bv(e,r)):r instanceof _v?(Ac("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||jv(e,r.key)):Oc()}function Bv(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Ac("SyncEngine","New document in limbo: "+n),e.Ca.add(r),qv(e))}function qv(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new il(tl.fromString(t)),r=e.Na.next();e.Fa.set(r,new Tv(n)),e.va=e.va.insert(n,r),xg(e.remoteStore,new Wf(Vh(Lh(n.path)),r,"TargetPurposeLimboResolution",Nl.oe))}}async function Hv(e,t,n){const r=Lc(e),i=[],s=[],a=[];r.ba.isEmpty()||(r.ba.forEach(((e,o)=>{a.push(r.Ba(o,t,n).then((e=>{if((e||n)&&r.isPrimaryClient){const t=e&&!e.fromCache;r.sharedClientState.updateQueryState(o.targetId,t?"current":"not-current")}if(e){i.push(e);const t=Mm.Ki(o.targetId,e);s.push(t)}})))})),await Promise.all(a),r.Sa.h_(i),await async function(e,t){const n=Lc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>vl.forEach(t,(t=>vl.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>vl.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!kl(e))throw e;Ac("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function Kv(e,t){const n=Lc(e);if(!n.currentUser.isEqual(t)){Ac("SyncEngine","User change. New user:",t.toKey());const e=await zm(n.localStore,t);n.currentUser=t,function(e,t){e.Oa.forEach((e=>{e.forEach((e=>{e.reject(new Uc(Mc.CANCELLED,t))}))})),e.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Hv(n,e.us)}}function Gv(e,t){const n=Lc(e),r=n.Fa.get(t);if(r&&r.wa)return od().add(r.key);{let e=od();const r=n.Da.get(t);if(!r)return e;for(const t of r){const r=n.ba.get(t);e=e.unionWith(r.view.Ea)}return e}}async function Wv(e,t){const n=Lc(e),r=await Wm(n.localStore,t.query,!0),i=t.view.pa(r);return n.isPrimaryClient&&zv(n,t.targetId,i.fa),i}async function Qv(e,t){const n=Lc(e);return Ym(n.localStore,t).then((e=>Hv(n,e)))}async function Yv(e,t,n,r){const i=Lc(e),s=await function(e,t){const n=Lc(e),r=Lc(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):vl.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await Bg(i.remoteStore):"acknowledged"===n||"rejected"===n?(Fv(i,t,r||null),Uv(i,t),function(e,t){Lc(Lc(e).mutationQueue).Mn(t)}(i.localStore,t)):Oc(),await Hv(i,s)):Ac("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Jv(e,t,n){const r=Lc(e),i=[],s=[];for(const a of t){let e;const t=r.Da.get(a);if(t&&0!==t.length){e=await Km(r.localStore,Vh(t[0]));for(const e of t){const t=r.ba.get(e),n=await Wv(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Qm(r.localStore,a);e=await Km(r.localStore,t),await Av(r,Xv(t),a,!1,e.resumeToken)}i.push(e)}return r.Sa.h_(s),i}function Xv(e){return Dh(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function $v(e){return function(e){return Lc(Lc(e).persistence).Bi()}(Lc(e).localStore)}async function Zv(e,t,n,r){const i=Lc(e);if(i.La)return void Ac("SyncEngine","Ignoring unexpected query state notification.");const s=i.Da.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Ym(i.localStore,Wh(s[0])),r=rf.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,_u.EMPTY_BYTE_STRING);await Hv(i,e,r);break}case"rejected":await Gm(i.localStore,t,!0),Vv(i,t,r);break;default:Oc()}}async function ey(e,t,n){const r=ty(e);if(r.La){for(const e of t){if(r.Da.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Ac("SyncEngine","Adding an already active target "+e);continue}const t=await Qm(r.localStore,e),n=await Km(r.localStore,t);await Av(r,Xv(t),n.targetId,!1,n.resumeToken),xg(r.remoteStore,n)}for(const e of n)r.Da.has(e)&&await Gm(r.localStore,e,!1).then((()=>{Ag(r.remoteStore,e),Vv(r,e)})).catch(gl)}}function ty(e){const t=Lc(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dv.bind(null,t),t.Sa.h_=uv.bind(null,t.eventManager),t.Sa.ka=hv.bind(null,t.eventManager),t}function ny(e){const t=Lc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Lv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Mv.bind(null,t),t}class ry{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=yg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return jm(this.persistence,new Fm,e.initialUser,this.serializer)}createPersistence(e){return new Sm(xm.Hr,this.serializer)}createSharedClientState(e){return new og}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class iy extends ry{constructor(e,t,n){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Qa.initialize(this,e),await ny(this.Qa.syncEngine),await Bg(this.Qa.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return jm(this.persistence,new Fm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new nm(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Al(t,this.persistence);return new xl(e.asyncQueue,n)}createPersistence(e){const t=Lm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?zp.withCacheSize(this.cacheSizeBytes):zp.DEFAULT;return new Pm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,gg(),vg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new og}}class sy extends iy{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Qa.syncEngine;this.sharedClientState instanceof ag&&(this.sharedClientState.syncEngine={Zs:Yv.bind(null,t),Xs:Zv.bind(null,t),eo:ey.bind(null,t),Bi:$v.bind(null,t),Ys:Qv.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Lc(e);if(ty(n),ny(n),!0===t&&!0!==n.La){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Jv(n,e.toArray());n.La=!0,await $g(n.remoteStore,!0);for(const r of t)xg(n.remoteStore,r)}else if(!1===t&&!1!==n.La){const e=[];let t=Promise.resolve();n.Da.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Vv(n,i),Gm(n.localStore,i,!0)))),Ag(n.remoteStore,i)})),await t,await Jv(n,e),function(e){const t=Lc(e);t.Fa.forEach(((e,n)=>{Ag(t.remoteStore,n)})),t.Ma.mr(),t.Fa=new Map,t.va=new fu(il.comparator)}(n),n.La=!1,await $g(n.remoteStore,!1)}}(this.Qa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=gg();if(!ag.D(t))throw new Uc(Mc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Lm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ag(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ay{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ov(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Kv.bind(null,this.syncEngine),await $g(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ov}createDatastore(e){const t=yg(e.databaseInfo.databaseId),n=function(e){return new mg(e)}(e.databaseInfo);return function(e,t,n,r){return new kg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Eg(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Ov(this.syncEngine,e,0)),lg.D()?new lg:new cg)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Ev(e,t,n,r,i,s);return a&&(o.La=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Lc(e);Ac("RemoteStore","RemoteStore shutting down."),t.M_.add(5),await Cg(t),t.O_.shutdown(),t.N_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function oy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class cy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Nc("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class ly{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new Fc,this.buffer=new Uint8Array,this.Wa=new TextDecoder("utf-8"),this.Ga().then((e=>{e&&e.sa()?this.metadata.resolve(e.ia.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ia))))}),(e=>this.metadata.reject(e)))}close(){return this.Ua.cancel()}async getMetadata(){return this.metadata.promise}async qa(){return await this.getMetadata(),this.Ga()}async Ga(){const e=await this.za();if(null===e)return null;const t=this.Wa.decode(e),n=Number(t);isNaN(n)&&this.ja("length string (".concat(t,") is not valid number"));const r=await this.Ha(n);return new gv(JSON.parse(r),e.length+n)}Ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async za(){for(;this.Ja()<0&&!await this.Ya(););if(0===this.buffer.length)return null;const e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ha(e){for(;this.buffer.length<e;)await this.Ya()&&this.ja("Reached the end of bundle when more is expected.");const t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ja(e){throw this.Ua.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ya(){const e=await this.Ua.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class uy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Uc(Mc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Lc(e),r={documents:t.map((e=>Ef(n.serializer,e)))},i=await n.xo("BatchGetDocuments",n.serializer.databaseId,tl.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Dc(!!t.found),t.found.name,t.found.updateTime;const n=Sf(e,t.found.name),r=_f(t.found.updateTime),i=t.found.createTime?_f(t.found.createTime):Zc.min(),s=new $u({mapValue:{fields:t.found.fields}});return eh.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Dc(!!t.missing),Dc(!!t.readTime);const n=Sf(e,t.missing),r=_f(t.readTime);return eh.newNoDocument(n,r)}(e,t):Oc()}(n.serializer,e);s.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=s.get(e.toString());Dc(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new jd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=il.fromPath(t);this.mutations.push(new zd(n,this.precondition(n)))})),await async function(e,t){const n=Lc(e),r={writes:t.map((e=>Of(n.serializer,e)))};await n.Co("Commit",n.serializer.databaseId,tl.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Oc();t=Zc.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Uc(Mc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zc.min())?Cd.exists(!1):Cd.updateTime(t):Cd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zc.min()))throw new Uc(Mc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cd.updateTime(t)}return Cd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hy{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Za=n.maxAttempts,this.Yo=new wg(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o((async()=>{const e=new uy(this.datastore),t=this.tu(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.nu(e)}))))})).catch((e=>{this.nu(e)}))}))}tu(e){try{const t=this.updateFunction(e);return!Rl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget((()=>(this.eu(),Promise.resolve())))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Qd(t)}return!1}}class dy{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ec.UNAUTHENTICATED,this.clientId=Qc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ac("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ac("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Uc(Mc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=nv(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function fy(e,t){e.asyncQueue.verifyOperationInProgress(),Ac("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await zm(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function py(e,t){e.asyncQueue.verifyOperationInProgress();const n=await gy(e);Ac("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Xg(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Xg(t.remoteStore,n))),e._onlineComponents=t}function my(e){return"FirebaseError"===e.name?e.code===Mc.FAILED_PRECONDITION||e.code===Mc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function gy(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ac("FirestoreClient","Using user provided OfflineComponentProvider");try{await fy(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!my(n))throw n;Rc("Error using user provided cache. Falling back to memory cache: "+n),await fy(e,new ry)}}else Ac("FirestoreClient","Using default OfflineComponentProvider"),await fy(e,new ry);return e._offlineComponents}async function vy(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ac("FirestoreClient","Using user provided OnlineComponentProvider"),await py(e,e._uninitializedComponentsProvider._online)):(Ac("FirestoreClient","Using default OnlineComponentProvider"),await py(e,new ay))),e._onlineComponents}function yy(e){return gy(e).then((e=>e.persistence))}function wy(e){return gy(e).then((e=>e.localStore))}function by(e){return vy(e).then((e=>e.remoteStore))}function _y(e){return vy(e).then((e=>e.syncEngine))}function Iy(e){return vy(e).then((e=>e.datastore))}async function ky(e){const t=await vy(e),n=t.eventManager;return n.onListen=Sv.bind(null,t.syncEngine),n.onUnlisten=Nv.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Cv.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Rv.bind(null,t.syncEngine),n}function Ty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new cy({next:s=>{t.enqueueAndForget((()=>lv(e,a)));const o=s.docs.has(n);!o&&s.fromCache?i.reject(new Uc(Mc.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&s.fromCache&&r&&"server"===r.source?i.reject(new Uc(Mc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new mv(Lh(n.path),s,{includeMetadataChanges:!0,ra:!0});return cv(e,a)}(await ky(e),e.asyncQueue,t,n,r))),r.promise}function Ey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Fc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new cy({next:n=>{t.enqueueAndForget((()=>lv(e,a))),n.fromCache&&"server"===r.source?i.reject(new Uc(Mc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new mv(n,s,{includeMetadataChanges:!0,ra:!0});return cv(e,a)}(await ky(e),e.asyncQueue,t,n,r))),r.promise}function Sy(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Xd().encode(e):e,function(e,t){return new ly(e,t)}(function(e,t){if(e instanceof Uint8Array)return oy(e,t);if(e instanceof ArrayBuffer)return oy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,yg(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Lc(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Lc(e),r=_f(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(wv(r));const i=new yv(r,e.localStore,t.serializer);let s=await t.qa();for(;s;){const e=await i._a(s);e&&n._updateProgress(e),s=await t.qa()}const a=await i.complete();return await Hv(e,a.ca,void 0),await function(e,t){const n=Lc(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(a.progress),Promise.resolve(a.ua)}catch(e){return Rc("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await _y(e),i,r)}))}function Cy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const xy=new Map;function Ay(e,t,n){if(!n)throw new Uc(Mc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ny(e,t,n,r){if(!0===t&&!0===r)throw new Uc(Mc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Ry(e){if(!il.isDocumentKey(e))throw new Uc(Mc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Py(e){if(il.isDocumentKey(e))throw new Uc(Mc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Oy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Oc()}function Dy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Uc(Mc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oy(e);throw new Uc(Mc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ly(e,t){if(t<=0)throw new Uc(Mc.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class My{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Uc(Mc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Uc(Mc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ny("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Uc(Mc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Uc(Mc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Uc(Mc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uy{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new My({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Uc(Mc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Uc(Mc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new My(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new jc;switch(e.type){case"firstParty":return new Hc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Uc(Mc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=xy.get(e);t&&(Ac("ComponentProvider","Removing Datastore"),xy.delete(e),t.terminate())}(this),Promise.resolve()}}function Fy(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Dy(e,Uy))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==a&&Rc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ec.MOCK_USER;else{t=Ve(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Uc(Mc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ec(s)}e._authCredentials=new zc(new Vc(t,n))}}class Vy{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vy(this.firestore,e,this._query)}}class jy{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zy(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jy(this.firestore,e,this._key)}}class zy extends Vy{constructor(e,t,n){super(e,t,Lh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jy(this.firestore,null,new il(e))}withConverter(e){return new zy(this.firestore,e,this._path)}}function By(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ot(e),Ay("collection","path",t),e instanceof Uy){const n=tl.fromString(t,...r);return Py(n),new zy(e,null,n)}{if(!(e instanceof jy||e instanceof zy))throw new Uc(Mc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(tl.fromString(t,...r));return Py(n),new zy(e.firestore,null,n)}}function qy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ot(e),1===arguments.length&&(t=Qc.newId()),Ay("doc","path",t),e instanceof Uy){const n=tl.fromString(t,...r);return Ry(n),new jy(e,null,new il(n))}{if(!(e instanceof jy||e instanceof zy))throw new Uc(Mc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(tl.fromString(t,...r));return Ry(n),new jy(e.firestore,e instanceof zy?e.converter:null,new il(n))}}function Hy(e,t){return e=ot(e),t=ot(t),(e instanceof jy||e instanceof zy)&&(t instanceof jy||t instanceof zy)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ky(e,t){return e=ot(e),t=ot(t),e instanceof Vy&&t instanceof Vy&&e.firestore===t.firestore&&qh(e._query,t._query)&&e.converter===t.converter}class Gy{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new wg(this,"async_queue_retry"),this.hu=()=>{const e=vg();e&&Ac("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const e=vg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=vg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise((()=>{}));const t=new Fc;return this.Iu((()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.su.push(e),this.Tu())))}async Tu(){if(0!==this.su.length){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(oA){if(!kl(oA))throw oA;Ac("AsyncQueue","Operation failed with retryable error: "+oA)}this.su.length>0&&this.Yo.$o((()=>this.Tu()))}}Iu(e){const t=this.iu.then((()=>(this.uu=!0,e().catch((e=>{this.au=e,this.uu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Nc("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.uu=!1,e))))));return this.iu=t,t}enqueueAfterDelay(e,t,n){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const r=tv.createAndSchedule(this,e,t,n,(e=>this.Eu(e)));return this._u.push(r),r}Pu(){this.au&&Oc()}verifyOperationInProgress(){}async du(){let e;do{e=this.iu,await e}while(e!==this.iu)}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then((()=>{this._u.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()}))}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function Wy(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Qy{constructor(){this._progressObserver={},this._taskCompletionResolver=new Fc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Yy extends Uy{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Gy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Xy(this),this._firestoreClient.terminate()}}function Jy(e){return e._firestoreClient||Xy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Xy(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Au(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Cy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new dy(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function $y(e,t,n){const r=new Fc;return e.asyncQueue.enqueue((async()=>{try{await fy(e,n),await py(e,t),r.resolve()}catch(e){const n=e;if(!my(n))throw n;Rc("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Zy(e){return function(e){const t=new Fc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Lc(e);Dg(n.remoteStore)||Ac("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Lc(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Oa.get(e)||[];r.push(t),n.Oa.set(e,r)}catch(e){const n=nv(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await _y(e),t))),t.promise}(Jy(e=Dy(e,Yy)))}function ew(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await yy(e),n=await by(e);return t.setNetworkEnabled(!0),function(e){const t=Lc(e);return t.M_.delete(0),Sg(t)}(n)}))}(Jy(e=Dy(e,Yy)))}function tw(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await yy(e),n=await by(e);return t.setNetworkEnabled(!1),async function(e){const t=Lc(e);t.M_.add(0),await Cg(t),t.N_.set("Offline")}(n)}))}(Jy(e=Dy(e,Yy)))}function nw(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Lc(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await wy(e),t)))}(Jy(e=Dy(e,Yy)),t).then((t=>t?new Vy(e,null,t.query):null))}function rw(e){if(e._initialized||e._terminated)throw new Uc(Mc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class iw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iw(_u.fromBase64String(e))}catch(e){throw new Uc(Mc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new iw(_u.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Uc(Mc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class aw{constructor(e){this._methodName=e}}class ow{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Uc(Mc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Uc(Mc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yc(this._lat,e._lat)||Yc(this._long,e._long)}}const cw=/^__.*__$/;class lw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Md(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ld(e,this.data,t,this.fieldTransforms)}}class uw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Md(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oc()}}class dw{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.mu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new dw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.wu(e),r}Su(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Pw(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(hw(this.fu)&&cw.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class fw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||yg(e)}Fu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new dw({fu:e,methodName:t,vu:n,path:rl.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pw(e){const t=e._freezeSettings(),n=yg(e._databaseId);return new fw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mw(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);xw("Data must be an object, but it was:",a,r);const o=Sw(r,a);let c,l;if(s.merge)c=new wu(a.fieldMask),l=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Aw(t,r,n);if(!a.contains(i))throw new Uc(Mc.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Ow(e,i)||e.push(i)}c=new wu(e),l=a.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=a.fieldTransforms;return new lw(new $u(o),c,l)}class gw extends aw{_toFieldTransform(e){if(2!==e.fu)throw 1===e.fu?e.Du("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Du("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gw}}function vw(e,t,n){return new dw({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class yw extends aw{_toFieldTransform(e){return new Ed(e.path,new vd)}isEqual(e){return e instanceof yw}}class ww extends aw{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=vw(this,e,!0),n=this.Mu.map((e=>Ew(e,t))),r=new yd(n);return new Ed(e.path,r)}isEqual(e){return e instanceof ww&&Ze(this.Mu,e.Mu)}}class bw extends aw{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){const t=vw(this,e,!0),n=this.Mu.map((e=>Ew(e,t))),r=new bd(n);return new Ed(e.path,r)}isEqual(e){return e instanceof bw&&Ze(this.Mu,e.Mu)}}class _w extends aw{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){const t=new Id(e.serializer,dd(e.serializer,this.xu));return new Ed(e.path,t)}isEqual(e){return e instanceof _w&&this.xu===e.xu}}function Iw(e,t,n,r){const i=e.Fu(1,t,n);xw("Data must be an object, but it was:",i,r);const s=[],a=$u.empty();hu(r,((e,r)=>{const o=Rw(t,e,n);r=ot(r);const c=i.Su(o);if(r instanceof gw)s.push(o);else{const e=Ew(r,c);null!=e&&(s.push(o),a.set(o,e))}}));const o=new wu(s);return new uw(a,o,i.fieldTransforms)}function kw(e,t,n,r,i,s){const a=e.Fu(1,t,n),o=[Aw(t,r,n)],c=[i];if(s.length%2!=0)throw new Uc(Mc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)o.push(Aw(t,s[d])),c.push(s[d+1]);const l=[],u=$u.empty();for(let d=o.length-1;d>=0;--d)if(!Ow(l,o[d])){const e=o[d];let t=c[d];t=ot(t);const n=a.Su(e);if(t instanceof gw)l.push(e);else{const r=Ew(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new wu(l);return new uw(u,h,a.fieldTransforms)}function Tw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ew(n,e.Fu(r?4:3,t))}function Ew(e,t){if(Cw(e=ot(e)))return xw("Unsupported field value:",t,e),Sw(e,t);if(e instanceof aw)return function(e,t){if(!hw(t.fu))throw t.Du("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Du("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&4!==t.fu)throw t.Du("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ew(i,t.bu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=ot(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return dd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=$c.fromDate(e);return{timestampValue:yf(t.serializer,n)}}if(e instanceof $c){const n=new $c(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:yf(t.serializer,n)}}if(e instanceof ow)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof iw)return{bytesValue:wf(t.serializer,e._byteString)};if(e instanceof jy){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Du("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:If(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Du("Unsupported field value: ".concat(Oy(e)))}(e,t)}function Sw(e,t){const n={};return du(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hu(e,((e,r)=>{const i=Ew(r,t.pu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Cw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof $c||e instanceof ow||e instanceof iw||e instanceof jy||e instanceof aw)}function xw(e,t,n){if(!Cw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Oy(n);throw"an object"===r?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Aw(e,t,n){if((t=ot(t))instanceof sw)return t._internalPath;if("string"==typeof t)return Rw(e,t);throw Pw("Field path arguments must be of type string or ",e,!1,void 0,n)}const Nw=new RegExp("[~\\*/\\[\\]]");function Rw(e,t,n){if(t.search(Nw)>=0)throw Pw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new sw(...t.split("."))._internalPath}catch(r){throw Pw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Pw(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=" in field ".concat(r)),a&&(c+=" in document ".concat(i)),c+=")"),new Uc(Mc.INVALID_ARGUMENT,o+e+c)}function Ow(e,t){return e.some((e=>e.isEqual(t)))}class Dw{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jy(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Lw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Lw extends Dw{data(){return super.data()}}function Mw(e,t){return"string"==typeof t?Rw(e,t):t instanceof sw?t._internalPath:t._delegate._internalPath}function Uw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Uc(Mc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fw{}class Vw extends Fw{}function jw(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Fw&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Bw)).length,n=e.filter((e=>e instanceof zw)).length;if(t>1||t>0&&n>0)throw new Uc(Mc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class zw extends Vw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zw(e,t,n)}_apply(e){const t=this._parse(e);return Jw(e._query,t),new Vy(e.firestore,e.converter,zh(e._query,t))}_parse(e){const t=pw(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Uc(Mc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Yw(a,s);const t=[];for(const n of a)t.push(Qw(r,e,n));o={arrayValue:{values:t}}}else o=Qw(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Yw(a,s),o=Tw(n,t,a,"in"===s||"not-in"===s);return oh.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Bw extends Fw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bw(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ch.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Jw(n,i),n=zh(n,i)}(e._query,t),new Vy(e.firestore,e.converter,zh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class qw extends Vw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qw(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Uc(Mc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Uc(Mc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ih(t,n)}(e._query,this._field,this._direction);return new Vy(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Oh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Hw extends Vw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Hw(e,t,n)}_apply(e){return new Vy(e.firestore,e.converter,Bh(e._query,this._limit,this._limitType))}}class Kw extends Vw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Kw(e,t,n)}_apply(e){const t=Ww(e,this.type,this._docOrFields,this._inclusive);return new Vy(e.firestore,e.converter,function(e,t){return new Oh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Gw extends Vw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Gw(e,t,n)}_apply(e){const t=Ww(e,this.type,this._docOrFields,this._inclusive);return new Vy(e.firestore,e.converter,function(e,t){return new Oh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Ww(e,t,n,r){if(n[0]=ot(n[0]),n[0]instanceof Dw)return function(e,t,n,r,i){if(!r)throw new Uc(Mc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const a of Fh(e))if(a.field.isKeyField())s.push(ju(t,r.key));else{const e=r.data.field(a.field);if(Su(e))throw new Uc(Mc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new Uc(Mc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new th(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=pw(e.firestore);return function(e,t,n,r,i,s){const a=e.explicitOrderBy;if(i.length>a.length)throw new Uc(Mc.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const o=[];for(let c=0;c<i.length;c++){const s=i[c];if(a[c].field.isKeyField()){if("string"!=typeof s)throw new Uc(Mc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Uh(e)&&-1!==s.indexOf("/"))throw new Uc(Mc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(tl.fromString(s));if(!il.isDocumentKey(n))throw new Uc(Mc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new il(n);o.push(ju(t,i))}else{const e=Tw(n,r,s);o.push(e)}}return new th(o,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Qw(e,t,n){if("string"==typeof(n=ot(n))){if(""===n)throw new Uc(Mc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uh(t)&&-1!==n.indexOf("/"))throw new Uc(Mc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(tl.fromString(n));if(!il.isDocumentKey(r))throw new Uc(Mc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ju(e,new il(r))}if(n instanceof jy)return ju(e,n._key);throw new Uc(Mc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Oy(n),"."))}function Yw(e,t){if(!Array.isArray(e)||0===e.length)throw new Uc(Mc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Jw(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Uc(Mc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Uc(Mc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Xw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ou(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Eu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Oc()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return hu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new ow(Tu(e.latitude),Tu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Cu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const t=ku(e);return new $c(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=tl.fromString(e);Dc(Gf(n));const r=new Nu(n.get(1),n.get(3)),i=new il(n.popFirst(5));return r.isEqual(t)||Nc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function $w(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Zw extends Xw{constructor(e){super(),this.firestore=e}convertBytes(e){return new iw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jy(this.firestore,null,t)}}class eb{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tb extends Dw{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new nb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Mw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class nb extends tb{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class rb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new eb(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new nb(this._firestore,this._userDataWriter,n.key,n,new eb(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Uc(Mc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new nb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new eb(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new nb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new eb(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ib(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ib(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oc()}}function sb(e,t){return e instanceof tb&&t instanceof tb?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof rb&&t instanceof rb&&e._firestore===t._firestore&&Ky(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class ab extends Xw{constructor(e){super(),this.firestore=e}convertBytes(e){return new iw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jy(this.firestore,null,t)}}function ob(e){e=Dy(e,jy);const t=Dy(e.firestore,Yy),n=Jy(t),r=new ab(t);return function(e,t){const n=new Fc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Lc(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Uc(Mc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=nv(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await wy(e),t,n))),n.promise}(n,e._key).then((n=>new tb(t,r,e._key,n,new eb(null!==n&&n.hasLocalMutations,!0),e.converter)))}function cb(e){e=Dy(e,Vy);const t=Dy(e.firestore,Yy),n=Jy(t),r=new ab(t);return function(e,t){const n=new Fc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Wm(e,t,!0),i=new Iv(t,r.hs),s=i.da(r.documents),a=i.applyChanges(s,!1);n.resolve(a.snapshot)}catch(e){const r=nv(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await wy(e),t,n))),n.promise}(n,e._query).then((n=>new rb(t,r,e,n)))}function lb(e,t,n){e=Dy(e,jy);const r=Dy(e.firestore,Yy),i=$w(e.converter,t,n);return fb(r,[mw(pw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Cd.none())])}function ub(e,t,n){e=Dy(e,jy);const r=Dy(e.firestore,Yy),i=pw(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),c=3;c<a;c++)o[c-3]=arguments[c];return s="string"==typeof(t=ot(t))||t instanceof sw?kw(i,"updateDoc",e._key,t,n,o):Iw(i,"updateDoc",e._key,t),fb(r,[s.toMutation(e._key,Cd.exists(!0))])}function hb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a;e=ot(e);let o={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||Wy(n[c])||(o=n[c],c++);const l={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Wy(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let u,h,d;if(e instanceof jy)h=Dy(e.firestore,Yy),d=Lh(e._key.path),u={next:t=>{n[c]&&n[c](pb(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Dy(e,Vy);h=Dy(t.firestore,Yy),d=t._query;const r=new ab(h);u={next:e=>{n[c]&&n[c](new rb(h,r,t,e))},error:n[c+1],complete:n[c+2]},Uw(e._query)}return function(e,t,n,r){const i=new cy(r),s=new mv(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>cv(await ky(e),s))),()=>{i.$a(),e.asyncQueue.enqueueAndForget((async()=>lv(await ky(e),s)))}}(Jy(h),d,l,u)}function db(e,t){return function(e,t){const n=new cy(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Lc(e).z_.add(t),t.next()}(await ky(e),n))),()=>{n.$a(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Lc(e).z_.delete(t)}(await ky(e),n)))}}(Jy(e=Dy(e,Yy)),Wy(t)?t:{next:t})}function fb(e,t){return function(e,t){const n=new Fc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ny(e);try{const e=await function(e,t){const n=Lc(e),r=$c.now(),i=t.reduce(((e,t)=>e.add(t.key)),od());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let o=$h(),c=od();return n.os.getEntries(e,i).next((e=>{o=e,o.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,o))).next((i=>{s=i;const a=[];for(const e of t){const t=Od(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Md(e.key,t,Zu(t.value.mapValue),Cd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:td(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.xa[e.currentUser.toKey()];r||(r=new fu(Yc)),r=r.insert(t,n),e.xa[e.currentUser.toKey()]=r}(r,e.batchId,n),await Hv(r,e.changes),await Bg(r.remoteStore)}catch(e){const t=nv(e,"Failed to persist write");n.reject(t)}}(await _y(e),t,n))),n.promise}(Jy(e),t)}function pb(e,t,n){const r=n.docs.get(t._key),i=new ab(e);return new tb(e,i,t._key,r,new eb(n.hasPendingWrites,n.fromCache),t.converter)}const mb={maxAttempts:5};class gb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pw(e)}set(e,t,n){this._verifyNotCommitted();const r=vb(e,this._firestore),i=$w(r.converter,t,n),s=mw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Cd.none())),this}update(e,t,n){this._verifyNotCommitted();const r=vb(e,this._firestore);let i;for(var s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];return i="string"==typeof(t=ot(t))||t instanceof sw?kw(this._dataReader,"WriteBatch.update",r._key,t,n,a):Iw(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Cd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vb(e,this._firestore);return this._mutations=this._mutations.concat(new jd(t._key,Cd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Uc(Mc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vb(e,t){if((e=ot(e)).firestore!==t)throw new Uc(Mc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class yb extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=pw(e)}get(e){const t=vb(e,this._firestore),n=new Zw(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Oc();const r=e[0];if(r.isFoundDocument())return new Dw(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Dw(this._firestore,n,t._key,null,t.converter);throw Oc()}))}set(e,t,n){const r=vb(e,this._firestore),i=$w(r.converter,t,n),s=mw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=vb(e,this._firestore);let i;for(var s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];return i="string"==typeof(t=ot(t))||t instanceof sw?kw(this._dataReader,"Transaction.update",r._key,t,n,a):Iw(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=vb(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vb(e,this._firestore),n=new ab(this._firestore);return super.get(e).then((e=>new tb(this._firestore,n,t._key,e._document,new eb(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Sc=e}(xn),wn(new ct("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new Yy(new Bc(e.getProvider("auth-internal")),new Gc(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Uc(Mc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nu(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a}),"PUBLIC").setMultipleInstances(!0)),Dn(Tc,"4.6.3",e),Dn(Tc,"4.6.3","esm2017")}();function wb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Uc("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function bb(){if("undefined"===typeof Uint8Array)throw new Uc("unimplemented","Uint8Arrays are not available in this environment.")}function _b(){if("undefined"==typeof atob)throw new Uc("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ib{constructor(e){this._delegate=e}static fromBase64String(e){return _b(),new Ib(iw.fromBase64String(e))}static fromUint8Array(e){return bb(),new Ib(iw.fromUint8Array(e))}toBase64(){return _b(),this._delegate.toBase64()}toUint8Array(){return bb(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function kb(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Tb{enableIndexedDbPersistence(e,t){return function(e,t){rw(e=Dy(e,Yy));const n=Jy(e);if(n._uninitializedComponentsProvider)throw new Uc(Mc.FAILED_PRECONDITION,"SDK cache is already specified.");Rc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new ay;return $y(n,i,new iy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){rw(e=Dy(e,Yy));const t=Jy(e);if(t._uninitializedComponentsProvider)throw new Uc(Mc.FAILED_PRECONDITION,"SDK cache is already specified.");Rc("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new ay;return $y(t,r,new sy(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Uc(Mc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Fc;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!wl.D())return Promise.resolve();const t=e+"main";await wl.delete(t)}(Lm(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Eb{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Rc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Fy(this._delegate,e,t,n)}enableNetwork(){return ew(this._delegate)}disableNetwork(){return tw(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Ny("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Zy(this._delegate)}onSnapshotsInSync(e){return db(this._delegate,e)}get app(){if(!this._appCompat)throw new Uc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vb(this,By(this._delegate,e))}catch(oA){throw Rb(oA,"collection()","Firestore.collection()")}}doc(e){try{return new Nb(this,qy(this._delegate,e))}catch(oA){throw Rb(oA,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Mb(this,function(e,t){if(e=Dy(e,Uy),Ay("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Uc(Mc.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Vy(e,null,function(e){return new Oh(tl.emptyPath(),e)}(t))}(this._delegate,e))}catch(oA){throw Rb(oA,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Dy(e,Yy);const r=Object.assign(Object.assign({},mb),n);return function(e){if(e.maxAttempts<1)throw new Uc(Mc.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Fc;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Iy(e);new hy(e.asyncQueue,i,n,t,r).Xa()})),r.promise}(Jy(e),(n=>t(new yb(e,n))),r)}(this._delegate,(t=>e(new Cb(this,t))))}batch(){return Jy(this._delegate),new xb(new gb(this._delegate,(e=>fb(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Jy(e=Dy(e,Yy)),r=new Qy;return Sy(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return nw(this._delegate,e).then((e=>e?new Mb(this,e):null))}}class Sb extends Xw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ib(new iw(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Nb.forKey(t,this.firestore,null)}}class Cb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Sb(e)}get(e){const t=jb(e);return this._delegate.get(t).then((e=>new Db(this._firestore,new tb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=jb(e);return n?(wb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const a=jb(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,n,...i),this}delete(e){const t=jb(e);return this._delegate.delete(t),this}}class xb{constructor(e){this._delegate=e}set(e,t,n){const r=jb(e);return n?(wb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const a=jb(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,n,...i),this}delete(e){const t=jb(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ab{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new nb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lb(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Ab.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new Ab(e,new Sb(e),t),r.set(t,i)),i}}Ab.INSTANCES=new WeakMap;class Nb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Sb(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Uc("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Nb(t,new jy(t._delegate,n,new il(e)))}static forKey(e,t,n){return new Nb(t,new jy(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Vb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vb(this.firestore,By(this._delegate,e))}catch(oA){throw Rb(oA,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=ot(e))instanceof jy&&Hy(this._delegate,e)}set(e,t){t=wb("DocumentReference.set",t);try{return t?lb(this._delegate,e,t):lb(this._delegate,e)}catch(oA){throw Rb(oA,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ub(this._delegate,e):ub(this._delegate,e,t,...r)}catch(oA){throw Rb(oA,"updateDoc()","DocumentReference.update()")}}delete(){return fb(Dy((e=this._delegate).firestore,Yy),[new jd(e._key,Cd.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Pb(t),i=Ob(t,(e=>new Db(this.firestore,new tb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return hb(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ob(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Dy(e,jy);const t=Dy(e.firestore,Yy);return Ty(Jy(t),e._key,{source:"server"}).then((n=>pb(t,e,n)))}(this._delegate):function(e){e=Dy(e,jy);const t=Dy(e.firestore,Yy);return Ty(Jy(t),e._key).then((n=>pb(t,e,n)))}(this._delegate),t.then((e=>new Db(this.firestore,new tb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Nb(this.firestore,e?this._delegate.withConverter(Ab.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Rb(e,t,n){return e.message=e.message.replace(t,n),e}function Pb(e){for(const t of e)if("object"===typeof t&&!kb(t))return t;return{}}function Ob(e,t){var n,r;let i;return i=kb(e[0])?e[0]:kb(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Db{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Nb(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return sb(this._delegate,e._delegate)}}class Lb extends Db{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Oc(),t}}class Mb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Sb(e)}where(e,t,n){try{return new Mb(this.firestore,jw(this._delegate,function(e,t,n){const r=t,i=Mw("where",e);return zw._create(i,r,n)}(e,t,n)))}catch(oA){throw Rb(oA,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Mb(this.firestore,jw(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Mw("orderBy",e);return qw._create(n,t)}(e,t)))}catch(oA){throw Rb(oA,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Mb(this.firestore,jw(this._delegate,(Ly("limit",t=e),Hw._create("limit",t,"F"))))}catch(t){throw Rb(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Mb(this.firestore,jw(this._delegate,(Ly("limitToLast",t=e),Hw._create("limitToLast",t,"L"))))}catch(t){throw Rb(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Mb(this.firestore,jw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Kw._create("startAt",t,!0)}(...arguments)))}catch(oA){throw Rb(oA,"startAt()","Query.startAt()")}}startAfter(){try{return new Mb(this.firestore,jw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Kw._create("startAfter",t,!1)}(...arguments)))}catch(oA){throw Rb(oA,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Mb(this.firestore,jw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gw._create("endBefore",t,!1)}(...arguments)))}catch(oA){throw Rb(oA,"endBefore()","Query.endBefore()")}}endAt(){try{return new Mb(this.firestore,jw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Gw._create("endAt",t,!0)}(...arguments)))}catch(oA){throw Rb(oA,"endAt()","Query.endAt()")}}isEqual(e){return Ky(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?cb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Dy(e,Vy);const t=Dy(e.firestore,Yy),n=Jy(t),r=new ab(t);return Ey(n,e._query,{source:"server"}).then((n=>new rb(t,r,e,n)))}(this._delegate):function(e){e=Dy(e,Vy);const t=Dy(e.firestore,Yy),n=Jy(t),r=new ab(t);return Uw(e._query),Ey(n,e._query).then((n=>new rb(t,r,e,n)))}(this._delegate),t.then((e=>new Fb(this.firestore,new rb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Pb(t),i=Ob(t,(e=>new Fb(this.firestore,new rb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return hb(this._delegate,r,i)}withConverter(e){return new Mb(this.firestore,e?this._delegate.withConverter(Ab.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Ub{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Lb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Fb{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Mb(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Lb(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Ub(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Lb(this._firestore,n))}))}isEqual(e){return sb(this._delegate,e._delegate)}}class Vb extends Mb{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Nb(this.firestore,e):null}doc(e){try{return new Nb(this.firestore,void 0===e?qy(this._delegate):qy(this._delegate,e))}catch(oA){throw Rb(oA,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Dy(e.firestore,Yy),r=qy(e),i=$w(e.converter,t);return fb(n,[mw(pw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Cd.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Nb(this.firestore,e)))}isEqual(e){return Hy(this._delegate,e._delegate)}withConverter(e){return new Vb(this.firestore,e?this._delegate.withConverter(Ab.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jb(e){return Dy(e,jy)}class zb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new sw(...t)}static documentId(){return new zb(rl.keyField().canonicalString())}isEqual(e){return(e=ot(e))instanceof sw&&this._delegate._internalPath.isEqual(e._internalPath)}}class Bb{constructor(e){this._delegate=e}static serverTimestamp(){const e=new yw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Bb(e)}static delete(){const e=new gw("deleteField");return e._methodName="FieldValue.delete",new Bb(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ww("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Bb(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bw("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Bb(e)}static increment(e){const t=new _w("increment",e);return t._methodName="FieldValue.increment",new Bb(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const qb={Firestore:Eb,GeoPoint:ow,Timestamp:$c,Blob:Ib,Transaction:Cb,WriteBatch:xb,DocumentReference:Nb,DocumentSnapshot:Db,Query:Mb,QueryDocumentSnapshot:Lb,QuerySnapshot:Fb,CollectionReference:Vb,FieldPath:zb,FieldValue:Bb,setLogLevel:function(e){var t;t=e,Cc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ct("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},qb)))}(e,((e,t)=>new Eb(e,t,new Tb))),e.registerVersion("@firebase/firestore-compat","0.3.32")}(Zn);function Hb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Kb=Hb,Gb=new Je("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Wb=new yt("@firebase/auth");function Qb(e){if(Wb.logLevel<=ft.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wb.error("Auth (".concat(xn,"): ").concat(e),...n)}}function Yb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Zb(e,...n)}function Jb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zb(e,...n)}function Xb(e,t,n){const r=Object.assign(Object.assign({},Kb()),{[t]:n});return new Je("auth","Firebase",r).create(t,{appName:e.name})}function $b(e){return Xb(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Gb.create(e,...n)}function e_(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Zb(t,...r)}}function t_(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Qb(t),new Error(t)}function n_(e,t){e||t_(t)}function r_(){return"http:"===i_()||"https:"===i_()}function i_(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class s_{constructor(e,t){this.shortDelay=e,this.longDelay=t,n_(t>e,"Short delay should be less than long delay!"),this.isMobile=ze()||Ke()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(r_()||He()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function a_(e,t){n_(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class o_{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void t_("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void t_("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void t_("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const c_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},l_=new s_(3e4,6e4);function u_(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function h_(e,t,n,r){return d_(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=tt(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),o_.fetch()(p_(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))}))}async function d_(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},c_),t);try{const t=new g_(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw v_(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw v_(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw v_(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw v_(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Xb(e,o,a);Yb(e,o)}}catch(oA){if(oA instanceof Ye)throw oA;Yb(e,"network-request-failed",{message:String(oA)})}}async function f_(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await h_(e,t,n,r,i);return"mfaPendingCredential"in s&&Yb(e,"multi-factor-auth-required",{_serverResponse:s}),s}function p_(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?a_(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function m_(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class g_{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Jb(this.auth,"network-request-failed"))),l_.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function v_(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Jb(e,t,r);return i.customData._tokenResponse=n,i}function y_(e){return void 0!==e&&void 0!==e.enterprise}class w_{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return m_(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function b_(e,t){return h_(e,"GET","/v2/recaptchaConfig",u_(e,t))}async function __(e,t){return h_(e,"POST","/v1/accounts:lookup",t)}function I_(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(oA){}}function k_(e){return 1e3*Number(e)}function T_(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Qb("JWT malformed, contained fewer than 3 sections"),null;try{const e=Pe(n);return e?JSON.parse(e):(Qb("Failed to decode base64 JWT payload"),null)}catch(oA){return Qb("Caught error parsing JWT payload as JSON",null===oA||void 0===oA?void 0:oA.toString()),null}}function E_(e){const t=T_(e);return e_(t,"internal-error"),e_("undefined"!==typeof t.exp,"internal-error"),e_("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function S_(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(oA){throw oA instanceof Ye&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(oA)&&e.auth.currentUser===e&&await e.auth.signOut(),oA}}class C_{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(oA){return void((null===oA||void 0===oA?void 0:oA.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class x_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=I_(this.lastLoginAt),this.creationTime=I_(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function A_(e){var t;const n=e.auth,r=await e.getIdToken(),i=await S_(e,__(n,{idToken:r}));e_(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?N_(s.providerUserInfo):[],o=(c=e.providerData,l=a,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new x_(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function N_(e){return e.map((e=>{var{providerId:t}=e,n=er(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class R_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){e_(e.idToken,"internal-error"),e_("undefined"!==typeof e.idToken,"internal-error"),e_("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):E_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){e_(0!==e.length,"internal-error");const t=E_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(e_(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await d_(e,{},(async()=>{const n=tt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=p_(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",o_.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new R_;return n&&(e_("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(e_("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(e_("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new R_,this.toJSON())}_performRefresh(){return t_("not implemented")}}function P_(e,t){e_("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class O_{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=er(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new x_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await S_(this,this.stsTokenManager.getToken(this.auth,e));return e_(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=ot(e),r=await n.getIdToken(t),i=T_(r);e_(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:I_(k_(i.auth_time)),issuedAtTime:I_(k_(i.iat)),expirationTime:I_(k_(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=ot(e);await A_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(e_(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new O_(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){e_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await A_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject($b(this.auth));const e=await this.getIdToken();return await S_(this,async function(e,t){return h_(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;e_(y&&I,e,"internal-error");const k=R_.fromJSON(this.name,I);e_("string"===typeof y,e,"internal-error"),P_(u,e.name),P_(h,e.name),e_("boolean"===typeof w,e,"internal-error"),e_("boolean"===typeof b,e,"internal-error"),P_(d,e.name),P_(f,e.name),P_(p,e.name),P_(m,e.name),P_(g,e.name),P_(v,e.name);const T=new O_({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new R_;r.updateFromServerResponse(t);const i=new O_({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await A_(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];e_(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?N_(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new R_;a.updateFromIdToken(n);const o=new O_({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new x_(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,c),o}}const D_=new Map;function L_(e){n_(e instanceof Function,"Expected a class definition");let t=D_.get(e);return t?(n_(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,D_.set(e,t),t)}class M_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}M_.type="NONE";const U_=M_;function F_(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class V_{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=F_(this.userKey,r.apiKey,i),this.fullPersistenceKey=F_("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?O_._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new V_(L_(U_),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||L_(U_);const s=F_(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(s);if(t){const n=O_._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(c){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new V_(i,e,n)):new V_(i,e,n)}}function j_(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(H_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(z_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(G_(t))return"Blackberry";if(W_(t))return"Webos";if(B_(t))return"Safari";if((t.includes("chrome/")||q_(t))&&!t.includes("edge/"))return"Chrome";if(K_(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function z_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/firefox\//i.test(e)}function B_(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:je()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function q_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/crios\//i.test(e)}function H_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/iemobile/i.test(e)}function K_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/android/i.test(e)}function G_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/blackberry/i.test(e)}function W_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/webos/i.test(e)}function Q_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Y_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je();return Q_(e)||K_(e)||W_(e)||G_(e)||/windows phone/i.test(e)||H_(e)}function J_(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=j_(je());break;case"Worker":t="".concat(j_(je()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xn,"/").concat(r)}class X_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(oA){r(oA)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(oA){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===oA||void 0===oA?void 0:oA.message})}}}class $_{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Z_{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tI(this),this.idTokenSubscription=new tI(this),this.beforeStateQueue=new X_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=L_(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await V_.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(oA){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await __(this,{idToken:e}),n=await O_._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(kn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(oA){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(oA)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return e_(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(oA){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await A_(e)}catch(oA){if((null===oA||void 0===oA?void 0:oA.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject($b(this));const t=e?ot(e):null;return t&&e_(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&e_(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return kn(this.app)?Promise.reject($b(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject($b(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(L_(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return h_(e,"GET","/v2/passwordPolicy",u_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new $_(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Je("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return h_(e,"POST","/v2/accounts:revokeToken",u_(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&L_(e)||this._popupRedirectResolver;e_(t,this,"argument-error"),this.redirectPersistenceManager=await V_.create(this,[L_(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(e_(a,this,"internal-error"),a.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return e_(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Wb.logLevel<=ft.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wb.warn("Auth (".concat(xn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function eI(e){return ot(e)}class tI{constructor(e){this.auth=e,this.observer=null,this.addObserver=it((e=>this.observer=e))}get next(){return e_(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let nI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rI(e){return nI.loadJS(e)}function iI(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class sI{constructor(e){this.type="recaptcha-enterprise",this.auth=eI(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;y_(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{b_(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new w_(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&y_(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=nI.recaptchaEnterpriseScript;0!==t.length&&(t+=i),rI(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function aI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new sI(e);let s;try{s=await i.verify(n)}catch(o){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function oI(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await aI(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await aI(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}class cI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return t_("not implemented")}_getIdTokenResponse(e){return t_("not implemented")}_linkToIdToken(e,t){return t_("not implemented")}_getReauthenticationResolver(e){return t_("not implemented")}}async function lI(e,t){return h_(e,"POST","/v1/accounts:signUp",t)}async function uI(e,t){return f_(e,"POST","/v1/accounts:signInWithPassword",u_(e,t))}class hI extends cI{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new hI(e,t,"password")}static _fromEmailAndCode(e,t){return new hI(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return oI(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",uI);case"emailLink":return async function(e,t){return f_(e,"POST","/v1/accounts:signInWithEmailLink",u_(e,t))}(e,{email:this._email,oobCode:this._password});default:Yb(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return oI(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lI);case"emailLink":return async function(e,t){return f_(e,"POST","/v1/accounts:signInWithEmailLink",u_(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Yb(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function dI(e,t){return f_(e,"POST","/v1/accounts:signInWithIdp",u_(e,t))}class fI extends cI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fI(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yb("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=er(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new fI(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return dI(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,dI(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,dI(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tt(t)}return e}}const pI={USER_NOT_FOUND:"user-not-found"};class mI extends cI{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new mI({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new mI({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return f_(e,"POST","/v1/accounts:signInWithPhoneNumber",u_(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await f_(e,"POST","/v1/accounts:signInWithPhoneNumber",u_(e,t));if(n.temporaryProof)throw v_(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return f_(e,"POST","/v1/accounts:signInWithPhoneNumber",u_(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),pI)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new mI({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class gI{constructor(e){var t,n,r,i,s,a;const o=nt(rt(e)),c=null!==(t=o.apiKey)&&void 0!==t?t:null,l=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);e_(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=nt(rt(e)).link,n=t?nt(rt(t)).deep_link_id:null,r=nt(rt(e)).deep_link_id;return(r?nt(rt(r)).link:null)||r||n||t||e}(e);try{return new gI(t)}catch(n){return null}}}class vI{constructor(){this.providerId=vI.PROVIDER_ID}static credential(e,t){return hI._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=gI.parseLink(t);return e_(n,"argument-error"),hI._fromEmailAndCode(e,n.code,n.tenantId)}}vI.PROVIDER_ID="password",vI.EMAIL_PASSWORD_SIGN_IN_METHOD="password",vI.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wI extends yI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class bI extends wI{constructor(){super("facebook.com")}static credential(e){return fI._fromParams({providerId:bI.PROVIDER_ID,signInMethod:bI.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bI.credentialFromTaggedObject(e)}static credentialFromError(e){return bI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return bI.credential(t.oauthAccessToken)}catch(n){return null}}}bI.FACEBOOK_SIGN_IN_METHOD="facebook.com",bI.PROVIDER_ID="facebook.com";class _I extends wI{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fI._fromParams({providerId:_I.PROVIDER_ID,signInMethod:_I.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _I.credentialFromTaggedObject(e)}static credentialFromError(e){return _I.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return _I.credential(n,r)}catch(i){return null}}}_I.GOOGLE_SIGN_IN_METHOD="google.com",_I.PROVIDER_ID="google.com";class II extends wI{constructor(){super("github.com")}static credential(e){return fI._fromParams({providerId:II.PROVIDER_ID,signInMethod:II.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return II.credentialFromTaggedObject(e)}static credentialFromError(e){return II.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return II.credential(t.oauthAccessToken)}catch(n){return null}}}II.GITHUB_SIGN_IN_METHOD="github.com",II.PROVIDER_ID="github.com";class kI extends wI{constructor(){super("twitter.com")}static credential(e,t){return fI._fromParams({providerId:kI.PROVIDER_ID,signInMethod:kI.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return kI.credentialFromTaggedObject(e)}static credentialFromError(e){return kI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return kI.credential(n,r)}catch(i){return null}}}kI.TWITTER_SIGN_IN_METHOD="twitter.com",kI.PROVIDER_ID="twitter.com";class TI{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await O_._fromIdTokenResponse(e,n,r),s=EI(n);return new TI({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=EI(n);return new TI({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function EI(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class SI extends Ye{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,SI.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new SI(e,t,n,r)}}function CI(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw SI._fromErrorAndOperation(e,n,t,r);throw n}))}async function xI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await S_(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return TI._forOperation(e,"link",r)}async function AI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(kn(r.app))return Promise.reject($b(r));const i="reauthenticate";try{const s=await S_(e,CI(r,i,t,e),n);e_(s.idToken,r,"internal-error");const a=T_(s.idToken);e_(a,r,"internal-error");const{sub:o}=a;return e_(e.uid===o,r,"user-mismatch"),TI._forOperation(e,i,s)}catch(oA){throw(null===oA||void 0===oA?void 0:oA.code)==="auth/".concat("user-not-found")&&Yb(r,"user-mismatch"),oA}}async function NI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(kn(e.app))return Promise.reject($b(e));const r="signIn",i=await CI(e,r,t),s=await TI._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const RI="__sak";class PI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(RI,"1"),this.storage.removeItem(RI),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class OI extends PI{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=je();return B_(e)||Q_(e)}()&&function(){try{return!(!window||window===window.top)}catch(oA){return!1}}(),this.fallbackToPolling=Y_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ge()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}OI.type="LOCAL";class DI extends PI{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}DI.type="SESSION";class LI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new LI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function MI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}LI.receivers=[];class UI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const c=MI("",20);r.port1.start();const l=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(l),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function FI(){return window}function VI(){return"undefined"!==typeof FI().WorkerGlobalScope&&"function"===typeof FI().importScripts}const jI="firebaseLocalStorageDb",zI="firebaseLocalStorage",BI="fbase_key";class qI{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function HI(e,t){return e.transaction([zI],t?"readwrite":"readonly").objectStore(zI)}function KI(){const e=indexedDB.open(jI,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(zI,{keyPath:BI})}catch(oA){n(oA)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(zI)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(jI);return new qI(e).toPromise()}(),t(await KI()))}))}))}async function GI(e,t,n){const r=HI(e,!0).put({[BI]:t,value:n});return new qI(r).toPromise()}function WI(e,t){const n=HI(e,!0).delete(t);return new qI(n).toPromise()}class QI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await KI()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(oA){if(t++>3)throw oA;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=LI._getInstance(VI()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new UI(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await KI();return await GI(e,RI,"1"),await WI(e,RI),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>GI(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=HI(e,!1).get(t),r=await new qI(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>WI(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=HI(e,!1).getAll();return new qI(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}QI.type="LOCAL";iI("rcb"),new s_(3e4,6e4);const YI="recaptcha";async function JI(e,t,n){var r;const i=await n.verify();try{let s;if(e_("string"===typeof i,e,"argument-error"),e_(n.type===YI,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){e_("enroll"===t.type,e,"internal-error");const n=await function(e,t){return h_(e,"POST","/v2/accounts/mfaEnrollment:start",u_(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{e_("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;e_(n,e,"missing-multi-factor-info");const a=await function(e,t){return h_(e,"POST","/v2/accounts/mfaSignIn:start",u_(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return h_(e,"POST","/v1/accounts:sendVerificationCode",u_(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class XI{constructor(e){this.providerId=XI.PROVIDER_ID,this.auth=eI(e)}verifyPhoneNumber(e,t){return JI(this.auth,e,ot(t))}static credential(e,t){return mI._fromVerification(e,t)}static credentialFromResult(e){const t=e;return XI.credentialFromTaggedObject(t)}static credentialFromError(e){return XI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?mI._fromTokenResponse(n,r):null}}XI.PROVIDER_ID="phone",XI.PHONE_SIGN_IN_METHOD="phone";class $I extends cI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dI(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ZI(e){return NI(e.auth,new $I(e),e.bypassAuthState)}function ek(e){const{auth:t,user:n}=e;return e_(n,t,"internal-error"),AI(n,new $I(e),e.bypassAuthState)}async function tk(e){const{auth:t,user:n}=e;return e_(n,t,"internal-error"),xI(n,new $I(e),e.bypassAuthState)}class nk{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(oA){this.reject(oA)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(oA){this.reject(oA)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZI;case"linkViaPopup":case"linkViaRedirect":return tk;case"reauthViaPopup":case"reauthViaRedirect":return ek;default:Yb(this.auth,"internal-error")}}resolve(e){n_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){n_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rk=new s_(2e3,1e4);class ik extends nk{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,ik.currentPopupAction&&ik.currentPopupAction.cancel(),ik.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return e_(e,this.auth,"internal-error"),e}async onExecution(){n_(1===this.filter.length,"Popup operations only handle one event");const e=MI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Jb(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Jb(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ik.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Jb(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,rk.get())};e()}}ik.currentPopupAction=null;new Map;new s_(3e4,6e4);new s_(5e3,15e3),new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);encodeURIComponent("fac");var sk="@firebase/auth",ak="1.7.3";class ok{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){e_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}Ue("authIdTokenMaxAge");!function(e){nI=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Jb("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function(e){wn(new ct("auth",((t,n)=>{let{options:r}=n;const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),a=t.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;e_(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:c,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J_(e)},u=new Z_(i,s,a,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(L_);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,r),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),wn(new ct("auth-internal",(e=>(e=>new ok(e))(eI(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(sk,ak,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(e)),Dn(sk,ak,"esm2017")}("Browser");const ck="firebasestorage.googleapis.com",lk="storageBucket";class uk extends Ye{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(fk(e),"Firebase Storage: ".concat(t," (").concat(fk(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,uk.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fk(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var hk,dk;function fk(e){return"storage/"+e}function pk(){return new uk(hk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function mk(){return new uk(hk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gk(){return new uk(hk.CANCELED,"User canceled the upload/download.")}function vk(){return new uk(hk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yk(e){return new uk(hk.INVALID_ARGUMENT,e)}function wk(){return new uk(hk.APP_DELETED,"The Firebase app was deleted.")}function bk(e){return new uk(hk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _k(e,t){return new uk(hk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ik(e){throw new uk(hk.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(hk||(hk={}));class kk{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=kk.makeFromUrl(e,t)}catch(oA){return new kk(e,"")}if(""===n.path)return n;throw r=e,new uk(hk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===ck?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let c=0;c<o.length;c++){const t=o[c],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new kk(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new uk(hk.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Tk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Ek(e){return"string"===typeof e||e instanceof String}function Sk(e){return Ck()&&e instanceof Blob}function Ck(){return"undefined"!==typeof Blob}function xk(e,t,n,r){if(r<t)throw yk("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw yk("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Ak(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Nk(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Rk(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(dk||(dk={}));class Pk{constructor(e,t,n,r,i,s,a,o,c,l,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Ok(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===dk.NO_ERROR,i=n.getStatus();if(!t||Rk(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===dk.ABORT;return void e(!1,new Ok(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Ok(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(oA){r(oA)}else if(null!==i){const e=pk();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?wk():gk())}else{r(mk())}};this.canceled_?t(0,new Ok(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function c(){return 2===o}let l=!1;function u(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,c())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(c()||a)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),l||(null!==i?(e||(o=2),clearTimeout(i),h(0)):e||(o=1)))}return h(0),s=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Ok{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Dk(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Lk(){const e=Dk();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Ck())return new Blob(n);throw new uk(hk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Mk(e){if("undefined"===typeof atob)throw t="base-64",new uk(hk.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Uk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Fk{constructor(e,t){this.data=e,this.contentType=t||null}}function Vk(e,t){switch(e){case Uk.RAW:return new Fk(jk(t));case Uk.BASE64:case Uk.BASE64URL:return new Fk(zk(e,t));case Uk.DATA_URL:return new Fk(function(e){const t=new Bk(e);return t.base64?zk(Uk.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(oA){throw _k(Uk.DATA_URL,"Malformed data URL.")}return jk(t)}(t.rest)}(t),new Bk(t).contentType)}throw pk()}function jk(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function zk(e,t){switch(e){case Uk.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw _k(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Uk.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw _k(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Mk(t)}catch(oA){if(oA.message.includes("polyfill"))throw oA;throw _k(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Bk{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw _k(Uk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class qk{constructor(e,t){let n=0,r="";Sk(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Sk(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new qk(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new qk(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Ck()){const e=t.map((e=>e instanceof qk?e.data_:e));return new qk(Lk.apply(null,e))}{const e=t.map((e=>Ek(e)?Vk(Uk.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new qk(r,!0)}}uploadData(){return this.data_}}function Hk(e){let t;try{t=JSON.parse(e)}catch(oA){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Kk(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Gk(e,t){return t}class Wk{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Gk}}let Qk=null;function Yk(){if(Qk)return Qk;const e=[];e.push(new Wk("bucket")),e.push(new Wk("generation")),e.push(new Wk("metageneration")),e.push(new Wk("name","fullPath",!0));const t=new Wk("name");t.xform=function(e,t){return function(e){return!Ek(e)||e.length<2?e:Kk(e)}(t)},e.push(t);const n=new Wk("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Wk("timeCreated")),e.push(new Wk("updated")),e.push(new Wk("md5Hash",null,!0)),e.push(new Wk("cacheControl",null,!0)),e.push(new Wk("contentDisposition",null,!0)),e.push(new Wk("contentEncoding",null,!0)),e.push(new Wk("contentLanguage",null,!0)),e.push(new Wk("contentType",null,!0)),e.push(new Wk("metadata","customMetadata",!0)),Qk=e,Qk}function Jk(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new kk(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Xk(e,t,n){const r=Hk(t);if(null===r)return null;return Jk(e,r,n)}function $k(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const Zk="prefixes",eT="items";function tT(e,t,n){const r=Hk(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Zk])for(const i of n[Zk]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new kk(t,n));r.prefixes.push(s)}if(n[eT])for(const i of n[eT]){const n=e._makeStorageReference(new kk(t,i.name));r.items.push(n)}return r}(e,t,r)}class nT{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function rT(e){if(!e)throw pk()}function iT(e,t){return function(n,r){const i=Xk(e,r,t);return rT(null!==i),i}}function sT(e,t){return function(n,r){const i=Xk(e,r,t);return rT(null!==i),function(e,t,n,r){const i=Hk(t);if(null===i)return null;if(!Ek(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return Ak("/b/"+a(i)+"/o/"+a(s),n,r)+Nk({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function aT(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new uk(hk.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new uk(hk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new uk(hk.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new uk(hk.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function oT(e){const t=aT(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new uk(hk.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function cT(e,t,n){const r=Ak(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new nT(r,"GET",iT(e,n),i);return s.errorHandler=oT(t),s}function lT(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Ak(t.bucketOnlyServerUrl(),e.host,e._protocol),o=e.maxOperationRetryTime,c=new nT(a,"GET",function(e,t){return function(n,r){const i=tT(e,t,r);return rT(null!==i),i}}(e,t.bucket),o);return c.urlParams=s,c.errorHandler=aT(t),c}function uT(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function hT(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const c=uT(t,r,i),l="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$k(c,n)+"\r\n--"+o+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",u="\r\n--"+o+"--",h=qk.getBlob(l,r,u);if(null===h)throw vk();const d={name:c.fullPath},f=Ak(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new nT(f,"POST",iT(e,n),p);return m.urlParams=d,m.headers=a,m.body=h.uploadData(),m.errorHandler=aT(t),m}class dT{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function fT(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(oA){rT(!1)}return rT(!!n&&-1!==(t||["active"]).indexOf(n)),n}const pT=262144;function mT(e,t,n,r,i,s,a,o){const c=new dT(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new uk(hk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const l=c.total-c.current;let u=l;i>0&&(u=Math.min(u,i));const h=c.current,d=h+u;let f="";f=0===u?"finalize":l===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(c.current)},m=r.slice(h,d);if(null===m)throw vk();const g=t.maxUploadRetryTime,v=new nT(n,"POST",(function(e,n){const i=fT(e,["active","final"]),a=c.current+u,o=r.size();let l;return l="final"===i?iT(t,s)(e,n):null,new dT(a,o,"final"===i,l)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=o||null,v.errorHandler=aT(e),v}const gT={STATE_CHANGED:"state_changed"},vT={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yT(e){switch(e){case"running":case"pausing":case"canceling":return vT.RUNNING;case"paused":return vT.PAUSED;case"success":return vT.SUCCESS;case"canceled":return vT.CANCELED;default:return vT.ERROR}}class wT{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function bT(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let _T=null;class IT{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=dk.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=dk.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=dk.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Ik("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ik("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ik("cannot .getStatus() before sending");try{return this.xhr_.status}catch(oA){return-1}}getResponse(){if(!this.sent_)throw Ik("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ik("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class kT extends IT{initXhr(){this.xhr_.responseType="text"}}function TT(){return _T?_T():new kT}class ET{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Yk(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(hk.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(Rk(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=mk()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(hk.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a=uT(t,r,i),o={name:a.fullPath},c=Ak(s,e.host,e._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},u=$k(a,n),h=e.maxUploadRetryTime,d=new nT(c,"POST",(function(e){let t;fT(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(oA){rT(!1)}return rT(Ek(t)),t}),h);return d.urlParams=o,d.headers=l,d.body=u,d.errorHandler=aT(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,TT,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new nT(n,"POST",(function(e){const t=fT(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(oA){rT(!1)}n||rT(!1);const i=Number(n);return rT(!isNaN(i)),new dT(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=aT(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,TT,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=pT*this._chunkMultiplier,t=new dT(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=mT(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(oA){return this._error=oA,void this._transition("error")}const a=this._ref.storage._makeRequest(s,TT,r,i,!1);this._request=a,a.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(pT*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=cT(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,TT,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=hT(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,TT,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=gk(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=yT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new wT(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(yT(this._state)){case vT.SUCCESS:bT(this._resolve.bind(null,this.snapshot))();break;case vT.CANCELED:case vT.ERROR:bT(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(yT(this._state)){case vT.RUNNING:case vT.PAUSED:e.next&&bT(e.next.bind(e,this.snapshot))();break;case vT.SUCCESS:e.complete&&bT(e.complete.bind(e))();break;default:e.error&&bT(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ST{constructor(e,t){this._service=e,this._location=t instanceof kk?t:kk.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ST(e,t)}get root(){const e=new kk(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Kk(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new kk(this._location.bucket,e);return new ST(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw bk(e)}}function CT(e){const t={prefixes:[],items:[]};return xT(e,t).then((()=>t))}async function xT(e,t,n){const r={pageToken:n},i=await AT(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await xT(e,t,i.nextPageToken)}function AT(e,t){null!=t&&"number"===typeof t.maxResults&&xk("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=lT(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,TT)}function NT(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=Ak(t.fullServerUrl(),e.host,e._protocol),s=$k(n,r),a=e.maxOperationRetryTime,o=new nT(i,"PATCH",iT(e,r),a);return o.headers={"Content-Type":"application/json; charset=utf-8"},o.body=s,o.errorHandler=oT(t),o}(e.storage,e._location,t,Yk());return e.storage.makeRequestWithTokens(n,TT)}function RT(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Ak(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new nT(r,"GET",sT(e,n),i);return s.errorHandler=oT(t),s}(e.storage,e._location,Yk());return e.storage.makeRequestWithTokens(t,TT).then((e=>{if(null===e)throw new uk(hk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function PT(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Ak(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new nT(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=oT(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,TT)}function OT(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new kk(e._location.bucket,n);return new ST(e.storage,r)}function DT(e,t){if(e instanceof UT){const n=e;if(null==n._bucket)throw new uk(hk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lk+"' property when initializing the app?");const r=new ST(n,n._bucket);return null!=t?DT(r,t):r}return void 0!==t?OT(e,t):e}function LT(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof UT)return new ST(e,t);throw yk("To use ref(service, url), the first argument must be a Storage instance.")}return DT(e,t)}function MT(e,t){const n=null===t||void 0===t?void 0:t[lk];return null==n?null:kk.makeFromBucketSpec(n,e)}class UT{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=ck,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?kk.makeFromBucketSpec(r,this._host):MT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=kk.makeFromBucketSpec(this._url,e):this._bucket=MT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ST(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Tk(wk());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=Nk(e.urlParams),c=e.url+o,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,r),new Pk(c,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const FT="@firebase/storage",VT="0.12.5",jT="storage";function zT(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new ET(e,new qk(t),n)}(e=ot(e),t,n)}function BT(e){return function(e){e._throwIfRoot("getMetadata");const t=cT(e.storage,e._location,Yk());return e.storage.makeRequestWithTokens(t,TT)}(e=ot(e))}function qT(e,t){return LT(e=ot(e),t)}function HT(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Ve(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function KT(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new UT(r,i,s,n,xn)}wn(new ct(jT,KT,"PUBLIC").setMultipleInstances(!0)),Dn(FT,VT,""),Dn(FT,VT,"esm2017");class GT{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class WT{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new GT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new GT(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new GT(e,this,this._ref)):{next:t.next?e=>t.next(new GT(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class QT{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new YT(e,this._service)))}get items(){return this._delegate.items.map((e=>new YT(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class YT{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return OT(e,t)}(this._delegate,e);return new YT(t,this.storage)}get root(){return new YT(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new YT(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new WT(zT(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uk.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=Vk(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new WT(new ET(this._delegate,new qk(r.data,!0),i),this)}listAll(){return function(e){return CT(e=ot(e))}(this._delegate).then((e=>new QT(e,this.storage)))}list(e){return function(e,t){return AT(e=ot(e),t)}(this._delegate,e||void 0).then((e=>new QT(e,this.storage)))}getMetadata(){return BT(this._delegate)}updateMetadata(e){return function(e,t){return NT(e=ot(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return RT(e=ot(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return PT(e=ot(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw bk(e)}}class JT{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(XT(e))throw yk("ref() expected a child path but got a URL, use refFromURL instead.");return new YT(qT(this._delegate,e),this)}refFromURL(e){if(!XT(e))throw yk("refFromURL() expected a full URL but got a child path, use ref() instead.");try{kk.makeFromUrl(e,this._delegate.host)}catch(oA){throw yk("refFromUrl() expected a valid full URL but got an invalid one.")}return new YT(qT(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};HT(this._delegate,e,t,n)}}function XT(e){return/^[A-Za-z]+:\/\//.test(e)}function $T(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new JT(r,i)}!function(e){const t={TaskState:vT,TaskEvent:gT,StringFormat:Uk,Storage:JT,Reference:YT};e.INTERNAL.registerComponent(new ct("storage-compat",$T,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.8")}(Zn);Zn.initializeApp({apiKey:"AIzaSyD0Oo4mvrnSRI17nZrApjsKxVPsctmTBtw",authDomain:"nwitter-17a21.firebaseapp.com",projectId:"nwitter-17a21",storageBucket:"nwitter-17a21.appspot.com",messagingSenderId:"16609093550",appId:"1:16609093550:web:cfdc110ea696f0be7d8a3f"});const ZT=Zn,eE=Zn.auth(),tE=Zn.firestore(),nE=Zn.storage();var rE=n(579);const iE=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)(!0),[o,c]=(0,r.useState)(""),l=e=>{const{target:{name:n,value:r}}=e;"email"===n?t(r):"password"===n&&i(r)};return(0,rE.jsxs)(rE.Fragment,{children:[(0,rE.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{let t;t=s?await eE.createUserWithEmailAndPassword(e,n):await eE.signInWithEmailAndPassword(e,n)}catch(o){c(o.message)}},className:"container",children:[(0,rE.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:e,onChange:l,className:"authInput"}),(0,rE.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:n,onChange:l,className:"authInput"}),(0,rE.jsx)("input",{type:"submit",value:s?"Create Account":"Log In",className:"authInput authSubmit"}),o&&(0,rE.jsx)("span",{className:"authError",children:o})]}),(0,rE.jsx)("span",{onClick:()=>a((e=>!e)),className:"authSwitch",children:s?"Sign in":"Create Account"})]})};function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sE(Object(n),!0).forEach((function(t){lE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oE(e){return oE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oE(e)}function cE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);a=!0);}catch(c){o=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return s}(e,t)||dE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hE(e){return function(e){if(Array.isArray(e))return fE(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||dE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dE(e,t){if(e){if("string"===typeof e)return fE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fE(e,t):void 0}}function fE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pE=function(){},mE={},gE={},vE=null,yE={mark:pE,measure:pE};try{"undefined"!==typeof window&&(mE=window),"undefined"!==typeof document&&(gE=document),"undefined"!==typeof MutationObserver&&(vE=MutationObserver),"undefined"!==typeof performance&&(yE=performance)}catch(oA){}var wE,bE,_E,IE,kE,TE=(mE.navigator||{}).userAgent,EE=void 0===TE?"":TE,SE=mE,CE=gE,xE=vE,AE=yE,NE=(SE.document,!!CE.documentElement&&!!CE.head&&"function"===typeof CE.addEventListener&&"function"===typeof CE.createElement),RE=~EE.indexOf("MSIE")||~EE.indexOf("Trident/"),PE="___FONT_AWESOME___",OE=16,DE="fa",LE="svg-inline--fa",ME="data-fa-i2svg",UE="data-fa-pseudo-element",FE="data-fa-pseudo-element-pending",VE="data-prefix",jE="data-icon",zE="fontawesome-i2svg",BE="async",qE=["HTML","HEAD","STYLE","SCRIPT"],HE=function(){try{return!0}catch(oA){return!1}}(),KE="classic",GE="sharp",WE=[KE,GE];function QE(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e[KE]}})}var YE=QE((lE(wE={},KE,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),lE(wE,GE,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),wE)),JE=QE((lE(bE={},KE,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),lE(bE,GE,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),bE)),XE=QE((lE(_E={},KE,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),lE(_E,GE,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),_E)),$E=QE((lE(IE={},KE,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),lE(IE,GE,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),IE)),ZE=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,eS="fa-layers-text",tS=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,nS=QE((lE(kE={},KE,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),lE(kE,GE,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),kE)),rS=[1,2,3,4,5,6,7,8,9,10],iS=rS.concat([11,12,13,14,15,16,17,18,19,20]),sS=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],aS={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},oS=new Set;Object.keys(JE[KE]).map(oS.add.bind(oS)),Object.keys(JE[GE]).map(oS.add.bind(oS));var cS=[].concat(WE,hE(oS),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",aS.GROUP,aS.SWAP_OPACITY,aS.PRIMARY,aS.SECONDARY]).concat(rS.map((function(e){return"".concat(e,"x")}))).concat(iS.map((function(e){return"w-".concat(e)}))),lS=SE.FontAwesomeConfig||{};if(CE&&"function"===typeof CE.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=uE(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=CE.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(lS[r]=i)}))}var uS={styleDefault:"solid",familyDefault:"classic",cssPrefix:DE,replacementClass:LE,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};lS.familyPrefix&&(lS.cssPrefix=lS.familyPrefix);var hS=aE(aE({},uS),lS);hS.autoReplaceSvg||(hS.observeMutations=!1);var dS={};Object.keys(uS).forEach((function(e){Object.defineProperty(dS,e,{enumerable:!0,set:function(t){hS[e]=t,fS.forEach((function(e){return e(dS)}))},get:function(){return hS[e]}})})),Object.defineProperty(dS,"familyPrefix",{enumerable:!0,set:function(e){hS.cssPrefix=e,fS.forEach((function(e){return e(dS)}))},get:function(){return hS.cssPrefix}}),SE.FontAwesomeConfig=dS;var fS=[];var pS=OE,mS={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var gS="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function vS(){for(var e=12,t="";e-- >0;)t+=gS[62*Math.random()|0];return t}function yS(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function wS(e){return e.classList?yS(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function bS(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function _S(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function IS(e){return e.size!==mS.size||e.x!==mS.x||e.y!==mS.y||e.rotate!==mS.rotate||e.flipX||e.flipY}var kS=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, 0));\n          transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function TS(){var e=DE,t=LE,n=dS.cssPrefix,r=dS.replacementClass,i=kS;if(n!==e||r!==t){var s=new RegExp("\\.".concat(e,"\\-"),"g"),a=new RegExp("\\--".concat(e,"\\-"),"g"),o=new RegExp("\\.".concat(t),"g");i=i.replace(s,".".concat(n,"-")).replace(a,"--".concat(n,"-")).replace(o,".".concat(r))}return i}var ES=!1;function SS(){dS.autoAddCss&&!ES&&(!function(e){if(e&&NE){var t=CE.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=CE.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],a=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(r=s)}CE.head.insertBefore(t,r)}}(TS()),ES=!0)}var CS={mixout:function(){return{dom:{css:TS,insertCss:SS}}},hooks:function(){return{beforeDOMElementCreation:function(){SS()},beforeI2svg:function(){SS()}}}},xS=SE||{};xS[PE]||(xS[PE]={}),xS[PE].styles||(xS[PE].styles={}),xS[PE].hooks||(xS[PE].hooks={}),xS[PE].shims||(xS[PE].shims=[]);var AS=xS[PE],NS=[],RS=!1;function PS(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,s=void 0===i?[]:i;return"string"===typeof e?bS(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(bS(e[n]),'" ')}),"").trim()}(r),">").concat(s.map(PS).join(""),"</").concat(t,">")}function OS(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}NE&&((RS=(CE.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(CE.readyState))||CE.addEventListener("DOMContentLoaded",(function e(){CE.removeEventListener("DOMContentLoaded",e),RS=1,NS.map((function(e){return e()}))})));var DS=function(e,t,n,r){var i,s,a,o=Object.keys(e),c=o.length,l=void 0!==r?function(e,t){return function(n,r,i,s){return e.call(t,n,r,i,s)}}(t,r):t;for(void 0===n?(i=1,a=e[o[0]]):(i=0,a=n);i<c;i++)a=l(a,e[s=o[i]],s,e);return a};function LS(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function MS(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function US(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==n&&n,i=MS(t);"function"!==typeof AS.hooks.addPack||r?AS.styles[e]=aE(aE({},AS.styles[e]||{}),i):AS.hooks.addPack(e,MS(t)),"fas"===e&&US("fa",t)}var FS,VS,jS,zS=AS.styles,BS=AS.shims,qS=(lE(FS={},KE,Object.values(XE[KE])),lE(FS,GE,Object.values(XE[GE])),FS),HS=null,KS={},GS={},WS={},QS={},YS={},JS=(lE(VS={},KE,Object.keys(YE[KE])),lE(VS,GE,Object.keys(YE[GE])),VS);function XS(e,t){var n,r=t.split("-"),i=r[0],s=r.slice(1).join("-");return i!==e||""===s||(n=s,~cS.indexOf(n))?null:s}var $S,ZS=function(){var e=function(e){return DS(zS,(function(t,n,r){return t[r]=DS(n,e,{}),t}),{})};KS=e((function(e,t,n){(t[3]&&(e[t[3]]=n),t[2])&&t[2].filter((function(e){return"number"===typeof e})).forEach((function(t){e[t.toString(16)]=n}));return e})),GS=e((function(e,t,n){(e[n]=n,t[2])&&t[2].filter((function(e){return"string"===typeof e})).forEach((function(t){e[t]=n}));return e})),YS=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in zS||dS.autoFetchSvg,n=DS(BS,(function(e,n){var r=n[0],i=n[1],s=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:s}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:s}),e}),{names:{},unicodes:{}});WS=n.names,QS=n.unicodes,HS=sC(dS.styleDefault,{family:dS.familyDefault})};function eC(e,t){return(KS[e]||{})[t]}function tC(e,t){return(YS[e]||{})[t]}function nC(e){return WS[e]||{prefix:null,iconName:null}}function rC(){return HS}$S=function(e){HS=sC(e.styleDefault,{family:dS.familyDefault})},fS.push($S),ZS();var iC=function(){return{prefix:null,iconName:null,rest:[]}};function sC(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===t?KE:t,r=YE[n][e],i=JE[n][e]||JE[n][r],s=e in AS.styles?e:null;return i||s||null}var aC=(lE(jS={},KE,Object.keys(XE[KE])),lE(jS,GE,Object.keys(XE[GE])),jS);function oC(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==n&&n,i=(lE(t={},KE,"".concat(dS.cssPrefix,"-").concat(KE)),lE(t,GE,"".concat(dS.cssPrefix,"-").concat(GE)),t),s=null,a=KE;(e.includes(i[KE])||e.some((function(e){return aC[KE].includes(e)})))&&(a=KE),(e.includes(i[GE])||e.some((function(e){return aC[GE].includes(e)})))&&(a=GE);var o=e.reduce((function(e,t){var n=XS(dS.cssPrefix,t);if(zS[t]?(t=qS[a].includes(t)?$E[a][t]:t,s=t,e.prefix=t):JS[a].indexOf(t)>-1?(s=t,e.prefix=sC(t,{family:a})):n?e.iconName=n:t!==dS.replacementClass&&t!==i[KE]&&t!==i[GE]&&e.rest.push(t),!r&&e.prefix&&e.iconName){var o="fa"===s?nC(e.iconName):{},c=tC(e.prefix,e.iconName);o.prefix&&(s=null),e.iconName=o.iconName||c||e.iconName,e.prefix=o.prefix||e.prefix,"far"!==e.prefix||zS.far||!zS.fas||dS.autoFetchSvg||(e.prefix="fas")}return e}),iC());return(e.includes("fa-brands")||e.includes("fab"))&&(o.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(o.prefix="fad"),o.prefix||a!==GE||!zS.fass&&!dS.autoFetchSvg||(o.prefix="fass",o.iconName=tC(o.prefix,o.iconName)||o.iconName),"fa"!==o.prefix&&"fa"!==s||(o.prefix=rC()||"fas"),o}var cC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=aE(aE({},e.definitions[t]||{}),i[t]),US(t,i[t]);var n=XE[KE][t];n&&US(n,i[t]),ZS()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,s=r.iconName,a=r.icon,o=a[2];e[i]||(e[i]={}),o.length>0&&o.forEach((function(t){"string"===typeof t&&(e[i][t]=a)})),e[i][s]=a})),e}}],n&&cE(t.prototype,n),r&&cE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),lC=[],uC={},hC={},dC=Object.keys(hC);function fC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return(uC[e]||[]).forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function pC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(uC[e]||[]).forEach((function(e){e.apply(null,n)}))}function mC(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return hC[e]?hC[e].apply(null,t):void 0}function gC(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||rC();if(t)return t=tC(n,t)||t,OS(vC.definitions,n,t)||OS(AS.styles,n,t)}var vC=new cC,yC={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return NE?(pC("beforeI2svg",e),mC("pseudoElements2svg",e),mC("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoReplaceSvgRoot;!1===dS.autoReplaceSvg&&(dS.autoReplaceSvg=!0),dS.observeMutations=!0,e=function(){_C({autoReplaceSvgRoot:n}),pC("watch",t)},NE&&(RS?setTimeout(e,0):NS.push(e))}},wC={icon:function(e){if(null===e)return null;if("object"===oE(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:tC(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=sC(e[0]);return{prefix:n,iconName:tC(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(dS.cssPrefix,"-"))>-1||e.match(ZE))){var r=oC(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||rC(),iconName:tC(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=rC();return{prefix:i,iconName:tC(i,e)||e}}}},bC={noAuto:function(){dS.autoReplaceSvg=!1,dS.observeMutations=!1,pC("noAuto")},config:dS,dom:yC,parse:wC,library:vC,findIconDefinition:gC,toHtml:PS},_C=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,t=void 0===e?CE:e;(Object.keys(AS.styles).length>0||dS.autoFetchSvg)&&NE&&dS.autoReplaceSvg&&bC.dom.i2svg({node:t})};function IC(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return PS(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(NE){var t=CE.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function kC(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,s=e.iconName,a=e.transform,o=e.symbol,c=e.title,l=e.maskId,u=e.titleId,h=e.extra,d=e.watchable,f=void 0!==d&&d,p=r.found?r:n,m=p.width,g=p.height,v="fak"===i,y=[dS.replacementClass,s?"".concat(dS.cssPrefix,"-").concat(s):""].filter((function(e){return-1===h.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(h.classes).join(" "),w={children:[],attributes:aE(aE({},h.attributes),{},{"data-prefix":i,"data-icon":s,class:y,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(m," ").concat(g)})},b=v&&!~h.classes.indexOf("fa-fw")?{width:"".concat(m/g*16*.0625,"em")}:{};f&&(w.attributes[ME]=""),c&&(w.children.push({tag:"title",attributes:{id:w.attributes["aria-labelledby"]||"title-".concat(u||vS())},children:[c]}),delete w.attributes.title);var _=aE(aE({},w),{},{prefix:i,iconName:s,main:n,mask:r,maskId:l,transform:a,symbol:o,styles:aE(aE({},b),h.styles)}),I=r.found&&n.found?mC("generateAbstractMask",_)||{children:[],attributes:{}}:mC("generateAbstractIcon",_)||{children:[],attributes:{}},k=I.children,T=I.attributes;return _.children=k,_.attributes=T,o?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,s=e.symbol,a=!0===s?"".concat(t,"-").concat(dS.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:aE(aE({},i),{},{id:a}),children:r}]}]}(_):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,s=e.styles,a=e.transform;if(IS(a)&&n.found&&!r.found){var o={x:n.width/n.height/2,y:.5};i.style=_S(aE(aE({},s),{},{"transform-origin":"".concat(o.x+a.x/16,"em ").concat(o.y+a.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(_)}function TC(e){var t=e.content,n=e.width,r=e.height,i=e.transform,s=e.title,a=e.extra,o=e.watchable,c=void 0!==o&&o,l=aE(aE(aE({},a.attributes),s?{title:s}:{}),{},{class:a.classes.join(" ")});c&&(l[ME]="");var u=aE({},a.styles);IS(i)&&(u.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?OE:n,i=e.height,s=void 0===i?OE:i,a=e.startCentered,o=void 0!==a&&a,c="";return c+=o&&RE?"translate(".concat(t.x/pS-r/2,"em, ").concat(t.y/pS-s/2,"em) "):o?"translate(calc(-50% + ".concat(t.x/pS,"em), calc(-50% + ").concat(t.y/pS,"em)) "):"translate(".concat(t.x/pS,"em, ").concat(t.y/pS,"em) "),c+="scale(".concat(t.size/pS*(t.flipX?-1:1),", ").concat(t.size/pS*(t.flipY?-1:1),") "),c+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=_S(u);h.length>0&&(l.style=h);var d=[];return d.push({tag:"span",attributes:l,children:[t]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}var EC=AS.styles;function SC(e){var t=e[0],n=e[1],r=uE(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(dS.cssPrefix,"-").concat(aS.GROUP)},children:[{tag:"path",attributes:{class:"".concat(dS.cssPrefix,"-").concat(aS.SECONDARY),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(dS.cssPrefix,"-").concat(aS.PRIMARY),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var CC={found:!1,width:512,height:512};function xC(e,t){var n=t;return"fa"===t&&null!==dS.styleDefault&&(t=rC()),new Promise((function(r,i){mC("missingIconAbstract");if("fa"===n){var s=nC(e)||{};e=s.iconName||e,t=s.prefix||t}if(e&&t&&EC[t]&&EC[t][e])return r(SC(EC[t][e]));!function(e,t){HE||dS.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(aE(aE({},CC),{},{icon:dS.showMissingIcons&&e&&mC("missingIconAbstract")||{}}))}))}var AC=function(){},NC=dS.measurePerformance&&AE&&AE.mark&&AE.measure?AE:{mark:AC,measure:AC},RC='FA "6.5.2"',PC=function(e){NC.mark("".concat(RC," ").concat(e," ends")),NC.measure("".concat(RC," ").concat(e),"".concat(RC," ").concat(e," begins"),"".concat(RC," ").concat(e," ends"))},OC={begin:function(e){return NC.mark("".concat(RC," ").concat(e," begins")),function(){return PC(e)}},end:PC},DC=function(){};function LC(e){return"string"===typeof(e.getAttribute?e.getAttribute(ME):null)}function MC(e){return CE.createElementNS("http://www.w3.org/2000/svg",e)}function UC(e){return CE.createElement(e)}function FC(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===t?"svg"===e.tag?MC:UC:t;if("string"===typeof e)return CE.createTextNode(e);var r=n(e.tag);return Object.keys(e.attributes||[]).forEach((function(t){r.setAttribute(t,e.attributes[t])})),(e.children||[]).forEach((function(e){r.appendChild(FC(e,{ceFn:n}))})),r}var VC={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(FC(e),t)})),null===t.getAttribute(ME)&&dS.keepOriginalSource){var n=CE.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~wS(t).indexOf(dS.replacementClass))return VC.replace(e);var r=new RegExp("".concat(dS.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===dS.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var s=n.map((function(e){return PS(e)})).join("\n");t.setAttribute(ME,""),t.innerHTML=s}};function jC(e){e()}function zC(e,t){var n="function"===typeof t?t:DC;if(0===e.length)n();else{var r=jC;dS.mutateApproach===BE&&(r=SE.requestAnimationFrame||jC),r((function(){var t=!0===dS.autoReplaceSvg?VC.replace:VC[dS.autoReplaceSvg]||VC.replace,r=OC.begin("mutate");e.map(t),r(),n()}))}}var BC=!1;function qC(){BC=!0}function HC(){BC=!1}var KC=null;function GC(e){if(xE&&dS.observeMutations){var t=e.treeCallback,n=void 0===t?DC:t,r=e.nodeCallback,i=void 0===r?DC:r,s=e.pseudoElementsCallback,a=void 0===s?DC:s,o=e.observeMutationsRoot,c=void 0===o?CE:o;KC=new xE((function(e){if(!BC){var t=rC();yS(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!LC(e.addedNodes[0])&&(dS.searchPseudoElements&&a(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&dS.searchPseudoElements&&a(e.target.parentNode),"attributes"===e.type&&LC(e.target)&&~sS.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(VE):null,n=e.getAttribute?e.getAttribute(jE):null;return t&&n}(e.target)){var r=oC(wS(e.target)),s=r.prefix,o=r.iconName;e.target.setAttribute(VE,s||t),o&&e.target.setAttribute(jE,o)}else(c=e.target)&&c.classList&&c.classList.contains&&c.classList.contains(dS.replacementClass)&&i(e.target);var c}))}})),NE&&KC.observe(c,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function WC(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=oC(wS(e));return i.prefix||(i.prefix=rC()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=function(e,t){return(GS[e]||{})[t]}(i.prefix,e.innerText)||eC(i.prefix,LS(e.innerText))),!i.iconName&&dS.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=e.firstChild.data)),i}function QC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=WC(e),r=n.iconName,i=n.prefix,s=n.rest,a=function(e){var t=yS(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return dS.autoA11y&&(n?t["aria-labelledby"]="".concat(dS.replacementClass,"-title-").concat(r||vS()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),o=fC("parseNodeAttributes",{},e),c=t.styleParser?function(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}(e):[];return aE({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:mS,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:c,attributes:a}},o)}var YC=AS.styles;function JC(e){var t="nest"===dS.autoReplaceSvg?QC(e,{styleParser:!1}):QC(e);return~t.extra.classes.indexOf(eS)?mC("generateLayersText",e,t):mC("generateSvgReplacementMutation",e,t)}var XC=new Set;function $C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!NE)return Promise.resolve();var n=CE.documentElement.classList,r=function(e){return n.add("".concat(zE,"-").concat(e))},i=function(e){return n.remove("".concat(zE,"-").concat(e))},s=dS.autoFetchSvg?XC:WE.map((function(e){return"fa-".concat(e)})).concat(Object.keys(YC));s.includes("fa")||s.push("fa");var a=[".".concat(eS,":not([").concat(ME,"])")].concat(s.map((function(e){return".".concat(e,":not([").concat(ME,"])")}))).join(", ");if(0===a.length)return Promise.resolve();var o=[];try{o=yS(e.querySelectorAll(a))}catch(oA){}if(!(o.length>0))return Promise.resolve();r("pending"),i("complete");var c=OC.begin("onTree"),l=o.reduce((function(e,t){try{var n=JC(t);n&&e.push(n)}catch(oA){HE||"MissingIcon"===oA.name&&console.error(oA)}return e}),[]);return new Promise((function(e,n){Promise.all(l).then((function(n){zC(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),c(),e()}))})).catch((function(e){c(),n(e)}))}))}function ZC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;JC(e).then((function(e){e&&zC([e],t)}))}WE.map((function(e){XC.add("fa-".concat(e))})),Object.keys(YE[KE]).map(XC.add.bind(XC)),Object.keys(YE[GE]).map(XC.add.bind(XC)),XC=hE(XC);var ex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?mS:n,i=t.symbol,s=void 0!==i&&i,a=t.mask,o=void 0===a?null:a,c=t.maskId,l=void 0===c?null:c,u=t.title,h=void 0===u?null:u,d=t.titleId,f=void 0===d?null:d,p=t.classes,m=void 0===p?[]:p,g=t.attributes,v=void 0===g?{}:g,y=t.styles,w=void 0===y?{}:y;if(e){var b=e.prefix,_=e.iconName,I=e.icon;return IC(aE({type:"icon"},e),(function(){return pC("beforeDOMElementCreation",{iconDefinition:e,params:t}),dS.autoA11y&&(h?v["aria-labelledby"]="".concat(dS.replacementClass,"-title-").concat(f||vS()):(v["aria-hidden"]="true",v.focusable="false")),kC({icons:{main:SC(I),mask:o?SC(o.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:_,transform:aE(aE({},mS),r),symbol:s,title:h,maskId:l,titleId:f,extra:{attributes:v,styles:w,classes:m}})}))}},tx={mixout:function(){return{icon:(e=ex,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:gC(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:gC(i||{})),e(r,aE(aE({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=$C,e.nodeCallback=ZC,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?CE:t,r=e.callback;return $C(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,s=t.prefix,a=t.transform,o=t.symbol,c=t.mask,l=t.maskId,u=t.extra;return new Promise((function(t,h){Promise.all([xC(n,s),c.iconName?xC(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(c){var h=uE(c,2),d=h[0],f=h[1];t([e,kC({icons:{main:d,mask:f},prefix:s,iconName:n,transform:a,symbol:o,maskId:l,title:r,titleId:i,extra:u,watchable:!0})])})).catch(h)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,s=e.transform,a=_S(e.styles);return a.length>0&&(r.style=a),IS(s)&&(t=mC("generateAbstractTransformGrouping",{main:i,transform:s,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},nx={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return IC({type:"layer"},(function(){pC("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(dS.cssPrefix,"-layers")].concat(hE(r)).join(" ")},children:n}]}))}}}},rx={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,s=void 0===i?[]:i,a=t.attributes,o=void 0===a?{}:a,c=t.styles,l=void 0===c?{}:c;return IC({type:"counter",content:e},(function(){return pC("beforeDOMElementCreation",{content:e,params:t}),function(e){var t=e.content,n=e.title,r=e.extra,i=aE(aE(aE({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=_S(r.styles);s.length>0&&(i.style=s);var a=[];return a.push({tag:"span",attributes:i,children:[t]}),n&&a.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),a}({content:e.toString(),title:r,extra:{attributes:o,styles:l,classes:["".concat(dS.cssPrefix,"-layers-counter")].concat(hE(s))}})}))}}}},ix={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?mS:n,i=t.title,s=void 0===i?null:i,a=t.classes,o=void 0===a?[]:a,c=t.attributes,l=void 0===c?{}:c,u=t.styles,h=void 0===u?{}:u;return IC({type:"text",content:e},(function(){return pC("beforeDOMElementCreation",{content:e,params:t}),TC({content:e,transform:aE(aE({},mS),r),title:s,extra:{attributes:l,styles:h,classes:["".concat(dS.cssPrefix,"-layers-text")].concat(hE(o))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,s=null,a=null;if(RE){var o=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();s=c.width/o,a=c.height/o}return dS.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,TC({content:e.innerHTML,width:s,height:a,transform:r,title:n,extra:i,watchable:!0})])}}},sx=new RegExp('"',"ug"),ax=[1105920,1112319];function ox(e,t){var n="".concat(FE).concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var s=yS(e.children).filter((function(e){return e.getAttribute(UE)===t}))[0],a=SE.getComputedStyle(e,t),o=a.getPropertyValue("font-family").match(tS),c=a.getPropertyValue("font-weight"),l=a.getPropertyValue("content");if(s&&!o)return e.removeChild(s),r();if(o&&"none"!==l&&""!==l){var u=a.getPropertyValue("content"),h=~["Sharp"].indexOf(o[2])?GE:KE,d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(o[2])?JE[h][o[2].toLowerCase()]:nS[h][c],f=function(e){var t=e.replace(sx,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=ax[0]&&n<=ax[1],i=2===t.length&&t[0]===t[1];return{value:LS(i?t[0]:t),isSecondary:r||i}}(u),p=f.value,m=f.isSecondary,g=o[0].startsWith("FontAwesome"),v=eC(d,p),y=v;if(g){var w=function(e){var t=QS[e],n=eC("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);w.iconName&&w.prefix&&(v=w.iconName,d=w.prefix)}if(!v||m||s&&s.getAttribute(VE)===d&&s.getAttribute(jE)===y)r();else{e.setAttribute(n,y),s&&e.removeChild(s);var b={iconName:null,title:null,titleId:null,prefix:null,transform:mS,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},_=b.extra;_.attributes[UE]=t,xC(v,d).then((function(i){var s=kC(aE(aE({},b),{},{icons:{main:i,mask:iC()},prefix:d,iconName:y,extra:_,watchable:!0})),a=CE.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(a,e.firstChild):e.appendChild(a),a.outerHTML=s.map((function(e){return PS(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function cx(e){return Promise.all([ox(e,"::before"),ox(e,"::after")])}function lx(e){return e.parentNode!==document.head&&!~qE.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(UE)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function ux(e){if(NE)return new Promise((function(t,n){var r=yS(e.querySelectorAll("*")).filter(lx).map(cx),i=OC.begin("searchPseudoElements");qC(),Promise.all(r).then((function(){i(),HC(),t()})).catch((function(){i(),HC(),n()}))}))}var hx=!1,dx=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},fx={mixout:function(){return{parse:{transform:function(e){return dx(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=dx(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,s={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(32*n.x,", ").concat(32*n.y,") "),o="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),c="rotate(".concat(n.rotate," 0 0)"),l={outer:s,inner:{transform:"".concat(a," ").concat(o," ").concat(c)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:aE({},l.outer),children:[{tag:"g",attributes:aE({},l.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:aE(aE({},t.icon.attributes),l.path)}]}]}}}},px={x:0,y:0,width:"100%",height:"100%"};function mx(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var gx={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?oC(n.split(" ").map((function(e){return e.trim()}))):iC();return r.prefix||(r.prefix=rC()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,s=e.mask,a=e.maskId,o=e.transform,c=i.width,l=i.icon,u=s.width,h=s.icon,d=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(32*t.x,", ").concat(32*t.y,") "),a="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),o="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(s," ").concat(a," ").concat(o)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:o,containerWidth:u,iconWidth:c}),f={tag:"rect",attributes:aE(aE({},px),{},{fill:"white"})},p=l.children?{children:l.children.map(mx)}:{},m={tag:"g",attributes:aE({},d.inner),children:[mx(aE({tag:l.tag,attributes:aE(aE({},l.attributes),d.path)},p))]},g={tag:"g",attributes:aE({},d.outer),children:[m]},v="mask-".concat(a||vS()),y="clip-".concat(a||vS()),w={tag:"mask",attributes:aE(aE({},px),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,g]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:y},children:(t=h,"g"===t.tag?t.children:[t])},w]};return n.push(b,{tag:"rect",attributes:aE({fill:"currentColor","clip-path":"url(#".concat(y,")"),mask:"url(#".concat(v,")")},px)}),{children:n,attributes:r}}}},vx={provides:function(e){var t=!1;SE.matchMedia&&(t=SE.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:aE(aE({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=aE(aE({},r),{},{attributeName:"opacity"}),s={tag:"circle",attributes:aE(aE({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||s.children.push({tag:"animate",attributes:aE(aE({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:aE(aE({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(s),e.push({tag:"path",attributes:aE(aE({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:aE(aE({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:aE(aE({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:aE(aE({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;lC=e,uC={},Object.keys(hC).forEach((function(e){-1===dC.indexOf(e)&&delete hC[e]})),lC.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===oE(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){uC[e]||(uC[e]=[]),uC[e].push(r[e])}))}e.provides&&e.provides(hC)}))}([CS,tx,nx,rx,ix,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=ux,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?CE:t;dS.searchPseudoElements&&ux(n)}}},{mixout:function(){return{dom:{unwatch:function(){qC(),hx=!0}}}},hooks:function(){return{bootstrap:function(){GC(fC("mutationObserverCallbacks",{}))},noAuto:function(){KC&&KC.disconnect()},watch:function(e){var t=e.observeMutationsRoot;hx?HC():GC(fC("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},fx,gx,vx,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:bC});var yx=bC.parse,wx=bC.icon,bx=n(173),_x=n.n(bx);function Ix(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ix(Object(n),!0).forEach((function(t){Ex(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ix(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tx(e){return Tx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tx(e)}function Ex(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Cx(e){return function(e){if(Array.isArray(e))return xx(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return xx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xx(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ax(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Nx=["style"];var Rx=!1;try{Rx=!0}catch(oA){}function Px(e){return e&&"object"===Tx(e)&&e.prefix&&e.iconName&&e.icon?e:yx.icon?yx.icon(e):null===e?null:e&&"object"===Tx(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function Ox(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Ex({},e,t):{}}var Dx={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Lx=r.forwardRef((function(e,t){var n=kx(kx({},Dx),e),r=n.icon,i=n.mask,s=n.symbol,a=n.className,o=n.title,c=n.titleId,l=n.maskId,u=Px(r),h=Ox("classes",[].concat(Cx(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,s=e.bounce,a=e.shake,o=e.flash,c=e.spin,l=e.spinPulse,u=e.spinReverse,h=e.pulse,d=e.fixedWidth,f=e.inverse,p=e.border,m=e.listItem,g=e.flip,v=e.size,y=e.rotation,w=e.pull,b=(Ex(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":a,"fa-flash":o,"fa-spin":c,"fa-spin-reverse":u,"fa-spin-pulse":l,"fa-pulse":h,"fa-fw":d,"fa-inverse":f,"fa-border":p,"fa-li":m,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(v),"undefined"!==typeof v&&null!==v),Ex(t,"fa-rotate-".concat(y),"undefined"!==typeof y&&null!==y&&0!==y),Ex(t,"fa-pull-".concat(w),"undefined"!==typeof w&&null!==w),Ex(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(b).map((function(e){return b[e]?e:null})).filter((function(e){return e}))}(n)),Cx((a||"").split(" ")))),d=Ox("transform","string"===typeof n.transform?yx.transform(n.transform):n.transform),f=Ox("mask",Px(i)),p=wx(u,kx(kx(kx(kx({},h),d),f),{},{symbol:s,title:o,titleId:c,maskId:l}));if(!p)return function(){var e;!Rx&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var m=p.abstract,g={ref:t};return Object.keys(n).forEach((function(e){Dx.hasOwnProperty(e)||(g[e]=n[e])})),Mx(m[0],g)}));Lx.displayName="FontAwesomeIcon",Lx.propTypes={beat:_x().bool,border:_x().bool,beatFade:_x().bool,bounce:_x().bool,className:_x().string,fade:_x().bool,flash:_x().bool,mask:_x().oneOfType([_x().object,_x().array,_x().string]),maskId:_x().string,fixedWidth:_x().bool,inverse:_x().bool,flip:_x().oneOf([!0,!1,"horizontal","vertical","both"]),icon:_x().oneOfType([_x().object,_x().array,_x().string]),listItem:_x().bool,pull:_x().oneOf(["right","left"]),pulse:_x().bool,rotation:_x().oneOf([0,90,180,270]),shake:_x().bool,size:_x().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:_x().bool,spinPulse:_x().bool,spinReverse:_x().bool,symbol:_x().oneOfType([_x().bool,_x().string]),title:_x().string,titleId:_x().string,transform:_x().oneOfType([_x().string,_x().object]),swapOpacity:_x().bool};var Mx=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),s=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=r.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,r=t.indexOf(":"),i=Ax(t.slice(0,r)),s=t.slice(r+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=s:e[i]=s,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[Ax(t)]=r}return e}),{attrs:{}}),a=r.style,o=void 0===a?{}:a,c=Sx(r,Nx);return s.attrs.style=kx(kx({},s.attrs.style),o),t.apply(void 0,[n.tag,kx(kx({},s.attrs),c)].concat(Cx(i)))}.bind(null,r.createElement),Ux={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},Fx={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},Vx={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"]};const jx=()=>{const e=async e=>{const{target:{name:t}}=e;let n;"google"===t?n=new ZT.auth.GoogleAuthProvider:"github"===t&&(n=new ZT.auth.GithubAuthProvider);await eE.signInWithPopup(n)};return(0,rE.jsxs)("div",{className:"authContainer",children:[(0,rE.jsx)(Lx,{icon:Vx,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),(0,rE.jsx)(iE,{}),(0,rE.jsxs)("div",{className:"authBtns",children:[(0,rE.jsxs)("button",{onClick:e,name:"google",className:"authBtn",children:["Continue with Google ",(0,rE.jsx)(Lx,{icon:Ux})]}),(0,rE.jsxs)("button",{onClick:e,name:"github",className:"authBtn",children:["Continue with Github ",(0,rE.jsx)(Lx,{icon:Fx})]})]})]})};var zx={prefix:"fas",iconName:"pencil",icon:[512,512,[9999,61504,"pencil-alt"],"f303","M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"]},Bx={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},qx={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"]},Hx={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Kx=Hx;const Gx=e=>{let{nweetObj:t,isOwner:n}=e;const[i,s]=(0,r.useState)(!1),[a,o]=(0,r.useState)(t.text),c=()=>s((e=>!e));return(0,rE.jsx)("div",{className:"nweet",children:i?(0,rE.jsxs)(rE.Fragment,{children:[(0,rE.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await tE.doc("nweets/".concat(t.id)).update({text:a}),s(!1)},className:"container nweetEdit",children:[(0,rE.jsx)("input",{onChange:e=>{const{target:{value:t}}=e;o(t)},value:a,required:!0,placeholder:"Edit your nweet",autoFocus:!0,className:"formInput"}),(0,rE.jsx)("input",{type:"submit",value:"update nweeet",className:"formBtn"})]}),(0,rE.jsx)("button",{onClick:c,className:"formBtn cancelBtn",children:"cancel"})]}):(0,rE.jsxs)(rE.Fragment,{children:[(0,rE.jsx)("h4",{children:t.text}),t.attachmentURL&&(0,rE.jsx)("img",{src:t.attachmentURL,alt:"twt",width:"50px",height:"50px"}),n&&(0,rE.jsxs)("div",{className:"nweet__actions",children:[(0,rE.jsx)("span",{onClick:async()=>{window.confirm("Do you want to delete this tweet?")&&(await tE.doc("nweets/".concat(t.id)).delete(),""!==t.attachmentURL&&await nE.refFromURL(t.attachmentURL).delete())},children:(0,rE.jsx)(Lx,{icon:Bx})}),(0,rE.jsx)("span",{onClick:c,children:(0,rE.jsx)(Lx,{icon:zx})})]})]})})},Wx={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Qx;const Yx=new Uint8Array(16);function Jx(){if(!Qx&&(Qx="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qx(Yx)}const Xx=[];for(let n=0;n<256;++n)Xx.push((n+256).toString(16).slice(1));function $x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Xx[e[t+0]]+Xx[e[t+1]]+Xx[e[t+2]]+Xx[e[t+3]]+"-"+Xx[e[t+4]]+Xx[e[t+5]]+"-"+Xx[e[t+6]]+Xx[e[t+7]]+"-"+Xx[e[t+8]]+Xx[e[t+9]]+"-"+Xx[e[t+10]]+Xx[e[t+11]]+Xx[e[t+12]]+Xx[e[t+13]]+Xx[e[t+14]]+Xx[e[t+15]]}const Zx=function(e,t,n){if(Wx.randomUUID&&!t&&!e)return Wx.randomUUID();const r=(e=e||{}).random||(e.rng||Jx)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return $x(r)},eA=e=>{let{userObj:t}=e;const[n,i]=(0,r.useState)(""),[s,a]=(0,r.useState)("");return(0,rE.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),""===n)return;let r="";if(""!==s){const e=nE.ref().child("".concat(t.uid,"/").concat(Zx())),n=await e.putString(s,"data_url");r=await n.ref.getDownloadURL()}await tE.collection("nweets").add({text:n,createdAt:Date.now(),creatorId:t.uid,attachmentURL:r}),i(""),a("")},className:"factoryForm",children:[(0,rE.jsxs)("div",{className:"factoryInput__container",children:[(0,rE.jsx)("input",{className:"factoryInput__input",value:n,onChange:e=>{e.preventDefault();const{target:{value:t}}=e;i(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),(0,rE.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),(0,rE.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[(0,rE.jsx)("span",{children:"Add photos"}),(0,rE.jsx)(Lx,{icon:qx})]}),(0,rE.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:e=>{const{target:{files:t}}=e,n=t[0],r=new FileReader;r.onloadend=e=>{const{currentTarget:{result:t}}=e;a(t)},Boolean(n)&&r.readAsDataURL(n)},style:{opacity:0}}),s&&(0,rE.jsxs)("div",{className:"factoryForm__attachment",children:[(0,rE.jsx)("img",{src:s,style:{backgroundImage:s}}),(0,rE.jsxs)("div",{className:"factoryForm__clear",onClick:()=>{a("")},children:[(0,rE.jsx)("span",{children:"Remove"}),(0,rE.jsx)(Lx,{icon:Kx})]})]})]})},tA=e=>{let{userObj:t}=e;const[n,i]=(0,r.useState)([]);return(0,r.useEffect)((()=>{tE.collection("nweets").orderBy("createdAt","desc").onSnapshot((e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));i(t)}))}),[]),(0,rE.jsxs)("div",{className:"container",children:[(0,rE.jsx)(eA,{userObj:t}),(0,rE.jsx)("div",{style:{marginTop:30},children:n.map((e=>(0,rE.jsx)(Gx,{nweetObj:e,isOwner:e.creatorId===t.uid},e.id)))})]})},nA=e=>{let{userObj:t,refreshUser:n}=e;const i=ee(),[s,a]=(0,r.useState)(t.displayName);return(0,rE.jsxs)("div",{className:"container",children:[(0,rE.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),t.displayName!==s&&await t.updateProfile({displayName:s}),n()},className:"profileForm",children:[(0,rE.jsx)("input",{onChange:e=>{const{target:{value:t}}=e;a(t)},type:"text",placeholder:"Display name",value:s,autoFocus:!0,className:"formInput"}),(0,rE.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),(0,rE.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:()=>{eE.signOut(),i("/")},children:"Log out"})]})};var rA={prefix:"far",iconName:"user",icon:[448,512,[128100,62144],"f007","M304 128a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM49.3 464H398.7c-8.9-63.3-63.3-112-129-112H178.3c-65.7 0-120.1 48.7-129 112zM0 482.3C0 383.8 79.8 304 178.3 304h91.4C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7H29.7C13.3 512 0 498.7 0 482.3z"]};const iA=e=>{let{userObj:t}=e;return(0,rE.jsx)("nav",{children:(0,rE.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[(0,rE.jsx)("li",{children:(0,rE.jsx)(Ee,{to:"/",style:{marginRight:10},children:(0,rE.jsx)(Lx,{icon:Vx,color:"#04AAFF",size:"2x"})})}),(0,rE.jsx)("li",{children:(0,rE.jsxs)(Ee,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[(0,rE.jsx)(Lx,{icon:rA,color:"#04AAFF",size:"2x"}),(0,rE.jsx)("span",{style:{marginTop:10},children:t.displayName?"".concat(t.displayName,"'s Profile"):"Profile"})]})})]})})},sA=e=>{let{isLoggedIn:t,userObj:n,refreshUser:r}=e;return(0,rE.jsxs)(Ie,{children:[t&&(0,rE.jsx)(iA,{userObj:n}),(0,rE.jsx)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:(0,rE.jsx)(ge,{children:t?(0,rE.jsxs)(rE.Fragment,{children:[(0,rE.jsx)(pe,{exact:!0,path:"/",element:(0,rE.jsx)(tA,{userObj:n})}),(0,rE.jsx)(pe,{exact:!0,path:"/profile",element:(0,rE.jsx)(nA,{refreshUser:r,userObj:n})})]}):(0,rE.jsx)(pe,{exact:!0,path:"/",element:(0,rE.jsx)(jx,{})})})})]})};const aA=function(){const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null);return(0,r.useEffect)((()=>{eE.onAuthStateChanged((e=>{i(!!e&&{uid:e.uid,displayName:e.displayName,updateProfile:t=>e.updateProfile(t)}),t(!0)}))}),[]),(0,rE.jsx)(rE.Fragment,{children:e?(0,rE.jsx)(sA,{refreshUser:()=>{const e=eE.currentUser;i({uid:e.uid,displayName:e.displayName,updateProfile:t=>e.updateProfile(t)})},isLoggedIn:Boolean(n),userObj:n}):"initializing..."})};s.createRoot(document.getElementById("root")).render((0,rE.jsx)(r.StrictMode,{children:(0,rE.jsx)(aA,{})}))})()})();
//# sourceMappingURL=main.9d857128.js.map